<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Owasp-csrfguard] Recursion error for Ajax requests in Firefox and	chrome
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:owasp-csrfguard%40lists.owasp.org?Subject=Re%3A%20%5BOwasp-csrfguard%5D%20Recursion%20error%20for%20Ajax%20requests%20in%20Firefox%20and%0A%09chrome&In-Reply-To=%3CCAOGD%2BYMTpHqfVgvNicZJS73Kpi28cEqo7EYb_89Siof4up3OCQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000322.html">
   <LINK REL="Next"  HREF="000324.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Owasp-csrfguard] Recursion error for Ajax requests in Firefox and	chrome</H1>
    <B>Karthikeyan Anandan</B> 
    <A HREF="mailto:owasp-csrfguard%40lists.owasp.org?Subject=Re%3A%20%5BOwasp-csrfguard%5D%20Recursion%20error%20for%20Ajax%20requests%20in%20Firefox%20and%0A%09chrome&In-Reply-To=%3CCAOGD%2BYMTpHqfVgvNicZJS73Kpi28cEqo7EYb_89Siof4up3OCQ%40mail.gmail.com%3E"
       TITLE="[Owasp-csrfguard] Recursion error for Ajax requests in Firefox and	chrome">karthi.anandan at gmail.com
       </A><BR>
    <I>Tue Feb 17 16:06:42 UTC 2015</I>
    <P><UL>
        <LI>Previous message: <A HREF="000322.html">[Owasp-csrfguard] Fwd: CSRFGuard Bug Fix.
</A></li>
        <LI>Next message: <A HREF="000324.html">[Owasp-csrfguard] Recursion error for Ajax requests in Firefox	and
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#323">[ date ]</a>
              <a href="thread.html#323">[ thread ]</a>
              <a href="subject.html#323">[ subject ]</a>
              <a href="author.html#323">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I am implementing CSRFGuard in our project and ran into a problem with Ajax
requests.When I submit a request from a jsp page to another jsp which makes
an Ajax call on loading, the recursion occurs (It works fine in IE). The
recursion seems to be happening at the XMLHttpRequest open function,
XMLHttpRequest.prototype._open = XMLHttpRequest.prototype.open;
XMLHttpRequest.prototype.open = function(method, url, async, user, pass) {
this.url = url;
console.log(&quot;open: &quot;+url+&quot; this: &quot;+this); // Comment
this._open.apply(this, arguments);
};

The recursion reaches to max stack size and fails eventually. I attached
the web.xml and xsrfguard.properties files for your reference and kindly
let me know if any other details required.

The comment displays the following message continuously
 open:  /axamps/JavaScriptServlet  this: [object XMLHttpRequest]


Thanks in advance
Karthi
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.owasp.org/pipermail/owasp-csrfguard/attachments/20150217/aafb86bb/attachment.html">http://lists.owasp.org/pipermail/owasp-csrfguard/attachments/20150217/aafb86bb/attachment.html</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: csrfguard.properties
Type: application/octet-stream
Size: 2667 bytes
Desc: not available
URL: &lt;<A HREF="http://lists.owasp.org/pipermail/owasp-csrfguard/attachments/20150217/aafb86bb/attachment.obj">http://lists.owasp.org/pipermail/owasp-csrfguard/attachments/20150217/aafb86bb/attachment.obj</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: web.xml
Type: text/xml
Size: 3381 bytes
Desc: not available
URL: &lt;<A HREF="http://lists.owasp.org/pipermail/owasp-csrfguard/attachments/20150217/aafb86bb/attachment.xml">http://lists.owasp.org/pipermail/owasp-csrfguard/attachments/20150217/aafb86bb/attachment.xml</A>&gt;
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000322.html">[Owasp-csrfguard] Fwd: CSRFGuard Bug Fix.
</A></li>
	<LI>Next message: <A HREF="000324.html">[Owasp-csrfguard] Recursion error for Ajax requests in Firefox	and
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#323">[ date ]</a>
              <a href="thread.html#323">[ thread ]</a>
              <a href="subject.html#323">[ subject ]</a>
              <a href="author.html#323">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.owasp.org/mailman/listinfo/owasp-csrfguard">More information about the Owasp-csrfguard
mailing list</a><br>
</body></html>
