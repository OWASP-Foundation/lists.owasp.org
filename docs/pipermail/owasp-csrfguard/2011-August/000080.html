<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Owasp-csrfguard] First implementation of csrfguard getting	errors.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:owasp-csrfguard%40lists.owasp.org?Subject=%5BOwasp-csrfguard%5D%20First%20implementation%20of%20csrfguard%20getting%0A%09errors.&In-Reply-To=CAHTPmKnrWemwWAVJeiPmkz1YBuLyQLD8bRcvTr%3DknbGz3MMKAA%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000079.html">
   <LINK REL="Next"  HREF="000082.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Owasp-csrfguard] First implementation of csrfguard getting	errors.</H1>
    <B>Patrick Radtke</B> 
    <A HREF="mailto:owasp-csrfguard%40lists.owasp.org?Subject=%5BOwasp-csrfguard%5D%20First%20implementation%20of%20csrfguard%20getting%0A%09errors.&In-Reply-To=CAHTPmKnrWemwWAVJeiPmkz1YBuLyQLD8bRcvTr%3DknbGz3MMKAA%40mail.gmail.com"
       TITLE="[Owasp-csrfguard] First implementation of csrfguard getting	errors.">pradtke at stanford.edu
       </A><BR>
    <I>Fri Aug 26 12:46:01 EDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="000079.html">[Owasp-csrfguard] First implementation of csrfguard getting errors.
</A></li>
        <LI>Next message: <A HREF="000082.html">[Owasp-csrfguard] First implementation of csrfguard getting	errors.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#80">[ date ]</a>
              <a href="thread.html#80">[ thread ]</a>
              <a href="subject.html#80">[ subject ]</a>
              <a href="author.html#80">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>What version are you using?
If you are building from github let me know the commit.

On 8/25/11 5:45 PM, Steve Dittmann wrote:
&gt;<i> Hello,
</I>&gt;<i>
</I>&gt;<i> This is my first attempt to implement csrfguard.
</I>&gt;<i>
</I>&gt;<i> I've added the Owasp.CsrfGuard.jar to the WEB-INF\lib and 
</I>&gt;<i> the Owasp.CsrfGuard.properties to the WEB-INF folder.
</I>&gt;<i>
</I>&gt;<i> It also has been added to the classpath:
</I>&gt;<i>
</I>&gt;<i> CLASSPATH=;contrib.jar;;:\bea\WLSERV~1.0\common\eval\pointbase\lib\pbclient51.jar;C:\bea\WLSERV~1.0\server\lib\xqrl.jar;C:\apps\GTS\d_whsldm\deploy\d_whsldm\sdd_local\lib\com.ibm.mq.jar;C:\apps\GTS\d_whsldm\deploy\d_whsldm\sdd_local\prop\log4j.properties;C:\apps\GTS\d_whsldm\deploy\d_whsldm\sdd_local\lib\Owasp.CsrfGuard.jar;
</I>&gt;<i>
</I>&gt;<i> I'm receiving the below errors on my localhost when I attempt to 
</I>&gt;<i> access the login page.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Cutoff Date is Wed Aug 24 17:22:47 PDT 2011
</I>&gt;<i> &lt;Aug 25, 2011 5:23:10 PM PDT&gt; &lt;Warning&gt; &lt;HTTP&gt; &lt;BEA-101162&gt; &lt;User 
</I>&gt;<i> defined listener org.owasp.csrfguard.CsrfGuardListener failed: 
</I>&gt;<i> java.lang.RuntimeException: java.lang.NullPointerException.
</I>&gt;<i> java.lang.RuntimeException: java.lang.NullPointerException
</I>&gt;<i>         at 
</I>&gt;<i> org.owasp.csrfguard.CsrfGuardListener.newInstance(CsrfGuardListener.java:49)
</I>&gt;<i>         at 
</I>&gt;<i> org.owasp.csrfguard.CsrfGuardListener.sessionCreated(CsrfGuardListener.java:24)
</I>&gt;<i>         at 
</I>&gt;<i> weblogic.servlet.internal.EventsManager.notifySessionLifetimeEvent(EventsManager.java:257)
</I>&gt;<i>         at 
</I>&gt;<i> weblogic.servlet.internal.session.MemorySessionData.&lt;init&gt;(MemorySessionData.java:10)
</I>&gt;<i>         at 
</I>&gt;<i> weblogic.servlet.internal.session.MemorySessionContext.getNewSession(MemorySessionContext.java:28)
</I>&gt;<i>         Truncated. see log file for complete stacktrace
</I>&gt;<i> java.lang.NullPointerException
</I>&gt;<i>         at java.io.File.&lt;init&gt;(File.java:194)
</I>&gt;<i>         at 
</I>&gt;<i> org.owasp.csrfguard.CsrfGuardListener.getResourceStream(CsrfGuardListener.java:72)
</I>&gt;<i>         at 
</I>&gt;<i> org.owasp.csrfguard.CsrfGuardListener.newInstance(CsrfGuardListener.java:46)
</I>&gt;<i>         at 
</I>&gt;<i> org.owasp.csrfguard.CsrfGuardListener.sessionCreated(CsrfGuardListener.java:24)
</I>&gt;<i>         at 
</I>&gt;<i> weblogic.servlet.internal.EventsManager.notifySessionLifetimeEvent(EventsManager.java:257)
</I>&gt;<i>         Truncated. see log file for complete stacktrace
</I>&gt;<i> &gt;
</I>&gt;<i> &lt;Aug 25, 2011 5:23:10 PM PDT&gt; &lt;Error&gt; &lt;HTTP&gt; &lt;BEA-101020&gt; 
</I>&gt;<i> &lt;[<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-csrfguard">weblogic.servlet.internal.WebAppServletContext at 19de9c9</A> - Servlet 
</I>&gt;<i> failed with Exception
</I>&gt;<i> java.lang.NullPointerException
</I>&gt;<i>         at 
</I>&gt;<i> org.owasp.csrfguard.CsrfGuardFilter.doFilter(CsrfGuardFilter.java:53)
</I>&gt;<i>         at 
</I>&gt;<i> weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:42)
</I>&gt;<i>         at 
</I>&gt;<i> weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.run(WebAppServletContext.java:3393)
</I>&gt;<i>         at 
</I>&gt;<i> weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:321)
</I>&gt;<i>         at weblogic.security.service.SecurityManager.runAs(Unknown Source)
</I>&gt;<i>         Truncated. see log file for complete stacktrace
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Below is the Web.xml:
</I>&gt;<i>
</I>&gt;<i> &lt;web-app&gt;
</I>&gt;<i> &lt;display-name&gt;SDDWeb&lt;/display-name&gt;
</I>&gt;<i> &lt;context-param&gt;
</I>&gt;<i> &lt;param-name&gt;Owasp.CsrfGuard.Config&lt;/param-name&gt;
</I>&gt;<i> &lt;param-value&gt;WEB-INF/Owasp.CsrfGuard.properties&lt;/param-value&gt;
</I>&gt;<i> &lt;/context-param&gt;
</I>&gt;<i> &lt;context-param&gt;
</I>&gt;<i> &lt;param-name&gt;Owasp.CsrfGuard.Config.Print&lt;/param-name&gt;
</I>&gt;<i> &lt;param-value&gt;true&lt;/param-value&gt;
</I>&gt;<i> &lt;/context-param&gt;
</I>&gt;<i> &lt;listener&gt;
</I>&gt;<i> &lt;listener-class&gt;org.owasp.csrfguard.CsrfGuardListener&lt;/listener-class&gt;
</I>&gt;<i> &lt;/listener&gt;
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> &lt;filter&gt;
</I>&gt;<i> &lt;filter-name&gt;CSRFGuard&lt;/filter-name&gt;
</I>&gt;<i> &lt;filter-class&gt;org.owasp.csrfguard.CsrfGuardFilter&lt;/filter-class&gt;
</I>&gt;<i> &lt;/filter&gt;
</I>&gt;<i> &lt;filter-mapping&gt;
</I>&gt;<i> &lt;filter-name&gt;CSRFGuard&lt;/filter-name&gt;
</I>&gt;<i> &lt;url-pattern&gt;/*&lt;/url-pattern&gt;
</I>&gt;<i> &lt;/filter-mapping&gt;
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> &lt;filter&gt;
</I>&gt;<i> &lt;filter-name&gt;SessionFilter&lt;/filter-name&gt;
</I>&gt;<i> &lt;filter-class&gt;com.sig.sdd.ui.utils.SddSessionFilter&lt;/filter-class&gt;
</I>&gt;<i> &lt;init-param&gt;
</I>&gt;<i> &lt;param-name&gt;findSessionAttribute&lt;/param-name&gt;
</I>&gt;<i> &lt;param-value&gt;user&lt;/param-value&gt;
</I>&gt;<i> &lt;/init-param&gt;
</I>&gt;<i> &lt;init-param&gt;
</I>&gt;<i> &lt;param-name&gt;message&lt;/param-name&gt;
</I>&gt;<i> &lt;param-value&gt;error.session.expired&lt;/param-value&gt;
</I>&gt;<i> &lt;/init-param&gt;
</I>&gt;<i> &lt;init-param&gt;
</I>&gt;<i> &lt;param-name&gt;notFoundFoward&lt;/param-name&gt;
</I>&gt;<i> &lt;param-value&gt;/sdd.do&lt;/param-value&gt;
</I>&gt;<i> &lt;/init-param&gt;
</I>&gt;<i> &lt;/filter&gt;
</I>&gt;<i> &lt;filter-mapping&gt;
</I>&gt;<i> &lt;filter-name&gt;SessionFilter&lt;/filter-name&gt;
</I>&gt;<i> &lt;url-pattern&gt;*.jsp&lt;/url-pattern&gt;
</I>&gt;<i> &lt;/filter-mapping&gt;
</I>&gt;<i> &lt;filter-mapping&gt;
</I>&gt;<i> &lt;filter-name&gt;SessionFilter&lt;/filter-name&gt;
</I>&gt;<i> &lt;url-pattern&gt;*.do&lt;/url-pattern&gt;
</I>&gt;<i> &lt;/filter-mapping&gt;
</I>&gt;<i> &lt;listener&gt;
</I>&gt;<i> &lt;listener-class&gt;
</I>&gt;<i>              com.sig.sdd.ui.utils.ReceiptListener
</I>&gt;<i> &lt;/listener-class&gt;
</I>&gt;<i> &lt;/listener&gt;
</I>&gt;<i> &lt;listener&gt;
</I>&gt;<i> &lt;listener-class&gt;com.sig.sdd.ui.utils.DynaContentInitListener&lt;/listener-class&gt;
</I>&gt;<i> &lt;/listener&gt;
</I>&gt;<i> &lt;servlet&gt;
</I>&gt;<i> &lt;servlet-name&gt;action&lt;/servlet-name&gt;
</I>&gt;<i> &lt;servlet-class&gt;org.apache.struts.action.ActionServlet&lt;/servlet-class&gt;
</I>&gt;<i> &lt;init-param&gt;
</I>&gt;<i> &lt;param-name&gt;config&lt;/param-name&gt;
</I>&gt;<i> &lt;param-value&gt;/WEB-INF/struts-config.xml&lt;/param-value&gt;
</I>&gt;<i> &lt;/init-param&gt;
</I>&gt;<i> &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;
</I>&gt;<i> &lt;/servlet&gt;
</I>&gt;<i> &lt;!-- Action Servlet Mapping --&gt;
</I>&gt;<i> &lt;servlet-mapping&gt;
</I>&gt;<i> &lt;servlet-name&gt;action&lt;/servlet-name&gt;
</I>&gt;<i> &lt;url-pattern&gt;*.do&lt;/url-pattern&gt;
</I>&gt;<i> &lt;/servlet-mapping&gt;
</I>&gt;<i> &lt;servlet&gt;
</I>&gt;<i> &lt;servlet-name&gt;AddressBook&lt;/servlet-name&gt;
</I>&gt;<i> &lt;servlet-class&gt;com.eXtropia.app.servlet.ExtropiaServlet&lt;/servlet-class&gt;
</I>&gt;<i> &lt;init-param&gt;
</I>&gt;<i> &lt;param-name&gt;ConfigFile&lt;/param-name&gt;
</I>&gt;<i> &lt;param-value&gt;/WEB-INF/addressbook.xml&lt;/param-value&gt;
</I>&gt;<i> &lt;/init-param&gt;
</I>&gt;<i> &lt;init-param&gt;
</I>&gt;<i> &lt;param-name&gt;Reloadable&lt;/param-name&gt;
</I>&gt;<i> &lt;param-value&gt;true&lt;/param-value&gt;
</I>&gt;<i> &lt;/init-param&gt;
</I>&gt;<i> &lt;display-name&gt;AddressBook&lt;/display-name&gt;
</I>&gt;<i> &lt;/servlet&gt;
</I>&gt;<i> &lt;servlet-mapping&gt;
</I>&gt;<i> &lt;servlet-name&gt;AddressBook&lt;/servlet-name&gt;
</I>&gt;<i> &lt;url-pattern&gt;AddressBook&lt;/url-pattern&gt;
</I>&gt;<i> &lt;/servlet-mapping&gt;
</I>&gt;<i> &lt;servlet&gt;
</I>&gt;<i> &lt;servlet-name&gt;JavaScriptServlet&lt;/servlet-name&gt;
</I>&gt;<i> &lt;servlet-class&gt;org.owasp.csrfguard.servlet.JavaScriptServlet&lt;/servlet-class&gt;
</I>&gt;<i> &lt;init-param&gt;
</I>&gt;<i> &lt;param-name&gt;source-file&lt;/param-name&gt;
</I>&gt;<i> &lt;param-value&gt;WEB-INF/Owasp.CsrfGuard.js&lt;/param-value&gt;
</I>&gt;<i> &lt;/init-param&gt;
</I>&gt;<i> &lt;init-param&gt;
</I>&gt;<i> &lt;param-name&gt;inject-into-forms&lt;/param-name&gt;
</I>&gt;<i> &lt;param-value&gt;true&lt;/param-value&gt;
</I>&gt;<i> &lt;/init-param&gt;
</I>&gt;<i> &lt;init-param&gt;
</I>&gt;<i> &lt;param-name&gt;inject-into-attributes&lt;/param-name&gt;
</I>&gt;<i> &lt;param-value&gt;true&lt;/param-value&gt;
</I>&gt;<i> &lt;/init-param&gt;
</I>&gt;<i> &lt;init-param&gt;
</I>&gt;<i> &lt;param-name&gt;domain-strict&lt;/param-name&gt;
</I>&gt;<i> &lt;param-value&gt;false&lt;/param-value&gt;
</I>&gt;<i> &lt;/init-param&gt;
</I>&gt;<i> &lt;init-param&gt;
</I>&gt;<i> &lt;param-name&gt;referer-pattern&lt;/param-name&gt;
</I>&gt;<i> &lt;param-value&gt;.*localhost.*&lt;/param-value&gt;
</I>&gt;<i> &lt;/init-param&gt;
</I>&gt;<i> &lt;/servlet&gt;
</I>&gt;<i>
</I>&gt;<i> &lt;servlet-mapping&gt;
</I>&gt;<i> &lt;servlet-name&gt;JavaScriptServlet&lt;/servlet-name&gt;
</I>&gt;<i> &lt;url-pattern&gt;/JavaScriptServlet&lt;/url-pattern&gt;
</I>&gt;<i> &lt;/servlet-mapping&gt;
</I>&gt;<i> &lt;!-- The Welcome File List --&gt;
</I>&gt;<i> &lt;welcome-file-list&gt;
</I>&gt;<i> &lt;welcome-file&gt;index.jsp&lt;/welcome-file&gt;
</I>&gt;<i> &lt;/welcome-file-list&gt;
</I>&gt;<i> &lt;!-- Application Tag Library Descriptor --&gt;
</I>&gt;<i> &lt;taglib&gt;
</I>&gt;<i> &lt;taglib-uri&gt;/WEB-INF/app.tld&lt;/taglib-uri&gt;
</I>&gt;<i> &lt;taglib-location&gt;/WEB-INF/app.tld&lt;/taglib-location&gt;
</I>&gt;<i> &lt;/taglib&gt;
</I>&gt;<i> &lt;!-- Struts Tag Library Descriptors --&gt;
</I>&gt;<i> &lt;taglib&gt;
</I>&gt;<i> &lt;taglib-uri&gt;/WEB-INF/struts-bean.tld&lt;/taglib-uri&gt;
</I>&gt;<i> &lt;taglib-location&gt;/WEB-INF/struts-bean.tld&lt;/taglib-location&gt;
</I>&gt;<i> &lt;/taglib&gt;
</I>&gt;<i> &lt;taglib&gt;
</I>&gt;<i> &lt;taglib-uri&gt;/WEB-INF/struts-html.tld&lt;/taglib-uri&gt;
</I>&gt;<i> &lt;taglib-location&gt;/WEB-INF/struts-html.tld&lt;/taglib-location&gt;
</I>&gt;<i> &lt;/taglib&gt;
</I>&gt;<i> &lt;taglib&gt;
</I>&gt;<i> &lt;taglib-uri&gt;/WEB-INF/struts-logic.tld&lt;/taglib-uri&gt;
</I>&gt;<i> &lt;taglib-location&gt;/WEB-INF/struts-logic.tld&lt;/taglib-location&gt;
</I>&gt;<i> &lt;/taglib&gt;
</I>&gt;<i>
</I>&gt;<i> &lt;taglib&gt;
</I>&gt;<i> &lt;taglib-uri&gt;/view-taglib&lt;/taglib-uri&gt;
</I>&gt;<i> &lt;taglib-location&gt;/WEB-INF/view.tld&lt;/taglib-location&gt;
</I>&gt;<i> &lt;/taglib&gt;
</I>&gt;<i> &lt;taglib&gt;
</I>&gt;<i> &lt;taglib-uri&gt;/webdb-taglib&lt;/taglib-uri&gt;
</I>&gt;<i> &lt;taglib-location&gt;/WEB-INF/webdb.tld&lt;/taglib-location&gt;
</I>&gt;<i> &lt;/taglib&gt;
</I>&gt;<i> &lt;taglib&gt;
</I>&gt;<i> &lt;taglib-uri&gt;/auth-taglib&lt;/taglib-uri&gt;
</I>&gt;<i> &lt;taglib-location&gt;/WEB-INF/auth.tld&lt;/taglib-location&gt;
</I>&gt;<i> &lt;/taglib&gt;
</I>&gt;<i>
</I>&gt;<i> &lt;session-config&gt;
</I>&gt;<i> &lt;session-timeout&gt;30&lt;/session-timeout&gt;
</I>&gt;<i> &lt;/session-config&gt;
</I>&gt;<i> &lt;error-page&gt;
</I>&gt;<i> &lt;error-code&gt;404&lt;/error-code&gt;
</I>&gt;<i> &lt;location&gt;error.jsp&lt;/location&gt;
</I>&gt;<i> &lt;/error-page&gt;
</I>&gt;<i> &lt;error-page&gt;
</I>&gt;<i> &lt;error-code&gt;500&lt;/error-code&gt;
</I>&gt;<i> &lt;location&gt;error.jsp&lt;/location&gt;
</I>&gt;<i> &lt;/error-page&gt;
</I>&gt;<i> &lt;/web-app&gt;
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Any ideas?
</I>&gt;<i>
</I>&gt;<i> Thanks in advance.
</I>&gt;<i>
</I>&gt;<i> Steve
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Owasp-csrfguard mailing list
</I>&gt;<i> <A HREF="https://lists.owasp.org/mailman/listinfo/owasp-csrfguard">Owasp-csrfguard at lists.owasp.org</A>
</I>&gt;<i> <A HREF="https://lists.owasp.org/mailman/listinfo/owasp-csrfguard">https://lists.owasp.org/mailman/listinfo/owasp-csrfguard</A>
</I>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="https://lists.owasp.org/pipermail/owasp-csrfguard/attachments/20110826/3f1aadb7/attachment-0001.html">https://lists.owasp.org/pipermail/owasp-csrfguard/attachments/20110826/3f1aadb7/attachment-0001.html</A> 
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000079.html">[Owasp-csrfguard] First implementation of csrfguard getting errors.
</A></li>
	<LI>Next message: <A HREF="000082.html">[Owasp-csrfguard] First implementation of csrfguard getting	errors.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#80">[ date ]</a>
              <a href="thread.html#80">[ thread ]</a>
              <a href="subject.html#80">[ subject ]</a>
              <a href="author.html#80">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.owasp.org/mailman/listinfo/owasp-csrfguard">More information about the Owasp-csrfguard
mailing list</a><br>
</body></html>
