<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Owasp-csrfguard] Javascript queries.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:owasp-csrfguard%40lists.owasp.org?Subject=Re%3A%20%5BOwasp-csrfguard%5D%20Javascript%20queries.&In-Reply-To=%3CCAAnxdquRbmi8kV_xEQP%2BaU%2BEGreQ5ee7N%2BY35Jwb9XhVvd8few%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000147.html">
   
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Owasp-csrfguard] Javascript queries.</H1>
    <B>Luke Biddell</B> 
    <A HREF="mailto:owasp-csrfguard%40lists.owasp.org?Subject=Re%3A%20%5BOwasp-csrfguard%5D%20Javascript%20queries.&In-Reply-To=%3CCAAnxdquRbmi8kV_xEQP%2BaU%2BEGreQ5ee7N%2BY35Jwb9XhVvd8few%40mail.gmail.com%3E"
       TITLE="[Owasp-csrfguard] Javascript queries.">luke.biddell at gmail.com
       </A><BR>
    <I>Tue Jun 26 15:34:43 UTC 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="000147.html">[Owasp-csrfguard] , error:required token is missing error:required token is missing from the request
</A></li>
        
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#148">[ date ]</a>
              <a href="thread.html#148">[ thread ]</a>
              <a href="subject.html#148">[ subject ]</a>
              <a href="author.html#148">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>One of the things I've noticed with the javascript DOM manipulation is that
it rewrites link and script src attributes in the head block. But they've
already potentially loaded, so we get things like css and javascript files
loaded again. This leads to a rather nasty FoUC (Flash of Unstyled
Content).

I've tweaked the csrf js to only rewrite forms, src and hrefs within the
document body as an interim measure. Obviously this introduces holes. Even
with this interim measure, images etc within the document body can
potentially be reloaded due to the rewrite.

I particularly like the js approach though as we're going to provide CSRF
protection to apps sitting behind ours. They can just include the csfr js
in their pages and off they go.

So what's the best way forward with this? Is my interim fix appropriate?
And I better hard-rendering the tokens in the page?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.owasp.org/pipermail/owasp-csrfguard/attachments/20120626/bb31c185/attachment.html">http://lists.owasp.org/pipermail/owasp-csrfguard/attachments/20120626/bb31c185/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000147.html">[Owasp-csrfguard] , error:required token is missing error:required token is missing from the request
</A></li>
	
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#148">[ date ]</a>
              <a href="thread.html#148">[ thread ]</a>
              <a href="subject.html#148">[ subject ]</a>
              <a href="author.html#148">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.owasp.org/mailman/listinfo/owasp-csrfguard">More information about the Owasp-csrfguard
mailing list</a><br>
</body></html>
