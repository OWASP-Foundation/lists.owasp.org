<tt>
On&nbsp;14&nbsp;July&nbsp;2011&nbsp;19:27,&nbsp;Patrick&nbsp;Radtke&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:pradtke@stanford.edu&quot;&nbsp;target=&quot;_blank&quot;&gt;pradtke@stanford.edu&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
<br>
<br>
<br>
&lt;div&gt;<br>
&amp;gt;&nbsp;If&nbsp;I&nbsp;read&nbsp;the&nbsp;source&nbsp;code&nbsp;correct,&nbsp;the&nbsp;NewTokenLandingPage&nbsp;is&nbsp;written&lt;br&gt;<br>
&amp;gt;&nbsp;to&nbsp;the&nbsp;response&nbsp;if&nbsp;session.isNew(),&nbsp;even&nbsp;if&nbsp;you&nbsp;visit&nbsp;an&nbsp;unprotected&lt;br&gt;<br>
&amp;gt;&nbsp;page.&lt;br&gt;<br>
&lt;/div&gt;I&nbsp;thought&nbsp;the&nbsp;CsrfGuardFilter&nbsp;would&nbsp;only&nbsp;get&nbsp;invoked&nbsp;if&nbsp;the&nbsp;page&nbsp;matched&lt;br&gt;<br>
the&nbsp;URLs&nbsp;you&nbsp;defined&nbsp;as&nbsp;protected&nbsp;in&nbsp;the&nbsp;web.xml&lt;br&gt;<br>
&lt;br&gt;<br>
&amp;lt;filter-mapping&amp;gt;&lt;br&gt;<br>
&amp;lt;filter-name&amp;gt;CSRFGuard&amp;lt;/filter-name&amp;gt;&lt;br&gt;<br>
&amp;lt;url-pattern&amp;gt;/manage/mf/*&amp;lt;/url-pattern&amp;gt;&lt;br&gt;<br>
&amp;lt;/filter-mapping&amp;gt;&lt;br&gt;&lt;br&gt;&lt;/blockquote&gt;I&nbsp;am&nbsp;sorry&nbsp;I&nbsp;was&nbsp;not&nbsp;<br>
clear&nbsp;on&nbsp;my&nbsp;setup.&nbsp;To&nbsp;apply&nbsp;the&nbsp;principle&nbsp;of&nbsp;white-listing,&nbsp;I&nbsp;apply&nbsp;the&nbsp;<br>
filter&nbsp;on&nbsp;all&nbsp;pages&nbsp;(except&nbsp;static&nbsp;resources),&nbsp;and&nbsp;define&nbsp;all&nbsp;my&nbsp;<br>
exceptions&nbsp;(entry-points)&nbsp;in&nbsp;the&nbsp;properties&nbsp;file&nbsp;for&nbsp;CSRFGuard&nbsp;(as&nbsp;<br>
uprotected&nbsp;pages).&nbsp;&lt;br&gt;<br>
<br>
&lt;br&gt;I&nbsp;see&nbsp;that&nbsp;I&nbsp;could&nbsp;solve&nbsp;my&nbsp;problem&nbsp;by&nbsp;not&nbsp;applying&nbsp;the&nbsp;filter&nbsp;to&nbsp;<br>
pages&nbsp;I&nbsp;do&nbsp;not&nbsp;want&nbsp;to&nbsp;be&nbsp;protected,&nbsp;but&nbsp;in&nbsp;my&nbsp;case&nbsp;the&nbsp;URLs&nbsp;are&nbsp;<br>
accessed&nbsp;from&nbsp;other&nbsp;applications&nbsp;(so&nbsp;I&nbsp;can&nbsp;not&nbsp;change&nbsp;them),&nbsp;and&nbsp;I&nbsp;do&nbsp;<br>
not&nbsp;want&nbsp;to&nbsp;introduce&nbsp;a&nbsp;URL&nbsp;rewrite&nbsp;filter&nbsp;only&nbsp;for&nbsp;this.&lt;br&gt;<br>
<br>
&lt;br&gt;Regards,&lt;br&gt;&lt;br&gt;Anders&nbsp;Båtstrand&nbsp;&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;2011/7/15&nbsp;Anders&nbsp;Båtstrand&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:anderius@gmail.com&quot;&gt;anderius@gmail.com&lt;/a&gt;&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex;&quot;&gt;<br>
<br>
&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;div&nbsp;class=&quot;im&quot;&gt;On&nbsp;14&nbsp;July&nbsp;2011&nbsp;19:27,&nbsp;Patrick&nbsp;Radtke&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:pradtke@stanford.edu&quot;&nbsp;target=&quot;_blank&quot;&gt;pradtke@stanford.edu&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
<br>
<br>
&lt;div&gt;<br>
&amp;gt;&nbsp;If&nbsp;I&nbsp;read&nbsp;the&nbsp;source&nbsp;code&nbsp;correct,&nbsp;the&nbsp;NewTokenLandingPage&nbsp;is&nbsp;written&lt;br&gt;<br>
&amp;gt;&nbsp;to&nbsp;the&nbsp;response&nbsp;if&nbsp;session.isNew(),&nbsp;even&nbsp;if&nbsp;you&nbsp;visit&nbsp;an&nbsp;unprotected&lt;br&gt;<br>
&amp;gt;&nbsp;page.&lt;br&gt;<br>
&lt;/div&gt;I&nbsp;thought&nbsp;the&nbsp;CsrfGuardFilter&nbsp;would&nbsp;only&nbsp;get&nbsp;invoked&nbsp;if&nbsp;the&nbsp;page&nbsp;matched&lt;br&gt;<br>
the&nbsp;URLs&nbsp;you&nbsp;defined&nbsp;as&nbsp;protected&nbsp;in&nbsp;the&nbsp;web.xml&lt;br&gt;<br>
&lt;br&gt;<br>
&amp;lt;filter-mapping&amp;gt;&lt;br&gt;<br>
&amp;lt;filter-name&amp;gt;CSRFGuard&amp;lt;/filter-name&amp;gt;&lt;br&gt;<br>
&amp;lt;url-pattern&amp;gt;/manage/mf/*&amp;lt;/url-pattern&amp;gt;&lt;br&gt;<br>
&amp;lt;/filter-mapping&amp;gt;&lt;br&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;am&nbsp;sorry&nbsp;I&nbsp;was&nbsp;not&nbsp;clear&nbsp;on&nbsp;my&nbsp;setup.&nbsp;To&nbsp;apply&nbsp;the&nbsp;principle&nbsp;of&nbsp;white-listing,&nbsp;I&nbsp;apply&nbsp;the&nbsp;filter&nbsp;on&nbsp;all&nbsp;pages&nbsp;(except&nbsp;static&nbsp;resources),&nbsp;and&nbsp;define&nbsp;all&nbsp;my&nbsp;exceptions&nbsp;(entry-points)&nbsp;in&nbsp;the&nbsp;properties&nbsp;file&nbsp;for&nbsp;CSRFGuard&nbsp;(as&nbsp;uprotected&nbsp;pages).&nbsp;&lt;br&gt;<br>
<br>
<br>
&lt;br&gt;I&nbsp;see&nbsp;that&nbsp;I&nbsp;could&nbsp;solve&nbsp;my&nbsp;problem&nbsp;by&nbsp;not&nbsp;applying&nbsp;the&nbsp;filter&nbsp;to&nbsp;pages&nbsp;I&nbsp;do&nbsp;not&nbsp;want&nbsp;to&nbsp;be&nbsp;protected,&nbsp;but&nbsp;in&nbsp;my&nbsp;case&nbsp;the&nbsp;URLs&nbsp;are&nbsp;accessed&nbsp;from&nbsp;other&nbsp;applications&nbsp;(so&nbsp;I&nbsp;can&nbsp;not&nbsp;change&nbsp;them),&nbsp;and&nbsp;I&nbsp;do&nbsp;not&nbsp;want&nbsp;to&nbsp;introduce&nbsp;a&nbsp;URL&nbsp;rewrite&nbsp;filter&nbsp;only&nbsp;for&nbsp;this.&lt;br&gt;<br>
<br>
<br>
&lt;br&gt;Regards,&lt;br&gt;&lt;br&gt;Anders&nbsp;Båtstrand&nbsp;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;<br>

</tt>
