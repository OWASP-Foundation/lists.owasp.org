<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Hi,&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;as&nbsp;I&nbsp;understand&nbsp;CSRF&nbsp;Guard&nbsp;you&nbsp;have&nbsp;to&nbsp;define&nbsp;the&nbsp;pages&nbsp;you&nbsp;use&nbsp;as&nbsp;entry-points,&nbsp;like&nbsp;the&nbsp;login&nbsp;page.&nbsp;So&nbsp;Guard&nbsp;is&nbsp;excluding&nbsp;its&nbsp;validation&nbsp;regarding&nbsp;this&nbsp;pages.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;<br>
The&nbsp;aplication&nbsp;of&nbsp;my&nbsp;company&nbsp;has&nbsp;a&nbsp;diferent&nbsp;arquitecture&nbsp;which&nbsp;makes&nbsp;it&nbsp;dificult&nbsp;to&nbsp;use&nbsp;CSRF-Guard.&nbsp;Hopefully&nbsp;somebody&nbsp;can&nbsp;help:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;We&nbsp;are&nbsp;using&nbsp;a&nbsp;php&nbsp;app&nbsp;as&nbsp;a&nbsp;main&nbsp;frame&nbsp;which&nbsp;includes&nbsp;JSF&nbsp;as&nbsp;iFrames.&nbsp;The&nbsp;requests&nbsp;to&nbsp;the&nbsp;JSF&nbsp;are&nbsp;handled&nbsp;by&nbsp;rewrite-rules&nbsp;in&nbsp;the&nbsp;Apache&nbsp;which&nbsp;points&nbsp;to&nbsp;a&nbsp;proxy.&nbsp;The&nbsp;proxy&nbsp;finally&nbsp;generates&nbsp;the&nbsp;requests&nbsp;pointing&nbsp;to&nbsp;a&nbsp;JBoss.&nbsp;The&nbsp;ProxyPassReverse-Module&nbsp;in&nbsp;the&nbsp;apache&nbsp;handles&nbsp;the&nbsp;responses&nbsp;from&nbsp;the&nbsp;JBoss.&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;problem&nbsp;here&nbsp;is:&nbsp;for&nbsp;PHP&nbsp;we&nbsp;use&nbsp;a&nbsp;diferent&nbsp;mecanism&nbsp;to&nbsp;secure&nbsp;the&nbsp;requests.&nbsp;The&nbsp;Login-Sequence&nbsp;as&nbsp;well&nbsp;is&nbsp;handled&nbsp;by&nbsp;PHP.&nbsp;At&nbsp;the&nbsp;point&nbsp;the&nbsp;users&nbsp;opens&nbsp;the&nbsp;modules&nbsp;which&nbsp;are&nbsp;written&nbsp;in&nbsp;JSF&nbsp;pointing&nbsp;to&nbsp;the&nbsp;JBoss&nbsp;the&nbsp;authentication&nbsp;already&nbsp;has&nbsp;happened.&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;CSRF&nbsp;Guard&nbsp;in&nbsp;our&nbsp;case&nbsp;is&nbsp;sensing&nbsp;attacks&nbsp;of&nbsp;each&nbsp;access&nbsp;the&nbsp;JSF-modules,&nbsp;because&nbsp;for&nbsp;CSRF&nbsp;Guard&nbsp;it&nbsp;is&nbsp;the&nbsp;first&nbsp;access.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Of&nbsp;course&nbsp;I&nbsp;dont&nbsp;want&nbsp;to&nbsp;exclude&nbsp;all&nbsp;the&nbsp;modules&nbsp;from&nbsp;the&nbsp;Guard!&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;So&nbsp;my&nbsp;question&nbsp;is:&nbsp;is&nbsp;there&nbsp;any&nbsp;easy&nbsp;way&nbsp;to&nbsp;&#39;tell&#39;&nbsp;CSRF&nbsp;Gaurd&nbsp;that&nbsp;proxy-request&nbsp;are&nbsp;allowed?&nbsp;Because&nbsp;in&nbsp;this&nbsp;case&nbsp;we&nbsp;already&nbsp;have&nbsp;an&nbsp;authenticated&nbsp;user...&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;At&nbsp;the&nbsp;moment&nbsp;we&nbsp;are&nbsp;working&nbsp;on&nbsp;WebService-based&nbsp;solution:&nbsp;we&nbsp;implement&nbsp;a&nbsp;WS&nbsp;in&nbsp;JBoss&nbsp;which&nbsp;returns&nbsp;an&nbsp;CSRF-ID.&nbsp;This&nbsp;service&nbsp;we&nbsp;call&nbsp;from&nbsp;the&nbsp;proxy&nbsp;module&nbsp;in&nbsp;PHP&nbsp;and&nbsp;we&nbsp;add&nbsp;teh&nbsp;CSRF-ID&nbsp;to&nbsp;the&nbsp;request-header.&nbsp;CSRF&nbsp;Guard&nbsp;hopefully&nbsp;will&nbsp;let&nbsp;us&nbsp;pass.&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;&#39;but&#39;&nbsp;is&nbsp;that&nbsp;I&nbsp;dont&nbsp;want&nbsp;to&nbsp;deploy&nbsp;a&nbsp;WS&nbsp;which&nbsp;is&nbsp;returing&nbsp;tokens,&nbsp;this&nbsp;is&nbsp;an&nbsp;open&nbsp;door&nbsp;for&nbsp;hackers,&nbsp;too.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Hope&nbsp;you&nbsp;can&nbsp;help&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;PD:&nbsp;this&nbsp;is&nbsp;related? &lt;a&nbsp;href=&quot;http://stackoverflow.com/questions/22483397/csrfguard-behind-a-reverse-proxy&quot;&gt;http://stackoverflow.com/questions/22483397/csrfguard-behind-a-reverse-proxy&lt;/a&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Best,&lt;/div&gt;&lt;div&gt;Johannes&lt;/div&gt;--&nbsp;&lt;br&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;br&gt;&lt;/div&gt;<br>
&lt;/div&gt;&lt;/div&gt;<br>
<br>
&lt;br&gt;<br>
&lt;font&nbsp;face=&quot;Arial&quot;&nbsp;size=&quot;2&quot;&gt;&lt;span&nbsp;style=&quot;color:rgb(34,34,34);background-color:rgb(255,255,255)&quot;&gt;Health&nbsp;Digital&nbsp;Systems&nbsp;S.A.P.I.&nbsp;de&nbsp;C.V.,&nbsp;con&nbsp;domicilio&nbsp;en&nbsp;Insurgentes&nbsp;Sur&nbsp;No.&nbsp;617&nbsp;Int&nbsp;3,&nbsp;Col.&nbsp;Napoles,&nbsp;Delegación&nbsp;Benito&nbsp;Juarez,&nbsp;C.P.&nbsp;03810,&nbsp;Mexico,&nbsp;D.F.,&nbsp;Tel.&nbsp;(55)&nbsp;3690&nbsp;0430,&nbsp;es&nbsp;responsable&nbsp;de&nbsp;recabar&nbsp;los&nbsp;datos&nbsp;personales&nbsp;con&nbsp;la&nbsp;finalidad&nbsp;de&nbsp;informar,&nbsp;contratar,&nbsp;prospectar&nbsp;y&nbsp;promocionar&nbsp;los&nbsp;productos&nbsp;y/o&nbsp;servicios,&nbsp;con&nbsp;base&nbsp;al&nbsp;cumplimiento&nbsp;de&nbsp;la&nbsp;LFPDPPP.&nbsp;Para&nbsp;mayor&nbsp;informacion&nbsp;puede&nbsp;consultar&nbsp;el&nbsp;Aviso&nbsp;de&nbsp;Privacidad&nbsp;completo&nbsp;en &lt;/span&gt;&lt;a&nbsp;href=&quot;http://avisodeprivacidad.saludhds.com.mx/&quot;&nbsp;style=&quot;color:rgb(17,85,204);background-color:rgb(255,255,255)&quot;&nbsp;target=&quot;_blank&quot;&gt;http://avisodeprivacidad.&lt;WBR&gt;saludhds.com.mx&lt;/a&gt;&lt;/font&gt;
</tt>
