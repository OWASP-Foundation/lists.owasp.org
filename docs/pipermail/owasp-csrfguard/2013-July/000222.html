<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Owasp-csrfguard] Owasp-csrfguard Digest, Vol 35, Issue 11
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:owasp-csrfguard%40lists.owasp.org?Subject=Re%3A%20%5BOwasp-csrfguard%5D%20Owasp-csrfguard%20Digest%2C%20Vol%2035%2C%20Issue%2011&In-Reply-To=%3CCAFQ4Oy3%2BHKSdDJ2y09jb4y_3jR4FgbR%2B0TDbSPOdPJ8JmOT2uQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000221.html">
   
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Owasp-csrfguard] Owasp-csrfguard Digest, Vol 35, Issue 11</H1>
    <B>Manish Java</B> 
    <A HREF="mailto:owasp-csrfguard%40lists.owasp.org?Subject=Re%3A%20%5BOwasp-csrfguard%5D%20Owasp-csrfguard%20Digest%2C%20Vol%2035%2C%20Issue%2011&In-Reply-To=%3CCAFQ4Oy3%2BHKSdDJ2y09jb4y_3jR4FgbR%2B0TDbSPOdPJ8JmOT2uQ%40mail.gmail.com%3E"
       TITLE="[Owasp-csrfguard] Owasp-csrfguard Digest, Vol 35, Issue 11">manish.in.java at gmail.com
       </A><BR>
    <I>Wed Jul 24 12:44:43 UTC 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="000221.html">[Owasp-csrfguard] CSRFGuard problem
</A></li>
        
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#222">[ date ]</a>
              <a href="thread.html#222">[ thread ]</a>
              <a href="subject.html#222">[ subject ]</a>
              <a href="author.html#222">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>This seems symptomatic of the error page being a protected resource as
well, which will cause CSRFGuard to go into an infinite loop.

I have created a Seam version of the CSRFGuard test application.  You can
try it out from <A HREF="https://github.com/manish-in-java/OWASP-CSRFGuard.">https://github.com/manish-in-java/OWASP-CSRFGuard.</A>  If you
have Java 6.0+ and Maven 3.0.4+ on your machine, you can simply download
the Seam sample project and run it as mvn clean package tomcat7:run.

I did not find any loops in the sample application.  You may want to
compare the configuration file in the sample application with yours to see
if you can spot any quick differences.


On Wed, Jul 24, 2013 at 5:30 PM, &lt;<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-csrfguard">owasp-csrfguard-request at lists.owasp.org</A>&gt;wrote:

&gt;<i> Send Owasp-csrfguard mailing list submissions to
</I>&gt;<i>         <A HREF="https://lists.owasp.org/mailman/listinfo/owasp-csrfguard">owasp-csrfguard at lists.owasp.org</A>
</I>&gt;<i>
</I>&gt;<i> To subscribe or unsubscribe via the World Wide Web, visit
</I>&gt;<i>         <A HREF="https://lists.owasp.org/mailman/listinfo/owasp-csrfguard">https://lists.owasp.org/mailman/listinfo/owasp-csrfguard</A>
</I>&gt;<i> or, via email, send a message with subject or body 'help' to
</I>&gt;<i>         <A HREF="https://lists.owasp.org/mailman/listinfo/owasp-csrfguard">owasp-csrfguard-request at lists.owasp.org</A>
</I>&gt;<i>
</I>&gt;<i> You can reach the person managing the list at
</I>&gt;<i>         <A HREF="https://lists.owasp.org/mailman/listinfo/owasp-csrfguard">owasp-csrfguard-owner at lists.owasp.org</A>
</I>&gt;<i>
</I>&gt;<i> When replying, please edit your Subject line so it is more specific
</I>&gt;<i> than &quot;Re: Contents of Owasp-csrfguard digest...&quot;
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Today's Topics:
</I>&gt;<i>
</I>&gt;<i>    1. Re: CSRFGuard problem (<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-csrfguard">ray at allthisisthat.com</A>)
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> ----------------------------------------------------------------------
</I>&gt;<i>
</I>&gt;<i> Message: 1
</I>&gt;<i> Date: Tue, 23 Jul 2013 16:43:58 -0700
</I>&gt;<i> From: <A HREF="https://lists.owasp.org/mailman/listinfo/owasp-csrfguard">ray at allthisisthat.com</A>
</I>&gt;<i> To: &quot;Barber, Thomas X&quot; &lt;<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-csrfguard">thomas.x.barber at jpmorgan.com</A>&gt;
</I>&gt;<i> Cc: &quot;<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-csrfguard">owasp-csrfguard at lists.owasp.org</A>&quot;
</I>&gt;<i>         &lt;<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-csrfguard">owasp-csrfguard at lists.owasp.org</A>&gt;
</I>&gt;<i> Subject: Re: [Owasp-csrfguard] CSRFGuard problem
</I>&gt;<i> Message-ID:
</I>&gt;<i>         &lt;<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-csrfguard">b63f2a3abd51952673bb3104de65303e.squirrel at mail.allthisisthat.com</A>&gt;
</I>&gt;<i> Content-Type: text/plain; charset=&quot;utf-8&quot;
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Thanks, Tom.? The only solution I could get to work was to make the page a
</I>&gt;<i> static html page instead of a jsf facelet.? There was just a lot of
</I>&gt;<i> conflict between the CSRFGuard redirect mechanism and the JSF (Seam)
</I>&gt;<i> redirect mechanism.? I also had to specify the error page as not
</I>&gt;<i> CSRFGuard protected (as you suggested), and had to specify it as
</I>&gt;<i> &quot;/myapp/CSRFError.html&quot;, which puts the context root into the configuration
</I>&gt;<i> file, which is undesireable, of course.? Eventually, this will be replaced
</I>&gt;<i> with a token for replacement during the build process.
</I>&gt;<i> Thanks
</I>&gt;<i> for your help,
</I>&gt;<i> Ray Clough
</I>&gt;<i> ?
</I>&gt;<i>
</I>&gt;<i> ---------------------------- Original Message ----------------------------
</I>&gt;<i>
</I>&gt;<i> Subject: RE: [Owasp-csrfguard] CSRFGuard problem
</I>&gt;<i>
</I>&gt;<i> From: &quot;Barber, Thomas X&quot;
</I>&gt;<i>
</I>&gt;<i> Date: Tue, July 23, 2013 1:29 am
</I>&gt;<i>
</I>&gt;<i> To: &quot;<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-csrfguard">ray at allthisisthat.com</A>&quot;
</I>&gt;<i>
</I>&gt;<i> &quot;<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-csrfguard">owasp-csrfguard at lists.owasp.org</A>&quot;
</I>&gt;<i>
</I>&gt;<i> --------------------------------------------------------------------------
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> &lt;style type=&quot;text/css&quot;&gt;
</I>&gt;<i> -&gt;&lt;/style&gt;
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> ?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>                 I&rsquo;m not very familiar with the issue you are facing,
</I>&gt;<i> but is it possible that on an exception the seam error handling tries to
</I>&gt;<i> redirect to a page that isn&rsquo;t
</I>&gt;<i>
</I>&gt;<i>                 defined as being &ldquo;unprotected&rdquo; which would
</I>&gt;<i> cause CSRFGuard verification to fail constantly in a loop? If you are
</I>&gt;<i> redirecting to a page in seam can you try defining it as being
</I>&gt;<i> unprotected??Thanks?Tom?Tom Barber
</I>&gt;<i>                 | Application Developer
</I>&gt;<i>
</I>&gt;<i>                 GFS - Technology | Corporate &amp; Investment Bank (CIB) |
</I>&gt;<i>
</I>&gt;<i>                 J.P. Morgan,
</I>&gt;<i>
</I>&gt;<i>                 Chaseside - Hampshire Building, Floor 2, Bournemouth BH7
</I>&gt;<i> 7DA, United Kingdom | T:+44 (0)1202 320097 |?
</I>&gt;<i>
</I>&gt;<i>                 <A HREF="https://lists.owasp.org/mailman/listinfo/owasp-csrfguard">thomas.X.barber at jpmorgan.com</A>?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>                         From: <A HREF="https://lists.owasp.org/mailman/listinfo/owasp-csrfguard">owasp-csrfguard-bounces at lists.owasp.org</A>
</I>&gt;<i> [mailto:<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-csrfguard">owasp-csrfguard-bounces at lists.owasp.org</A>]
</I>&gt;<i>                         On Behalf Of <A HREF="https://lists.owasp.org/mailman/listinfo/owasp-csrfguard">ray at allthisisthat.com</A>
</I>&gt;<i>
</I>&gt;<i>                         Sent: 23 July 2013 00:52
</I>&gt;<i>
</I>&gt;<i>                         To: <A HREF="https://lists.owasp.org/mailman/listinfo/owasp-csrfguard">owasp-csrfguard at lists.owasp.org</A>
</I>&gt;<i>
</I>&gt;<i>                         Subject: [Owasp-csrfguard] CSRFGuard problem
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>                 ?
</I>&gt;<i> I have added CSRFGuard to an existing project which is based on JSF using
</I>&gt;<i> Seam 2.2.? My initial testing was very positive, until I started testing
</I>&gt;<i> use cases which generated exceptions.? What I am finding is that Seam (or
</I>&gt;<i> JSF) error handling is being
</I>&gt;<i> interfered
</I>&gt;<i>                 with by CSRFGuard.? As a result, I can get into a
</I>&gt;<i> situation where the app is frozen, and you can't even call up the app from
</I>&gt;<i> a new tab with the login url.? I have to restart the server in order to get
</I>&gt;<i> any pages to work.? The only thing I have found which allows
</I>&gt;<i>
</I>&gt;<i>                 me to proceed is to invalidate the session when any
</I>&gt;<i> potential CSRF attack is detected, by using the configuration option:
</I>&gt;<i> &quot;org.owasp.csrfguard.action.Invalidate=org.owasp.csrfguard.action.Invalidate&quot;.?
</I>&gt;<i> Of course, this is extremely unfriendly, as the user is
</I>&gt;<i>
</I>&gt;<i>                 suddenly returned to the login page with no warning or
</I>&gt;<i> message about why.
</I>&gt;<i> I tried to configure an error page to redirect to by using:
</I>&gt;<i> org.owasp.csrfguard.action.Redirect=org.owasp.csrfguard.action.Redirect
</I>&gt;<i>
</I>&gt;<i>                 org.owasp.csrfguard.action.Redirect.Page=/CSRFError.html
</I>&gt;<i> but even this doesn't work as the conflict between Seam and CSRFGuard
</I>&gt;<i> prevents the redirect from being processed.? Basically, Seam is stuck in
</I>&gt;<i> error mode, and there is nothing I have been able to do about it.
</I>&gt;<i> Does anyone
</I>&gt;<i> have any suggestions?? Has anyone else had a similar problem?? I'm sure
</I>&gt;<i> that there could equally well be conflicts with other frameworks besides
</I>&gt;<i> JSF with Seam. ? I am about to remove CSRFGuard and use Seam's s:token tag
</I>&gt;<i> to protect the POST requests
</I>&gt;<i>                 - which, of course, leaves GET unprotected.? I'd really
</I>&gt;<i> rather not get into that, if there is some clever configuration I could use
</I>&gt;<i> which would enable me to continue to use CSRFGuard.
</I>&gt;<i> Thanks in advance,
</I>&gt;<i> Ray Clough
</I>&gt;<i>
</I>&gt;<i>                 ?
</I>&gt;<i> ?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>         This email is confidential and subject to important disclaimers
</I>&gt;<i> and conditions including on offers for the purchase or sale of securities,
</I>&gt;<i> accuracy and completeness of information, viruses, confidentiality, legal
</I>&gt;<i> privilege, and legal entity
</I>&gt;<i> disclaimers, available at <A HREF="http://www.jpmorgan.com/pages/disclosures/email.">http://www.jpmorgan.com/pages/disclosures/email.</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> ?
</I>&gt;<i> -------------- next part --------------
</I>&gt;<i> An HTML attachment was scrubbed...
</I>&gt;<i> URL: &lt;
</I>&gt;<i> <A HREF="http://lists.owasp.org/pipermail/owasp-csrfguard/attachments/20130723/0ff355c6/attachment-0001.html">http://lists.owasp.org/pipermail/owasp-csrfguard/attachments/20130723/0ff355c6/attachment-0001.html</A>
</I>&gt;<i> &gt;
</I>&gt;<i>
</I>&gt;<i> ------------------------------
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Owasp-csrfguard mailing list
</I>&gt;<i> <A HREF="https://lists.owasp.org/mailman/listinfo/owasp-csrfguard">Owasp-csrfguard at lists.owasp.org</A>
</I>&gt;<i> <A HREF="https://lists.owasp.org/mailman/listinfo/owasp-csrfguard">https://lists.owasp.org/mailman/listinfo/owasp-csrfguard</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> End of Owasp-csrfguard Digest, Vol 35, Issue 11
</I>&gt;<i> ***********************************************
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.owasp.org/pipermail/owasp-csrfguard/attachments/20130724/af30f66b/attachment.html">http://lists.owasp.org/pipermail/owasp-csrfguard/attachments/20130724/af30f66b/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000221.html">[Owasp-csrfguard] CSRFGuard problem
</A></li>
	
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#222">[ date ]</a>
              <a href="thread.html#222">[ thread ]</a>
              <a href="subject.html#222">[ subject ]</a>
              <a href="author.html#222">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.owasp.org/mailman/listinfo/owasp-csrfguard">More information about the Owasp-csrfguard
mailing list</a><br>
</body></html>
