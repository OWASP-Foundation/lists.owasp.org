<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Owasp-csrfguard] How to use CSRFGuard3 with JSF
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:owasp-csrfguard%40lists.owasp.org?Subject=Re%3A%20%5BOwasp-csrfguard%5D%20How%20to%20use%20CSRFGuard3%20with%20JSF&In-Reply-To=%3C36D650AD2A0E594EBCC0A099214F3D1F290A5A35%40G5W2727.americas.hpqcorp.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000327.html">
   
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Owasp-csrfguard] How to use CSRFGuard3 with JSF</H1>
    <B>Smith, Patrick (Detroit, MI)</B> 
    <A HREF="mailto:owasp-csrfguard%40lists.owasp.org?Subject=Re%3A%20%5BOwasp-csrfguard%5D%20How%20to%20use%20CSRFGuard3%20with%20JSF&In-Reply-To=%3C36D650AD2A0E594EBCC0A099214F3D1F290A5A35%40G5W2727.americas.hpqcorp.net%3E"
       TITLE="[Owasp-csrfguard] How to use CSRFGuard3 with JSF">patrick.smith at hp.com
       </A><BR>
    <I>Thu Mar 19 13:32:58 UTC 2015</I>
    <P><UL>
        <LI>Previous message: <A HREF="000327.html">[Owasp-csrfguard] CSRFGuard treats non-ajax request as ajax request
</A></li>
        
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#328">[ date ]</a>
              <a href="thread.html#328">[ thread ]</a>
              <a href="subject.html#328">[ subject ]</a>
              <a href="author.html#328">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I'm looking for an example of how to include CSRFGuard into a JSF application,  in particular what you need to add to the XHTML files.  I've got the CSRFGuard JAR deployed, the web.xml configured and the CSRFGuard properties set.   The CSRFGuard is protecting our app at runtime.

I'm trying to do the final piece;  to have our web pages include and send the CSRF token.  Our app is not using Javascript and we're using Mojarra JSF in Java v1.6.

I've added this to our template.xhtml page:

&lt;html lang=&quot;en&quot; xml:lang=&quot;en&quot; xmlns=&quot;<A HREF="http://www.w3.org/1999/xhtml">http://www.w3.org/1999/xhtml</A>&quot;
      xmlns:h=&quot;<A HREF="http://java.sun.com/jsf/html">http://java.sun.com/jsf/html</A>&quot;
      xmlns:f=&quot;<A HREF="http://java.sun.com/jsf/core">http://java.sun.com/jsf/core</A>&quot;
      xmlns:ui=&quot;<A HREF="http://java.sun.com/jsf/facelets">http://java.sun.com/jsf/facelets</A>&quot;
      xmlns:mapir=&quot;<A HREF="http://java.sun.com/jsf/composite/control">http://java.sun.com/jsf/composite/control</A>&quot;
      xmlns:csrf=&quot;<A HREF="http://www.owasp.org/index.php/Category:OWASP_CSRFGuard_Project/Owasp.CsrfGuard.tld">http://www.owasp.org/index.php/Category:OWASP_CSRFGuard_Project/Owasp.CsrfGuard.tld</A>&quot;&gt;

It doesn't look right to me but that's the only example I could find on the internet.

I then added a &lt;csrf-form&gt; tag into the template.xhtml as a test as follows :

        &lt;csrf:form&gt;
                &lt;h:outputLabel value=&quot;Test label:&quot; /&gt;
                &lt;h:inputText value=&quot;default input&quot; /&gt;
                &lt;h:button&gt;Test Button&lt;/h:button&gt;
        &lt;/csrf:form&gt;

When looking at the web page source the csrf-form tag is not being converted into an HTML.  I see this in the web page source:

&lt;html lang=&quot;en&quot; xml:lang=&quot;en&quot; xmlns=&quot;<A HREF="http://www.w3.org/1999/xhtml">http://www.w3.org/1999/xhtml</A>&quot; xmlns:csrf=&quot;<A HREF="http://www.owasp.org/index.php/Category:OWASP_CSRFGuard_Project/Owasp.CsrfGuard.tld">http://www.owasp.org/index.php/Category:OWASP_CSRFGuard_Project/Owasp.CsrfGuard.tld</A>&quot;&gt;&lt;head&gt;
.
.
.
        &lt;csrf:form&gt;
                &lt;label&gt;
Test label:&lt;/label&gt;&lt;input type=&quot;text&quot; name=&quot;j_idt14&quot; value=&quot;default input&quot; /&gt;&lt;input type=&quot;button&quot; onclick=&quot;window.location.href='/mapir-public/common/dashboard.jsf'; return false;&quot; value=&quot;&quot; /&gt;Test Button
        &lt;/csrf:form&gt;

The csrf:form tag is not translated.

What am I doing wrong here?  Is there a complete simple example of how to use CSRFGuard3, JSF (Mojarra) without using Javascript?

Sincerely,


Pat
PATRICK L. SMITH
Technical Consulting
Application Development Services
HP Enterprise Services
Mobile +1 248.941.5451
PC Phone +1 404.648.7363
Email <A HREF="https://lists.owasp.org/mailman/listinfo/owasp-csrfguard">patrick.smith at hp.com</A>&lt;mailto:<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-csrfguard">patrick.smith at hp.com</A>&gt;

 [cid:<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-csrfguard">image006.gif at 01CB49D2.5164A020</A>] &lt;<A HREF="http://www.hp.com/">http://www.hp.com/</A>&gt;



-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.owasp.org/pipermail/owasp-csrfguard/attachments/20150319/7666417c/attachment.html">http://lists.owasp.org/pipermail/owasp-csrfguard/attachments/20150319/7666417c/attachment.html</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Picture (Device Independent Bitmap) 1.jpg
Type: image/jpeg
Size: 1145 bytes
Desc: Picture (Device Independent Bitmap) 1.jpg
URL: &lt;<A HREF="http://lists.owasp.org/pipermail/owasp-csrfguard/attachments/20150319/7666417c/attachment.jpg">http://lists.owasp.org/pipermail/owasp-csrfguard/attachments/20150319/7666417c/attachment.jpg</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000327.html">[Owasp-csrfguard] CSRFGuard treats non-ajax request as ajax request
</A></li>
	
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#328">[ date ]</a>
              <a href="thread.html#328">[ thread ]</a>
              <a href="subject.html#328">[ subject ]</a>
              <a href="author.html#328">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.owasp.org/mailman/listinfo/owasp-csrfguard">More information about the Owasp-csrfguard
mailing list</a><br>
</body></html>
