<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Owasp-germany] SOAP UI und Proxy und HTTPS
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:owasp-germany%40lists.owasp.org?Subject=Re%3A%20%5BOwasp-germany%5D%20SOAP%20UI%20und%20Proxy%20und%20HTTPS&In-Reply-To=%3C5107D217.2000705%40owasp.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000457.html">
   <LINK REL="Next"  HREF="000458.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Owasp-germany] SOAP UI und Proxy und HTTPS</H1>
    <B>Dirk Wetter</B> 
    <A HREF="mailto:owasp-germany%40lists.owasp.org?Subject=Re%3A%20%5BOwasp-germany%5D%20SOAP%20UI%20und%20Proxy%20und%20HTTPS&In-Reply-To=%3C5107D217.2000705%40owasp.org%3E"
       TITLE="[Owasp-germany] SOAP UI und Proxy und HTTPS">dirk.wetter at owasp.org
       </A><BR>
    <I>Tue Jan 29 13:43:51 UTC 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="000457.html">[Owasp-germany] SOAP UI und Proxy und HTTPS
</A></li>
        <LI>Next message: <A HREF="000458.html">[Owasp-germany] OWASP AppSecEU 2013: Call for P^2 open!
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#460">[ date ]</a>
              <a href="thread.html#460">[ thread ]</a>
              <a href="subject.html#460">[ subject ]</a>
              <a href="author.html#460">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Hallo Hans,

On 01/22/2013 09:38 AM, Schuell, Hans wrote:

&gt;<i> wir nutzen die folgende Kette unter Windows:
</I>&gt;<i> 
</I>&gt;<i> SOAP-UI =&gt; OWASP-ZAP-Proxy =&gt; HTTPS-basierte Web-Services
</I>&gt;<i> 
</I>&gt;<i> Das HTTPS l&#228;uft mit Client-Authentisierung (Smart-Cards). Der OWASP ZAP nutzt PKCS11.
</I>&gt;<i> 
</I>&gt;<i> Knackpunkt ist bei SOAP-UI die 4.5.1.1 (nighly build) zu nehmen. Mit der 4.5.1 geht es nicht. 
</I>
Danke f&#252;r den weiterhelfenden Tipp! Das kann ich best&#228;tigen.

Da ich ein paar private R&#252;ckfragen bekommen habe, hier gesammelt
ein kleines HOWTO (mit Burp):

* man nehme den o.a. nightly build
* man editiere das startup file (siehe Anhang, Windoze entsprechend)
* In GUI bleiben Proxy- und SSL-Einstellungen leer
* Man stelle im Proxy ein Zertifikat mit dem CN des Ziels aus
* Firefox o.&#228;. nehmen, den Proxy benutzen und dessen Zertifikat in
  den Browser importieren, dann exportieren (PEM-enkodiert,
  hier: PortSwigger.pem)
* keytool -import -file PortSwigger.pem -keystore PortSwigger.jks

YMMV, HTH ;-)

Viele Gr&#252;&#223;e,

Dirk


&gt;<i> 
</I>&gt;<i> Mit freundlichem Gru&#223;
</I>&gt;<i> 
</I>&gt;<i> DATEV eG
</I>&gt;<i> Hans Schuell
</I>&gt;<i> Kompetenz-Center Security | E86
</I>&gt;<i> 90329 N&#252;rnberg
</I>&gt;<i> Telefon +49(911)319-8229 | Telefax +49(911)14708225
</I>&gt;<i> E-Mail <A HREF="https://lists.owasp.org/mailman/listinfo/owasp-germany">hans.schuell at datev.de</A> | www.datev.de
</I>&gt;<i> F&#252;rther Str. 84 | N&#252;rnberg
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> -----Urspr&#252;ngliche Nachricht-----
</I>&gt;<i> Von:  &quot;Dirk Wetter&quot; &lt;<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-germany">dirk.wetter at owasp.org</A>&gt;
</I>&gt;<i> Gesendet: Mo 21.01.2013 18:03
</I>&gt;<i> An: &quot;OWASP Germany&quot; &lt;<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-germany">owasp-germany at lists.owasp.org</A>&gt;
</I>&gt;<i> Cc:  
</I>&gt;<i> Betreff: [Owasp-germany] SOAP UI und Proxy und HTTPS
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Hi all,
</I>&gt;<i> 
</I>&gt;<i> hat jemand das erfolgreich zum Fliegen gebracht, wohl gemerkt mit
</I>&gt;<i> einem Webservice, der nur via HTTPS erreichbar ist?
</I>&gt;<i> 
</I>&gt;<i> Unter Linux zumindest mit Version 4.5.1 und gehacktem all.js geht das
</I>&gt;<i> so ohne Weiteres gar nicht. Da steht eigentlich ja schon drin:
</I>&gt;<i> 
</I>&gt;<i> user_pref(&quot;network.proxy.type&quot;, 5); --&gt; <A HREF="http://kb.mozillazine.org/Network.proxy.type">http://kb.mozillazine.org/Network.proxy.type</A>
</I>&gt;<i> 
</I>&gt;<i> also IMO Zugriff auf die Environment-Variablen HTTP/S_PROXY, was schon
</I>&gt;<i> nicht bei HTTP geht. Wenn man den Typ auf 1 &#228;ndert und dann die
</I>&gt;<i> entsprechenden Variablen setzt, fluppt's dann auch nicht. IIRC
</I>&gt;<i> ging das mal.
</I>&gt;<i> 
</I>&gt;<i> W&#228;re f&#252;r einen Hinweis dankbar, wenn jemand mehr Erfolg unter Windows
</I>&gt;<i> mit der aktuellen SOAP-UI-Version hat.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Viele Gr&#252;&#223;e,
</I>&gt;<i> 
</I>&gt;<i> Dirk
</I>
-------------- next part --------------
--- bin/soapui.sh       2013-01-08 11:25:42.000000000 +0100
+++ bin/soapui-burp.sh  2013-01-25 13:50:58.973629637 +0100
@@ -7,6 +7,8 @@
 
 ### $Id$ ###
 
+PROXY=&quot;-Dhttps.proxyHost=localhost -Dhttps.proxyPort=8080 -Dhttp.proxyHost=localhost -Dhttp.proxyPort=8080 -Djavax.net.ssl.trustStore=&lt;PFAD&gt;/soapUI-4.5.1.1-SNAPSHOT/PortSwigger.jks -Djavax.net.ssl.trustStorePassword=&lt;PASSWORT&gt;&quot;
+
 DIRNAME=`dirname $0`
 
 # OS specific support (must be 'true' or 'false').
@@ -124,9 +126,10 @@
                     export SOAPUI_CLASSPATH=$SOAPUI_CLASSPATH:$SOAPUI_HOME/lib/ws-commons-util-1.0.2.jar
                     export SOAPUI_CLASSPATH=$SOAPUI_CLASSPATH:$SOAPUI_HOME/lib/guava-11.0.jar
                     export SOAPUI_CLASSPATH=$SOAPUI_CLASSPATH:$SOAPUI_HOME/lib/commons-httpclient-3.1.jar
 
 export SOAPUI_CLASSPATH
 
-JAVA_OPTS=&quot;-Xms128m -Xmx1024m -Dsoapui.properties=soapui.properties -Dgroovy.source.encoding=iso-8859-1 -Dsoapui.home=$SOAPUI_HOME/bin&quot;
+JAVA_OPTS=&quot;-Xms128m -Xmx1024m $PROXY -Dsoapui.properties=soapui.properties -Dgroovy.source.encoding=iso-8859-1 -Dsoapui.home=$SOAPUI_HOME/bin&quot;
 then
     JAVA_OPTS=&quot;$JAVA_OPTS -Dsoapui.ext.libraries=$SOAPUI_HOME/bin/ext&quot;

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000457.html">[Owasp-germany] SOAP UI und Proxy und HTTPS
</A></li>
	<LI>Next message: <A HREF="000458.html">[Owasp-germany] OWASP AppSecEU 2013: Call for P^2 open!
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#460">[ date ]</a>
              <a href="thread.html#460">[ thread ]</a>
              <a href="subject.html#460">[ subject ]</a>
              <a href="author.html#460">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.owasp.org/mailman/listinfo/owasp-germany">More information about the Owasp-germany
mailing list</a><br>
</body></html>
