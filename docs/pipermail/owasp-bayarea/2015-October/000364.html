<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Owasp-bayarea] How many products or web sites that you are aware of disable port 80(http) traffic completely?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:owasp-bayarea%40lists.owasp.org?Subject=Re%3A%20%5BOwasp-bayarea%5D%20How%20many%20products%20or%20web%20sites%20that%20you%20are%0A%20aware%20of%20disable%20port%2080%28http%29%20traffic%20completely%3F&In-Reply-To=%3C1444852572465.93032%40vmware.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000361.html">
   <LINK REL="Next"  HREF="000365.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Owasp-bayarea] How many products or web sites that you are aware of disable port 80(http) traffic completely?</H1>
    <B>Greg Christopher</B> 
    <A HREF="mailto:owasp-bayarea%40lists.owasp.org?Subject=Re%3A%20%5BOwasp-bayarea%5D%20How%20many%20products%20or%20web%20sites%20that%20you%20are%0A%20aware%20of%20disable%20port%2080%28http%29%20traffic%20completely%3F&In-Reply-To=%3C1444852572465.93032%40vmware.com%3E"
       TITLE="[Owasp-bayarea] How many products or web sites that you are aware of disable port 80(http) traffic completely?">gchristopher at vmware.com
       </A><BR>
    <I>Wed Oct 14 19:56:14 UTC 2015</I>
    <P><UL>
        <LI>Previous message: <A HREF="000361.html">[Owasp-bayarea] How many products or web sites that you are aware of disable port 80(http) traffic completely?
</A></li>
        <LI>Next message: <A HREF="000365.html">[Owasp-bayarea] How many products or web sites that you are aware of disable port 80(http) traffic completely?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#364">[ date ]</a>
              <a href="thread.html#364">[ thread ]</a>
              <a href="subject.html#364">[ subject ]</a>
              <a href="author.html#364">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thanks for the discussion folks. I wasn't really asking why, just whether.


The truth is, today, if a web portal doesn't turn off port 80 it can't be secure from being forced to non-TLS traffic.


Yes, people are very used to typing &quot;chase&quot; into their browser and ending up with the chase banking web site. Unfortunately If you're not using the chrome white list or a browser extension, you're not getting automatically sent to https- you get redirected first.


Smart attackers use ettercap and sslsniff to blow through all of that redirection stuff.


<A HREF="https://www.youtube.com/watch?v=WhKBPwzhAZ4">https://www.youtube.com/watch?v=WhKBPwzhAZ4</A>

<A HREF="https://www.youtube.com/watch?v=jEDgo6A_XUA">https://www.youtube.com/watch?v=jEDgo6A_XUA</A>


Thank you Moxie. Here are the problems with a port 80 redirect:


-Connect to web site using http. Because you didn't use https, the certificate was not verified and you don't really know who you're connected to.

-Receive 301 to redirect BACK to port 80 (kind of like spinning the player in pin the tail on the donkey), but this is attacker code. And you're redirected right back to insecurity

-SSLSNIFF proxies all the network traffic to your bank establishing a secure connection on your behalf, but serving/repurposing back all of the goodies to you on port 80.

-SSLSNIFF puts a little lock FAVICON on the page for good measure :):):)

-Surf away to your bank. You won't even notice it's not the actual bank site. Passwords, account numbers, etc are all in the clear.

     A Browsers' visual cues that you're on a secure site are notoriously unnoticeable. To make this really stand out, we'd have to serve every <A HREF="http://">http://</A> site with flashing red all around the page. We're not going to be doing that any time soon. HSTS is the best we have, except turning off &quot;port 80&quot; completely.


-----------


So actually, I am not working on a web site. I'm working on software that should be secured as installed anywhere, and it's usually internal. So:


   -Google https whitelist

   -https everywhere whitelist


are out of the question, which leaves:


-HSTS. Great technology... not secure the first time unless you avoid the redirect... and ONLY WORKS WITH SIGNED CERTIFICATES.

So HSTS is imperfect and won't work in many internal deployments.


So back to the original question: Are there any software products you know of that simply disallow redirects and only listen on 443?


Greg

________________________________
From: David Tomaschik &lt;<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-bayarea">david at systemoverlord.com</A>&gt;
Sent: Wednesday, October 14, 2015 9:10 AM
To: David Tomaschik; Greg Christopher; <A HREF="https://lists.owasp.org/mailman/listinfo/owasp-bayarea">owasp-bayarea at lists.owasp.org</A>
Subject: Re: [Owasp-bayarea] How many products or web sites that you are aware of disable port 80(http) traffic completely?

On Tue, Oct 13, 2015 at 10:25 PM, &lt;<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-bayarea">travis+ml-owasp-bayarea at subspacefield.org</A>&lt;mailto:<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-bayarea">travis+ml-owasp-bayarea at subspacefield.org</A>&gt;&gt; wrote:
On Tue, Oct 13, 2015 at 01:43:33PM -0700, David Tomaschik wrote:
&gt;<i> There's really no advantage to not having a port 80 listener, is there?
</I>
It depends on your threat model.

The net-net is:

You and your customers can't accidentally end up using HTTP instead of
HTTPS.

The details are:

That means cookies which you failed to set the &quot;secure&quot; (?!?) flag on
don't accidentally get sent via HTTP.

They don't accidentally send a password or sensitive information over
HTTP via an &quot;unsecure&quot; form, possibly via a redirect or something
where the form action is autogenerated.

You can avoid accidentally sending a login cookie or something in
an unencrypted response.

An active MITM can spoof HTTP/TCP/80 without talking to the real site,
clearly.

A MOTS can only race against the real site which probably sends back a
TCP RST.

Passive attackers are SOL if you don't ever do HTTP/TCP/80.

You can easily splice into HTTP requests via dsniff and whatnot
to insert a fake HSTS - it's harder if they never use HTTP in the
first place and you never allow it.

There's probably a dozen other minor implications and scenarios that
would need to be run through to generate a proper analysis, including
interactions with user controllable content, XSS, CSRF, header
splicing and header injection, but this is all you get for free from
me after 2200 on a worknight. :-)

I suppose I didn't consider &quot;accidentally&quot; using HTTP.  Given that I was considering any mechanism that does not protect against a MITM as flawed, I still see no benefit, but I do suppose there is a benefit against e.g., the passive attacker.  Not serving on port 80 does come with a usability cost though.  Many users will not type in the protocol and will be surprised when it doesn't work.

Some of the concerns you listed could be mitigated by a well-designed framework: redirecting all requests to HTTPS won't protect against the data sent by the user, but it can prevent sending the login cookie in the response, and your framework can ensure the secure attribute is set on cookies.


Cheers
--
<A HREF="http://www.subspacefield.org/~travis/&lt;https://urldefense.proofpoint.com/v2/url?u=http-3A__www.subspacefield.org_-7Etravis_&amp;d=BQMFaQ&amp;c=Sqcl0Ez6M0X8aeM67LKIiDJAXVeAw-YihVMNtXt-uEs&amp;r=8UB-FonM9AVnJQlZub6NeK0PnIGQ-R68-KfkL5j9Y2k&amp;m=Wg7x-Nmm93o6bFLwmNaxYRQhk4rUACJGtn96tqQTAfk&amp;s=ZWwQRqYCVatcaWsMlPSvb3GNapc9mZ3Gn87LT-WMKqA&amp;e=">http://www.subspacefield.org/~travis/&lt;https://urldefense.proofpoint.com/v2/url?u=http-3A__www.subspacefield.org_-7Etravis_&amp;d=BQMFaQ&amp;c=Sqcl0Ez6M0X8aeM67LKIiDJAXVeAw-YihVMNtXt-uEs&amp;r=8UB-FonM9AVnJQlZub6NeK0PnIGQ-R68-KfkL5j9Y2k&amp;m=Wg7x-Nmm93o6bFLwmNaxYRQhk4rUACJGtn96tqQTAfk&amp;s=ZWwQRqYCVatcaWsMlPSvb3GNapc9mZ3Gn87LT-WMKqA&amp;e=</A>&gt; | if spammer then <A HREF="https://lists.owasp.org/mailman/listinfo/owasp-bayarea">john at subspacefield.org</A>&lt;mailto:<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-bayarea">john at subspacefield.org</A>&gt;
&quot;Computer crime, the glamor crime of the 1970s, will become in the
1980s one of the greatest sources of preventable business loss.&quot;
John M. Carroll, &quot;Computer Security&quot;, first edition cover flap, 1977



--
David Tomaschik
OpenPGP: 0x5DEA789B
<A HREF="http://systemoverlord.com&lt;https://urldefense.proofpoint.com/v2/url?u=http-3A__systemoverlord.com&amp;d=BQMFaQ&amp;c=Sqcl0Ez6M0X8aeM67LKIiDJAXVeAw-YihVMNtXt-uEs&amp;r=8UB-FonM9AVnJQlZub6NeK0PnIGQ-R68-KfkL5j9Y2k&amp;m=Wg7x-Nmm93o6bFLwmNaxYRQhk4rUACJGtn96tqQTAfk&amp;s=rRWBg2xdvU98xqX_DDfw1ZN6t4-MGARehv0wetwK_8o&amp;e=">http://systemoverlord.com&lt;https://urldefense.proofpoint.com/v2/url?u=http-3A__systemoverlord.com&amp;d=BQMFaQ&amp;c=Sqcl0Ez6M0X8aeM67LKIiDJAXVeAw-YihVMNtXt-uEs&amp;r=8UB-FonM9AVnJQlZub6NeK0PnIGQ-R68-KfkL5j9Y2k&amp;m=Wg7x-Nmm93o6bFLwmNaxYRQhk4rUACJGtn96tqQTAfk&amp;s=rRWBg2xdvU98xqX_DDfw1ZN6t4-MGARehv0wetwK_8o&amp;e=</A>&gt;
<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-bayarea">david at systemoverlord.com</A>&lt;mailto:<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-bayarea">david at systemoverlord.com</A>&gt;
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.owasp.org/pipermail/owasp-bayarea/attachments/20151014/14f5a2f7/attachment-0001.html">http://lists.owasp.org/pipermail/owasp-bayarea/attachments/20151014/14f5a2f7/attachment-0001.html</A>&gt;
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000361.html">[Owasp-bayarea] How many products or web sites that you are aware of disable port 80(http) traffic completely?
</A></li>
	<LI>Next message: <A HREF="000365.html">[Owasp-bayarea] How many products or web sites that you are aware of disable port 80(http) traffic completely?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#364">[ date ]</a>
              <a href="thread.html#364">[ thread ]</a>
              <a href="subject.html#364">[ subject ]</a>
              <a href="author.html#364">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.owasp.org/mailman/listinfo/owasp-bayarea">More information about the Owasp-bayarea
mailing list</a><br>
</body></html>
