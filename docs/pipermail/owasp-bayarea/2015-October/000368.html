<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Owasp-bayarea] How many products or web sites that you are aware of disable port 80(http) traffic completely?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:owasp-bayarea%40lists.owasp.org?Subject=Re%3A%20%5BOwasp-bayarea%5D%20How%20many%20products%20or%20web%20sites%20that%20you%20are%0A%20aware%20of%20disable%20port%2080%28http%29%20traffic%20completely%3F&In-Reply-To=%3CCAOy4Vzd2jX%2B2D10pyNhQp5DxtqDf2%3DSzxi2PwWgr6O8%2ByMvewQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000367.html">
   <LINK REL="Next"  HREF="000369.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Owasp-bayarea] How many products or web sites that you are aware of disable port 80(http) traffic completely?</H1>
    <B>David Tomaschik</B> 
    <A HREF="mailto:owasp-bayarea%40lists.owasp.org?Subject=Re%3A%20%5BOwasp-bayarea%5D%20How%20many%20products%20or%20web%20sites%20that%20you%20are%0A%20aware%20of%20disable%20port%2080%28http%29%20traffic%20completely%3F&In-Reply-To=%3CCAOy4Vzd2jX%2B2D10pyNhQp5DxtqDf2%3DSzxi2PwWgr6O8%2ByMvewQ%40mail.gmail.com%3E"
       TITLE="[Owasp-bayarea] How many products or web sites that you are aware of disable port 80(http) traffic completely?">david at systemoverlord.com
       </A><BR>
    <I>Wed Oct 14 21:34:15 UTC 2015</I>
    <P><UL>
        <LI>Previous message: <A HREF="000367.html">[Owasp-bayarea] How many products or web sites that you are aware of disable port 80(http) traffic completely?
</A></li>
        <LI>Next message: <A HREF="000369.html">[Owasp-bayarea] How many products or web sites that you are aware of disable port 80(http) traffic completely?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#368">[ date ]</a>
              <a href="thread.html#368">[ thread ]</a>
              <a href="subject.html#368">[ subject ]</a>
              <a href="author.html#368">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Wed, Oct 14, 2015 at 2:31 PM, Jim Manico &lt;<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-bayarea">jim.manico at owasp.org</A>&gt; wrote:

&gt;<i> &gt; If you're building your product, why does it matter if other products do
</I>&gt;<i> this?  If your threat model needs to be protected against HTTP downgrade,
</I>&gt;<i> just serve on 443, but realize that if a user *doesn't* type the https (due
</I>&gt;<i> to laziness, human error, etc.), a MITM will *still* own them.
</I>&gt;<i>
</I>&gt;<i> This is not true from what I see. Most folks just typing &quot;chase&quot; into
</I>&gt;<i> their browser (at least chrome, safari and firefox osx) will trigger a
</I>&gt;<i> search engine hit, which mostly list https links by default if available.
</I>&gt;<i>
</I>&gt;<i> So unless the user explicitly types in &quot;<A HREF="http://somesite.com">http://somesite.com</A>&quot;
</I>&gt;<i> &lt;<A HREF="http://somesite.com">http://somesite.com</A>&gt; and that site is not preloaded HSTS and (and the
</I>&gt;<i> user did not trigger HSTS headers in previous hits) most browsers default
</I>&gt;<i> to HTTPS.
</I>&gt;<i>
</I>
I was thinking of the (at least somewhat common) case of typing &quot;chase.com&quot;,
(i.e., doamin without protocol) which gets you HTTP by default.  For an
internal service as Greg described, people may just type &quot;internal.host.name&quot;,
in which case a MITM owns them, no matter what he does on the service.
 (Modulo HSTS.)

Also, if your internal service is not using CA-signed (whether your own CA
or a public CA) certificates, you're also failing already.


&gt;<i>
</I>&gt;<i> Fair?
</I>&gt;<i>
</I>&gt;<i> - Jim
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On Wed, Oct 14, 2015 at 12:56 PM, Greg Christopher &lt;
</I>&gt;<i> &lt;<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-bayarea">gchristopher at vmware.com</A>&gt;<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-bayarea">gchristopher at vmware.com</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> Thanks for the discussion folks. I wasn't really asking why, just whether.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The truth is, today, if a web portal doesn't turn off port 80 it can't
</I>&gt;&gt;<i> be secure from being forced to non-TLS traffic.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Yes, people are very used to typing &quot;chase&quot; into their browser and ending
</I>&gt;&gt;<i> up with the chase banking web site. Unfortunately If you're not using
</I>&gt;&gt;<i> the chrome white list or a browser extension, you're not getting
</I>&gt;&gt;<i> automatically sent to https- you get redirected first.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Smart attackers use ettercap and sslsniff to blow through all of that
</I>&gt;&gt;<i> redirection stuff.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> <A HREF="https://www.youtube.com/watch?v=WhKBPwzhAZ4">https://www.youtube.com/watch?v=WhKBPwzhAZ4</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> <A HREF="https://www.youtube.com/watch?v=jEDgo6A_XUA">https://www.youtube.com/watch?v=jEDgo6A_XUA</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Thank you Moxie. Here are the problems with a port 80 redirect:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> -Connect to web site using http. Because you didn't use https, the
</I>&gt;&gt;<i> certificate was not verified and you don't really know who you're connected
</I>&gt;&gt;<i> to.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> -Receive 301 to redirect BACK to port 80 (kind of like spinning the
</I>&gt;&gt;<i> player in pin the tail on the donkey), but this is attacker code. And
</I>&gt;&gt;<i> you're redirected right back to insecurity
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> No need to 301 you if there's a MITM.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;&gt;<i> -SSLSNIFF proxies all the network traffic to your bank establishing a
</I>&gt;&gt;<i> secure connection on your behalf, but serving/repurposing back all of the
</I>&gt;&gt;<i> goodies to you on port 80.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> -SSLSNIFF puts a little lock FAVICON on the page for good measure :):):)
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> -Surf away to your bank. You won't even notice it's not the actual bank
</I>&gt;&gt;<i> site. Passwords, account numbers, etc are all in the clear.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>      A Browsers' visual cues that you're on a secure site are notoriously
</I>&gt;&gt;<i> unnoticeable. To make this really stand out, we'd have to serve every
</I>&gt;&gt;<i> <A HREF="http://">http://</A> site with flashing red all around the page. We're not going to
</I>&gt;&gt;<i> be doing that any time soon. HSTS is the best we have, except turning off
</I>&gt;&gt;<i> &quot;port 80&quot; completely.
</I>&gt;&gt;<i>
</I>&gt;<i> Well, in the case of chrome, that's not completely true.  Though no
</I>&gt;<i> definitive timeline has been laid out, Chrome has stated they intend to
</I>&gt;<i> mark HTTP as insecure:
</I>&gt;<i> &lt;<A HREF="https://www.chromium.org/Home/chromium-security/marking-http-as-non-secure">https://www.chromium.org/Home/chromium-security/marking-http-as-non-secure</A>&gt;
</I>&gt;<i> <A HREF="https://www.chromium.org/Home/chromium-security/marking-http-as-non-secure">https://www.chromium.org/Home/chromium-security/marking-http-as-non-secure</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> -----------
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> So actually, I am not working on a web site. I'm working on software that
</I>&gt;&gt;<i> should be secured as installed anywhere, and it's usually internal. So:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>    -Google https whitelist
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>    -https everywhere whitelist
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> are out of the question, which leaves:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> -HSTS. Great technology... not secure the first time unless you avoid the
</I>&gt;&gt;<i> redirect... and *ONLY WORKS WITH SIGNED CERTIFICATES.  *
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> So HSTS is imperfect and won't work in many internal deployments.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> So back to the original question: Are there any software *products* you
</I>&gt;&gt;<i> know of that simply disallow redirects and only listen on 443?
</I>&gt;&gt;<i>
</I>&gt;<i> If you're building your product, why does it matter if other products do
</I>&gt;<i> this?  If your threat model needs to be protected against HTTP downgrade,
</I>&gt;<i> just serve on 443, but realize that if a user *doesn't* type the https (due
</I>&gt;<i> to laziness, human error, etc.), a MITM will *still* own them.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Greg
</I>&gt;&gt;<i> ------------------------------
</I>&gt;&gt;<i> *From:* David Tomaschik &lt;<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-bayarea">david at systemoverlord.com</A>&gt;
</I>&gt;&gt;<i> *Sent:* Wednesday, October 14, 2015 9:10 AM
</I>&gt;&gt;<i> *To:* David Tomaschik; Greg Christopher; &lt;<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-bayarea">owasp-bayarea at lists.owasp.org</A>&gt;
</I>&gt;&gt;<i> <A HREF="https://lists.owasp.org/mailman/listinfo/owasp-bayarea">owasp-bayarea at lists.owasp.org</A>
</I>&gt;&gt;<i> *Subject:* Re: [Owasp-bayarea] How many products or web sites that you
</I>&gt;&gt;<i> are aware of disable port 80(http) traffic completely?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> On Tue, Oct 13, 2015 at 10:25 PM, &lt;
</I>&gt;&gt;<i> &lt;<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-bayarea">travis+ml-owasp-bayarea at subspacefield.org</A>&gt;
</I>&gt;&gt;<i> <A HREF="https://lists.owasp.org/mailman/listinfo/owasp-bayarea">travis+ml-owasp-bayarea at subspacefield.org</A>&gt; wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> On Tue, Oct 13, 2015 at 01:43:33PM -0700, David Tomaschik wrote:
</I>&gt;&gt;&gt;<i> &gt; There's really no advantage to not having a port 80 listener, is there?
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> It depends on your threat model.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> The net-net is:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> You and your customers can't accidentally end up using HTTP instead of
</I>&gt;&gt;&gt;<i> HTTPS.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> The details are:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> That means cookies which you failed to set the &quot;secure&quot; (?!?) flag on
</I>&gt;&gt;&gt;<i> don't accidentally get sent via HTTP.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> They don't accidentally send a password or sensitive information over
</I>&gt;&gt;&gt;<i> HTTP via an &quot;unsecure&quot; form, possibly via a redirect or something
</I>&gt;&gt;&gt;<i> where the form action is autogenerated.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> You can avoid accidentally sending a login cookie or something in
</I>&gt;&gt;&gt;<i> an unencrypted response.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> An active MITM can spoof HTTP/TCP/80 without talking to the real site,
</I>&gt;&gt;&gt;<i> clearly.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> A MOTS can only race against the real site which probably sends back a
</I>&gt;&gt;&gt;<i> TCP RST.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Passive attackers are SOL if you don't ever do HTTP/TCP/80.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> You can easily splice into HTTP requests via dsniff and whatnot
</I>&gt;&gt;&gt;<i> to insert a fake HSTS - it's harder if they never use HTTP in the
</I>&gt;&gt;&gt;<i> first place and you never allow it.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> There's probably a dozen other minor implications and scenarios that
</I>&gt;&gt;&gt;<i> would need to be run through to generate a proper analysis, including
</I>&gt;&gt;&gt;<i> interactions with user controllable content, XSS, CSRF, header
</I>&gt;&gt;&gt;<i> splicing and header injection, but this is all you get for free from
</I>&gt;&gt;&gt;<i> me after 2200 on a worknight. :-)
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I suppose I didn't consider &quot;accidentally&quot; using HTTP.  Given that I was
</I>&gt;&gt;<i> considering any mechanism that does not protect against a MITM as flawed, I
</I>&gt;&gt;<i> still see no benefit, but I do suppose there is a benefit against e.g., the
</I>&gt;&gt;<i> passive attacker.  Not serving on port 80 does come with a usability cost
</I>&gt;&gt;<i> though.  Many users will not type in the protocol and will be surprised
</I>&gt;&gt;<i> when it doesn't work.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Some of the concerns you listed could be mitigated by a well-designed
</I>&gt;&gt;<i> framework: redirecting all requests to HTTPS won't protect against the data
</I>&gt;&gt;<i> sent by the user, but it can prevent sending the login cookie in the
</I>&gt;&gt;<i> response, and your framework can ensure the secure attribute is set on
</I>&gt;&gt;<i> cookies.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Cheers
</I>&gt;&gt;&gt;<i> --
</I>&gt;&gt;&gt;<i> <A HREF="http://www.subspacefield.org/~travis/">http://www.subspacefield.org/~travis/</A>
</I>&gt;&gt;&gt;<i> &lt;<A HREF="https://urldefense.proofpoint.com/v2/url?u=http-3A__www.subspacefield.org_-7Etravis_&amp;d=BQMFaQ&amp;c=Sqcl0Ez6M0X8aeM67LKIiDJAXVeAw-YihVMNtXt-uEs&amp;r=8UB-FonM9AVnJQlZub6NeK0PnIGQ-R68-KfkL5j9Y2k&amp;m=Wg7x-Nmm93o6bFLwmNaxYRQhk4rUACJGtn96tqQTAfk&amp;s=ZWwQRqYCVatcaWsMlPSvb3GNapc9mZ3Gn87LT-WMKqA&amp;e=">https://urldefense.proofpoint.com/v2/url?u=http-3A__www.subspacefield.org_-7Etravis_&amp;d=BQMFaQ&amp;c=Sqcl0Ez6M0X8aeM67LKIiDJAXVeAw-YihVMNtXt-uEs&amp;r=8UB-FonM9AVnJQlZub6NeK0PnIGQ-R68-KfkL5j9Y2k&amp;m=Wg7x-Nmm93o6bFLwmNaxYRQhk4rUACJGtn96tqQTAfk&amp;s=ZWwQRqYCVatcaWsMlPSvb3GNapc9mZ3Gn87LT-WMKqA&amp;e=</A>&gt;
</I>&gt;&gt;&gt;<i> | if spammer then &lt;<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-bayarea">john at subspacefield.org</A>&gt;<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-bayarea">john at subspacefield.org</A>
</I>&gt;&gt;&gt;<i> &quot;Computer crime, the glamor crime of the 1970s, will become in the
</I>&gt;&gt;&gt;<i> 1980s one of the greatest sources of preventable business loss.&quot;
</I>&gt;&gt;&gt;<i> John M. Carroll, &quot;Computer Security&quot;, first edition cover flap, 1977
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> --
</I>&gt;&gt;<i> David Tomaschik
</I>&gt;&gt;<i> OpenPGP: 0x5DEA789B
</I>&gt;&gt;<i> <A HREF="http://systemoverlord.com">http://systemoverlord.com</A>
</I>&gt;&gt;<i> &lt;<A HREF="https://urldefense.proofpoint.com/v2/url?u=http-3A__systemoverlord.com&amp;d=BQMFaQ&amp;c=Sqcl0Ez6M0X8aeM67LKIiDJAXVeAw-YihVMNtXt-uEs&amp;r=8UB-FonM9AVnJQlZub6NeK0PnIGQ-R68-KfkL5j9Y2k&amp;m=Wg7x-Nmm93o6bFLwmNaxYRQhk4rUACJGtn96tqQTAfk&amp;s=rRWBg2xdvU98xqX_DDfw1ZN6t4-MGARehv0wetwK_8o&amp;e=">https://urldefense.proofpoint.com/v2/url?u=http-3A__systemoverlord.com&amp;d=BQMFaQ&amp;c=Sqcl0Ez6M0X8aeM67LKIiDJAXVeAw-YihVMNtXt-uEs&amp;r=8UB-FonM9AVnJQlZub6NeK0PnIGQ-R68-KfkL5j9Y2k&amp;m=Wg7x-Nmm93o6bFLwmNaxYRQhk4rUACJGtn96tqQTAfk&amp;s=rRWBg2xdvU98xqX_DDfw1ZN6t4-MGARehv0wetwK_8o&amp;e=</A>&gt;
</I>&gt;&gt;<i> <A HREF="https://lists.owasp.org/mailman/listinfo/owasp-bayarea">david at systemoverlord.com</A>
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> David Tomaschik
</I>&gt;<i> OpenPGP: 0x5DEA789B
</I>&gt;<i> <A HREF="http://systemoverlord.com">http://systemoverlord.com</A>
</I>&gt;<i> <A HREF="https://lists.owasp.org/mailman/listinfo/owasp-bayarea">david at systemoverlord.com</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Owasp-bayarea mailing <A HREF="https://lists.owasp.org/mailman/listinfo/owasp-bayarea">listOwasp-bayarea at lists.owasp.orghttps</A>://lists.owasp.org/mailman/listinfo/owasp-bayarea
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> Jim Manico
</I>&gt;<i> Global Board Member
</I>&gt;<i> OWASP <A HREF="Foundationhttps://www.owasp.org">Foundationhttps://www.owasp.org</A>
</I>&gt;<i>
</I>&gt;<i>
</I>

-- 
David Tomaschik
OpenPGP: 0x5DEA789B
<A HREF="http://systemoverlord.com">http://systemoverlord.com</A>
<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-bayarea">david at systemoverlord.com</A>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.owasp.org/pipermail/owasp-bayarea/attachments/20151014/5f966462/attachment-0001.html">http://lists.owasp.org/pipermail/owasp-bayarea/attachments/20151014/5f966462/attachment-0001.html</A>&gt;
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000367.html">[Owasp-bayarea] How many products or web sites that you are aware of disable port 80(http) traffic completely?
</A></li>
	<LI>Next message: <A HREF="000369.html">[Owasp-bayarea] How many products or web sites that you are aware of disable port 80(http) traffic completely?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#368">[ date ]</a>
              <a href="thread.html#368">[ thread ]</a>
              <a href="subject.html#368">[ subject ]</a>
              <a href="author.html#368">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.owasp.org/mailman/listinfo/owasp-bayarea">More information about the Owasp-bayarea
mailing list</a><br>
</body></html>
