From webgoat at owasp.org  Sat Jul 12 17:19:37 2008
From: webgoat at owasp.org (webgoat webgoat)
Date: Sat, 12 Jul 2008 17:19:37 -0400
Subject: [Owasp-webgoat] 5.2 Released
In-Reply-To: <bece9fb0807121359q7482af65n12266253fc790ead@mail.gmail.com>
References: <bece9fb0807121359q7482af65n12266253fc790ead@mail.gmail.com>
Message-ID: <bece9fb0807121419wdeed82p9bd893cea1459840@mail.gmail.com>

All,

WebGoat 5.2 was released today.

The standard edition (unzip and click to run) is available at:
    http://code.google.com/p/webgoat/downloads/list

The developer edition (for doing the labs) is available at:

http://sourceforge.net/project/showfiles.php?group_id=64424&package_id=61824

A new "Report Bug" feature has been added to all pages.  This sends email to
me, so feel free to report even trivial typo's (there are a lot) using this
feature.

Thanks to all the people, especially Stephen Craig Evans, who provided beta
feedback, hopefully most of your issues were addressed.  Many of the
solution files need to be updated and that effort was not part of 5.2.

Regards,

Bruce

-- 
Bruce Mayhew
OWASP WebGoat Project Lead

From mail at five-nines.org  Wed Jul 16 07:45:10 2008
From: mail at five-nines.org (Jochen Haemmerle)
Date: Wed, 16 Jul 2008 13:45:10 +0200
Subject: [Owasp-webgoat] Java version in 5.2 standard
Message-ID: <487DDF46.9030807@five-nines.org>

Hi everyone,

I've got some problems with the 5.2 Release of WebGoat. I'm using the
Sun JDK in version jdk1.5.0_16 under linux with a x86 machine. When I
try to start WebGoat of the "standard" release, the Tomcat complains
about a "java.lang.UnsupportedClassVersionError:" error while deploying
the *.war file. This sounds to me like I should use a newer version of Java.
A look in the manifest.mf file WebGoat.war indicates that the 5.2
Release is compiled with java 1.6
However the startscript asks me to use Java 1.5 ("The JVM in $JAVA_HOME
isn't version 1.5.")
So the question is, was the release accidently compiled with java 1.6 or
does the "webgoat.sh" script need a minor patch. ;)

If I compile everything with the developer edition of webgoat using java
1.5 everything works fine.

Cheers
Jochen



WebGoat-5.2$ sh webgoat.sh start8080
Using CATALINA_BASE:   ./tomcat
Using CATALINA_HOME:   ./tomcat
Using CATALINA_TMPDIR: ./tomcat/temp
Using JAVA_HOME:       /..../tools/java/jdk1.5.0_16/

  Open http://127.0.0.1:8080/WebGoat/attack
  Username: guest
  Password: guest
  Or try http://guest:guest at 127.0.0.1:8080/WebGoat/attack

Jul 16, 2008 11:51:58 AM org.apache.coyote.http11.Http11Protocol init
INFO: Initializing Coyote HTTP/1.1 on http-127.0.0.1-8443
Jul 16, 2008 11:51:58 AM org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 1135 ms
Jul 16, 2008 11:51:58 AM org.apache.catalina.core.StandardService start
INFO: Starting service Catalina
Jul 16, 2008 11:51:58 AM org.apache.catalina.core.StandardEngine start
INFO: Starting Servlet Engine: Apache Tomcat/5.5.4
Jul 16, 2008 11:51:59 AM org.apache.catalina.core.StandardHost start
INFO: XML validation disabled
Jul 16, 2008 11:51:59 AM org.apache.catalina.startup.HostConfig deployWAR
INFO: Deploying web application archive WebGoat.war
Jul 16, 2008 11:52:00 AM org.apache.catalina.startup.HostConfig deployWAR
SEVERE: Error deploying web application archive WebGoat.war
java.lang.UnsupportedClassVersionError: Bad version number in .class file
        at java.lang.ClassLoader.defineClass1(Native Method)
        at java.lang.ClassLoader.defineClass(ClassLoader.java:620)
        at
java.security.SecureClassLoader.defineClass(SecureClassLoader.java:124)
        at
org.apache.catalina.loader.WebappClassLoader.findClassInternal(WebappClassLoader.java:1626)
        at
org.apache.catalina.loader.WebappClassLoader.findClass(WebappClassLoader.java:850)
        at
org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1299)
        at
org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1181)
        at
org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:988)
        at
org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:886)
        at
org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:3817)
        at
org.apache.catalina.core.StandardContext.start(StandardContext.java:4079)
        at
org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:755)
        at
org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:739)
        at
org.apache.catalina.core.StandardHost.addChild(StandardHost.java:525)
        at
org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:777)
        at
org.apache.catalina.startup.HostConfig.deployWARs(HostConfig.java:672)
        at
org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:472)
        at
org.apache.catalina.startup.HostConfig.start(HostConfig.java:1079)
        at
org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:310)
        at
org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
        at
org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1011)
        at
org.apache.catalina.core.StandardHost.start(StandardHost.java:718)
        at
org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1003)
        at
org.apache.catalina.core.StandardEngine.start(StandardEngine.java:437)
        at
org.apache.catalina.core.StandardService.start(StandardService.java:450)
        at
org.apache.catalina.core.StandardServer.start(StandardServer.java:2010)
        at org.apache.catalina.startup.Catalina.start(Catalina.java:537)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:585)
        at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:271)
        at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:409)
Jul 16, 2008 11:52:01 AM org.apache.catalina.core.ApplicationContext log
INFO: org.apache.webapp.balancer.BalancerFilter: init(): ruleChain:
[org.apache.webapp.balancer.RuleChain:
[org.apache.webapp.balancer.rules.URLStringMatchRule: Target string:
News / Redirect URL: http://www.cnn.com],
[org.apache.webapp.balancer.rules.RequestParameterRule: Target param
name: paramName / Target param value: paramValue / Redirect URL:
http://www.yahoo.com],
[org.apache.webapp.balancer.rules.AcceptEverythingRule: Redirect URL:
http://jakarta.apache.org]]
Jul 16, 2008 11:52:01 AM org.apache.coyote.http11.Http11Protocol start
INFO: Starting Coyote HTTP/1.1 on http-127.0.0.1-8080
Jul 16, 2008 11:52:01 AM org.apache.coyote.http11.Http11Protocol start
INFO: Starting Coyote HTTP/1.1 on http-127.0.0.1-8443
- JK2: ajp13 listening on /127.0.0.1:8009
Jul 16, 2008 11:52:01 AM org.apache.jk.server.JkMain start
INFO: Jk running ID=0 time=0/128  config=null
Jul 16, 2008 11:52:01 AM org.apache.catalina.startup.Catalina start
INFO: Server startup in 2578 ms



From Bruce.Mayhew at OunceLabs.com  Wed Jul 16 10:09:50 2008
From: Bruce.Mayhew at OunceLabs.com (Bruce Mayhew)
Date: Wed, 16 Jul 2008 10:09:50 -0400
Subject: [Owasp-webgoat] Java version in 5.2 standard
Message-ID: <254301c8e74d$93ad9adf$0503a8c0@Ounce.local>

WebGoat was built with 1.6.  The script should be changed.  Feel free to file a bug from the WebGoat issues page.  

Thanks for reporting this...

Bruce 

-----Original Message-----
From: "Jochen Haemmerle" <mail at five-nines.org>
To: "owasp-webgoat at lists.owasp.org" <owasp-webgoat at lists.owasp.org>
Sent: 7/16/08 7:45 AM
Subject: [Owasp-webgoat] Java version in 5.2 standard

Hi everyone,

I've got some problems with the 5.2 Release of WebGoat. I'm using the
Sun JDK in version jdk1.5.0_16 under linux with a x86 machine. When I
try to start WebGoat of the "standard" release, the Tomcat complains
about a "java.lang.UnsupportedClassVersionError:" error while deploying
the *.war file. This sounds to me like I should use a newer version of Java.
A look in the manifest.mf file WebGoat.war indicates that the 5.2
Release is compiled with java 1.6
However the startscript asks me to use Java 1.5 ("The JVM in $JAVA_HOME
isn't version 1.5.")
So the question is, was the release accidently compiled with java 1.6 or
does the "webgoat.sh" script need a minor patch. ;)

If I compile everything with the developer edition of webgoat using java
1.5 everything works fine.

Cheers
Jochen



WebGoat-5.2$ sh webgoat.sh start8080
Using CATALINA_BASE:   ./tomcat
Using CATALINA_HOME:   ./tomcat
Using CATALINA_TMPDIR: ./tomcat/temp
Using JAVA_HOME:       /..../tools/java/jdk1.5.0_16/

  Open http://127.0.0.1:8080/WebGoat/attack
  Username: guest
  Password: guest
  Or try http://guest:guest at 127.0.0.1:8080/WebGoat/attack

Jul 16, 2008 11:51:58 AM org.apache.coyote.http11.Http11Protocol init
INFO: Initializing Coyote HTTP/1.1 on http-127.0.0.1-8443
Jul 16, 2008 11:51:58 AM org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 1135 ms
Jul 16, 2008 11:51:58 AM org.apache.catalina.core.StandardService start
INFO: Starting service Catalina
Jul 16, 2008 11:51:58 AM org.apache.catalina.core.StandardEngine start
INFO: Starting Servlet Engine: Apache Tomcat/5.5.4
Jul 16, 2008 11:51:59 AM org.apache.catalina.core.StandardHost start
INFO: XML validation disabled
Jul 16, 2008 11:51:59 AM org.apache.catalina.startup.HostConfig deployWAR
INFO: Deploying web application archive WebGoat.war
Jul 16, 2008 11:52:00 AM org.apache.catalina.startup.HostConfig deployWAR
SEVERE: Error deploying web application archive WebGoat.war
java.lang.UnsupportedClassVersionError: Bad version number in .class file
        at java.lang.ClassLoader.defineClass1(Native Method)
        at java.lang.ClassLoader.defineClass(ClassLoader.java:620)
        at
java.security.SecureClassLoader.defineClass(SecureClassLoader.java:124)
        at
org.apache.catalina.loader.WebappClassLoader.findClassInternal(WebappClassLoader.java:1626)
        at
org.apache.catalina.loader.WebappClassLoader.findClass(WebappClassLoader.java:850)
        at
org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1299)
        at
org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1181)
        at
org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:988)
        at
org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:886)
        at
org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:3817)
        at
org.apache.catalina.core.StandardContext.start(StandardContext.java:4079)
        at
org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:755)
        at
org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:739)
        at
org.apache.catalina.core.StandardHost.addChild(StandardHost.java:525)
        at
org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:777)
        at
org.apache.catalina.startup.HostConfig.deployWARs(HostConfig.java:672)
        at
org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:472)
        at
org.apache.catalina.startup.HostConfig.start(HostConfig.java:1079)
        at
org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:310)
        at
org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
        at
org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1011)
        at
org.apache.catalina.core.StandardHost.start(StandardHost.java:718)
        at
org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1003)
        at
org.apache.catalina.core.StandardEngine.start(StandardEngine.java:437)
        at
org.apache.catalina.core.StandardService.start(StandardService.java:450)
        at
org.apache.catalina.core.StandardServer.start(StandardServer.java:2010)
        at org.apache.catalina.startup.Catalina.start(Catalina.java:537)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:585)
        at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:271)
        at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:409)
Jul 16, 2008 11:52:01 AM org.apache.catalina.core.ApplicationContext log
INFO: org.apache.webapp.balancer.BalancerFilter: init(): ruleChain:
[org.apache.webapp.balancer.RuleChain:
[org.apache.webapp.balancer.rules.URLStringMatchRule: Target string:
News / Redirect URL: http://www.cnn.com],
[org.apache.webapp.balancer.rules.RequestParameterRule: Target param
name: paramName / Target param value: paramValue / Redirect URL:
http://www.yahoo.com],
[org.apache.webapp.balancer.rules.AcceptEverythingRule: Redirect URL:
http://jakarta.apache.org]]
Jul 16, 2008 11:52:01 AM org.apache.coyote.http11.Http11Protocol start
INFO: Starting Coyote HTTP/1.1 on http-127.0.0.1-8080
Jul 16, 2008 11:52:01 AM org.apache.coyote.http11.Http11Protocol start
INFO: Starting Coyote HTTP/1.1 on http-127.0.0.1-8443
- JK2: ajp13 listening on /127.0.0.1:8009
Jul 16, 2008 11:52:01 AM org.apache.jk.server.JkMain start
INFO: Jk running ID=0 time=0/128  config=null
Jul 16, 2008 11:52:01 AM org.apache.catalina.startup.Catalina start
INFO: Server startup in 2578 ms


_______________________________________________
Owasp-webgoat mailing list
Owasp-webgoat at lists.owasp.org
https://lists.owasp.org/mailman/listinfo/owasp-webgoat

From yzhou at medplus.com  Tue Jul 29 09:12:50 2008
From: yzhou at medplus.com (Zhou, Yan)
Date: Tue, 29 Jul 2008 09:12:50 -0400
Subject: [Owasp-webgoat] WebGoat 5.2, data layer access control fix
Message-ID: <DA235E4D5FD3CE4C8B77382F0837274C4E1B1E@EXCHMAIL01.corp.medplus.com>

Hi there, 

 

1). The solution from WebGoat suggests the following for fixing data
layer access control. 

 

However, I thought that only one of them is sufficient,  either the
function call or the SQL access would do the job, not both. Am I missing
something?

 

                  if (isAuthorizedForEmployee(s, userId, subjectUserId))

                  {     ...

                        //String query = "SELECT * FROM employee WHERE
userid = " + subjectUserId;

                        String query = "SELECT * FROM employee,ownership
WHERE employee.userid = ownership.employee_id and " +

                                    "ownership.employer_id = " + userId
+ " and ownership.employee_id = " + subjectUserId;      // STAGE 4 - FIX

                        ...

                  }     

                  else

                  {

                        throw new UnauthorizedException();

                  }

 

2) How can I get SQL access to the data model, I was not able to find
any instructions on browsing through the database tables directly. 

 

Thanks, 

Yan Zhou

 











Confidentiality Notice: The information contained in this electronic transmission is confidential and may be legally privileged. It is intended only for the addressee(s) named above. If you are not an intended recipient, be aware that any disclosure, copying, distribution or use of the information contained in this transmission is prohibited and may be unlawful. If you have received this transmission in error, please notify us by telephone (513) 229-5500 or by email (postmaster at MedPlus.com). After replying, please erase it from your computer system.




