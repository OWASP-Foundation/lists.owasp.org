<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [OWASP-WEBGOAT]Stored Xss problem
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:owasp-webgoat%40lists.owasp.org?Subject=%5BOWASP-WEBGOAT%5DStored%20Xss%20problem&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   
   <LINK REL="Next"  HREF="000275.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[OWASP-WEBGOAT]Stored Xss problem</H1>
    <B>Chuck Byram</B> 
    <A HREF="mailto:owasp-webgoat%40lists.owasp.org?Subject=%5BOWASP-WEBGOAT%5DStored%20Xss%20problem&In-Reply-To="
       TITLE="[OWASP-WEBGOAT]Stored Xss problem">cbyram at mindspring.com
       </A><BR>
    <I>Sun Oct 23 22:48:54 EDT 2005</I>
    <P><UL>
        
        <LI>Next message: <A HREF="000275.html">[OWASP-WEBGOAT]Fwd: Exception with starting Webgoat
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#274">[ date ]</a>
              <a href="thread.html#274">[ thread ]</a>
              <a href="subject.html#274">[ subject ]</a>
              <a href="author.html#274">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,
 
I didn't see this topic in the list, so I sincerely hope I'm not repeating
anything.
 
In the WebGoat Stored Xss lesson, I keep getting this error message: &quot;*
Error generating lessons.StoredXss&quot; when I click any message in the message
list.  It doesn't matter if it's a benign message or a script that alerts
cookies.  It also will not mark my lesson as complete (my main problem).
 
After much gnashing of teeth, I finally thought to look at the Tomcat window
and I found this error message:
 
java.sql.SQLException: No data found
        at sun.jdbc.odbc.JdbcOdbc.standardError(JdbcOdbc.java:7139)
        at sun.jdbc.odbc.JdbcOdbc.SQLGetDataString(JdbcOdbc.java:3908)
        at
sun.jdbc.odbc.JdbcOdbcResultSet.getDataString(JdbcOdbcResultSet.java:5699)
        at
sun.jdbc.odbc.JdbcOdbcResultSet.getString(JdbcOdbcResultSet.java:353)
        at lessons.StoredXss.makeCurrent(StoredXss.java:228)
        at lessons.StoredXss.createContent(StoredXss.java:107)
        at lessons.AbstractLesson.wrapForm(AbstractLesson.java:1089)
        at session.Screen.setup(Screen.java:622)
... and other not as relevant stack trace.
 
This is occuring in the StoredXss.java file at the critical part for
success:
if ( results.getString( MESSAGE_COL ).toLowerCase().indexOf( &quot;script&quot; ) !=
-1 )  // &lt;-- problem
{
    makeSuccess( s );
}
 
 
I found this line in the docs for ResultSet for j2se 1.4.2 and 5.0:
For maximum portability, result set columns within each row should be read
in left-to-right order, and each column should be read only once.
 
So, with the addition of the user_name column to this lesson, both these
practices are being broken and I'm thinking this is why it's breaking.  Has
anyone else run into this?
 
I can think of a couple ways to resolve this, but thought I would check to
see if anyone already had an answer or would recommend one way over the
other.
 
Method 1: Install a different java runtime (my environment particulars are
below).  I don't play java very much, so I'm not sure if a newer version or
different vendor will help.  I would prefer this if someone thinks it would
work and am open to suggestions for version.
 
Method 2: Install the developer tools, modify the StoredXss.java to read the
values to variables and recompile the site.  As I said, I'm not that
familiar with the java environment, so I'll have to feel my way through ant,
deployment etc.  In addition, I would be modifying the source for a
metrics/scoring site and that's not ideal.
 
Environment:
OS: Windows 2003 Standard SP1
WebGoat: 3.7 Release version
Java: Whatever came in the WebGoat zip.  The version on java.exe is 1.5.0
from Sun.
 
Any thoughts?
 
Thanks,
Chuck Byram
Empiric Design, Inc.
<A HREF="http://lists.owasp.org/mailman/listinfo/owasp-webgoat">chuckb at empiricdesign.com</A>
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.owasp.org/pipermail/owasp-webgoat/attachments/20051023/6e6cacf7/attachment.html">http://lists.owasp.org/pipermail/owasp-webgoat/attachments/20051023/6e6cacf7/attachment.html</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	
	<LI>Next message: <A HREF="000275.html">[OWASP-WEBGOAT]Fwd: Exception with starting Webgoat
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#274">[ date ]</a>
              <a href="thread.html#274">[ thread ]</a>
              <a href="subject.html#274">[ subject ]</a>
              <a href="author.html#274">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.owasp.org/mailman/listinfo/owasp-webgoat">More information about the Owasp-webgoat
mailing list</a><br>
</body></html>
