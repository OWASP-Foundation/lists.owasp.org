<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Owasp-webgoat] load() error trying to run WebGoat
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:owasp-webgoat%40lists.owasp.org?Subject=%5BOwasp-webgoat%5D%20load%28%29%20error%20trying%20to%20run%20WebGoat&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000365.html">
   <LINK REL="Next"  HREF="000367.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Owasp-webgoat] load() error trying to run WebGoat</H1>
    <B>Lea Viljanen</B> 
    <A HREF="mailto:owasp-webgoat%40lists.owasp.org?Subject=%5BOwasp-webgoat%5D%20load%28%29%20error%20trying%20to%20run%20WebGoat&In-Reply-To="
       TITLE="[Owasp-webgoat] load() error trying to run WebGoat">Lea.Viljanen at lavsecurity.fi
       </A><BR>
    <I>Thu Mar 15 06:39:15 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="000365.html">[Owasp-webgoat] WebGoat to Test WAFs
</A></li>
        <LI>Next message: <A HREF="000367.html">[Owasp-webgoat] Owasp-webgoat Digest, Vol 7, Issue 8
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#366">[ date ]</a>
              <a href="thread.html#366">[ thread ]</a>
              <a href="subject.html#366">[ subject ]</a>
              <a href="author.html#366">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I'm installing WebGoat to a Linux (Ubuntu Edgy) host with Tomcat 5.5 and 
Sun JDK 1.5 installed from standard Ubuntu repositories / multiverse.

I just downloaded the Unix standalone WebGoat.war from Google, modified 
the tomcat-users.xml and copied the .war file to 
/var/lib/tomcat5.5/webapps. No other tomcat configuration was changed, 
for example the default port 8180 is just fine for me.

However, when I start tomcat, WebGoat does not start, but gives an error 
in the log file:

15/03/2007 12:35:30 org.apache.catalina.startup.HostConfig deployWAR
INFO: Deploying web application archive WebGoat.war
- Marking servlet AdminServlet as unavailable
- Servlet /WebGoat threw load() exception
java.lang.ExceptionInInitializerError
         at 
org.apache.commons.discovery.jdk.JDKHooks.&lt;clinit&gt;(JDKHooks.java:75)
         at 
org.apache.commons.discovery.tools.DiscoverSingleton.find(DiscoverSingleton.java:412)
         at 
org.apache.commons.discovery.tools.DiscoverSingleton.find(DiscoverSingleton.java:378)
         at 
org.apache.axis.components.logger.LogFactory$1.run(LogFactory.java:45)
         at java.security.AccessController.doPrivileged(Native Method)
         at 
org.apache.axis.components.logger.LogFactory.getLogFactory(LogFactory.java:41)
         at 
org.apache.axis.components.logger.LogFactory.&lt;clinit&gt;(LogFactory.java:33)
         at 
org.apache.axis.transport.http.AxisServlet.&lt;clinit&gt;(AxisServlet.java:75)
         at java.lang.Class.forName0(Native Method)
         at java.lang.Class.forName(Class.java:164)
         at 
org.apache.axis.transport.http.AxisServletBase.class$(AxisServletBase.java:59)
         at 
org.apache.axis.transport.http.AxisServletBase.&lt;clinit&gt;(AxisServletBase.java:58)
         at 
sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
         at 
sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
         at 
sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
         at java.lang.reflect.Constructor.newInstance(Constructor.java:494)
         at java.lang.Class.newInstance0(Class.java:350)
         at java.lang.Class.newInstance(Class.java:303)
         at 
org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1055)
         at 
org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:932)
         at 
org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:3917)
         at 
org.apache.catalina.core.StandardContext.start(StandardContext.java:4201)
         at 
org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:759)
         at 
org.apache.catalina.core.ContainerBase.access$0(ContainerBase.java:743)
         at 
org.apache.catalina.core.ContainerBase$PrivilegedAddChild.run(ContainerBase.java:143)
         at java.security.AccessController.doPrivileged(Native Method)
         at 
org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:737)
         at 
org.apache.catalina.core.StandardHost.addChild(StandardHost.java:524)
         at 
org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:809)
         at 
org.apache.catalina.startup.HostConfig.deployWARs(HostConfig.java:698)
         at 
org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:472)
         at 
org.apache.catalina.startup.HostConfig.start(HostConfig.java:1122)
         at 
org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:310)
         at 
org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
         at 
org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1021)
         at 
org.apache.catalina.core.StandardHost.start(StandardHost.java:718)
         at 
org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1013)
         at 
org.apache.catalina.core.StandardEngine.start(StandardEngine.java:442)
         at 
org.apache.catalina.core.StandardService.start(StandardService.java:450)
         at 
org.apache.catalina.core.StandardServer.start(StandardServer.java:709)
         at org.apache.catalina.startup.Catalina.start(Catalina.java:551)
         at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
         at 
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
         at 
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
         at java.lang.reflect.Method.invoke(Method.java:585)
         at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:294)
         at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:432)
Caused by: java.security.AccessControlException: access denied 
(java.lang.RuntimePermission createClassLoader)
         at 
java.security.AccessControlContext.checkPermission(AccessControlContext.java:264)
         at 
java.security.AccessController.checkPermission(AccessController.java:427)
         at 
java.lang.SecurityManager.checkPermission(SecurityManager.java:532)
         at 
java.lang.SecurityManager.checkCreateClassLoader(SecurityManager.java:594)
         at java.lang.ClassLoader.&lt;init&gt;(ClassLoader.java:225)
         at 
org.apache.commons.discovery.jdk.PsuedoSystemClassLoader.&lt;init&gt;(PsuedoSystemClassLoader.java:73)
         at 
org.apache.commons.discovery.jdk.JDK12Hooks.findSystemClassLoader(JDK12Hooks.java:215)
         at 
org.apache.commons.discovery.jdk.JDK12Hooks.&lt;clinit&gt;(JDK12Hooks.java:73)
         ... 47 more

Tomcat itself is running ok. What is interesting that I managed to get 
the login box the first time, but no succesfull login and afterwards 
tomcat just says that /WebGoat resource (or /WebGoat/attack) is not 
available.

Is this a permission issue (java.security.Accesscontroller was there 
somewhere)? Do I have to tweak tomcat webapps policy files? The 
documentation was, hmm, weak on these points.

-- 
Lea Viljanen, GSNA &amp; CISSP
LAV Security Ltd, <A HREF="http://www.lavsecurity.fi/">http://www.lavsecurity.fi/</A>
+358 40 5500949
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000365.html">[Owasp-webgoat] WebGoat to Test WAFs
</A></li>
	<LI>Next message: <A HREF="000367.html">[Owasp-webgoat] Owasp-webgoat Digest, Vol 7, Issue 8
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#366">[ date ]</a>
              <a href="thread.html#366">[ thread ]</a>
              <a href="subject.html#366">[ subject ]</a>
              <a href="author.html#366">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.owasp.org/mailman/listinfo/owasp-webgoat">More information about the Owasp-webgoat
mailing list</a><br>
</body></html>
