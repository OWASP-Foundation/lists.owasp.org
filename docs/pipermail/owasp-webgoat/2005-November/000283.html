<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [OWASP-WEBGOAT]How to install WebGoat in the Browser Appliance VM with VMWare Player
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:owasp-webgoat%40lists.owasp.org?Subject=%5BOWASP-WEBGOAT%5DHow%20to%20install%20WebGoat%20in%20the%20Browser%20Appliance%20VM%20with%20VMWare%20Player&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000281.html">
   
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[OWASP-WEBGOAT]How to install WebGoat in the Browser Appliance VM with VMWare Player</H1>
    <B>Chuck</B> 
    <A HREF="mailto:owasp-webgoat%40lists.owasp.org?Subject=%5BOWASP-WEBGOAT%5DHow%20to%20install%20WebGoat%20in%20the%20Browser%20Appliance%20VM%20with%20VMWare%20Player&In-Reply-To="
       TITLE="[OWASP-WEBGOAT]How to install WebGoat in the Browser Appliance VM with VMWare Player">chuck.lists at gmail.com
       </A><BR>
    <I>Mon Nov 21 16:29:05 EST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="000281.html">[OWASP-WEBGOAT]Fwd: Exception with starting Webgoat
</A></li>
        
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#283">[ date ]</a>
              <a href="thread.html#283">[ thread ]</a>
              <a href="subject.html#283">[ subject ]</a>
              <a href="author.html#283">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi all,

   I was curious if this would work and it is quite easy, so here is a
document describing how to do it.  If anyone knows anything about the
licensing issues in the note below or knows where I could find a
minimal Linux VM (command line only) please let me know.  Of course,
let me know if there are any bugs in this document, too :-)

   I did notice when I installed WebGoat on Linux my Blind SQL
injection lession did not work.  I think I wrote that assuming that
WebGoat would be running on Windows so I will have to look at it again
to make it cross platform.  Sorry about that.

Chuck

Summary:

This document describes how to install WebGoat on the Browser
Appliance VM in VMWare Player.  VMWare Player is a no-cost program
that lets you run x86 Virtual Machines on a Windows or Linux computer.
 In this case, we will use an existing Ubuntu Linux virtual machine
provided by VMWare and add the JDK and WebGoat to it.  This will allow
you to run WebGoat in a controlled environment and not require the
installation of additional software and services on your host
computer.

Note from the document:

Eventually, it would be nice if OWASP could distribute a virtual
machine with WebGoat already installed and ready to go so hopefully
this document is just an interim solution.  A minimal Linux machine
for WebGoat would take significantly less disk space than the Browser
Appliance VM since WebGoat does not require X-Windows.  The advantage
of using the Browser Appliance is that VMWare Tools is installed
(which may give some performance benefit and I haven't read the VMWare
license close enough to know if you need special permission to
redistribute VMWare Tools).  I'm also not sure if permission is
required to redistribute the Java Development Kit (JDK - and I'm not
sure if the JDK is really required for WebGoat or if the JRE will
suffice).
-------------- next part --------------

How To Install WebGoat on VMWare Player using the Browser Appliance VM

By Chuck Willis - contact info available at www.securityfoundry.com

Last Updated: November 18, 2005

This document describes how to install WebGoat on the Browser Appliance VM in VMWare Player.  VMWare Player is a no-cost program that lets you run x86 Virtual Machines on a Windows or Linux computer.  In this case, we will use an existing Ubuntu Linux virtual machine provided by VMWare and add the JDK and WebGoat to it.  This will allow you to run WebGoat in a controlled environment and not require the installation of additional software and services on your host computer.

Eventually, it would be nice if OWASP could distribute a virtual machine with WebGoat already installed and ready to go so hopefully this document is just an interim solution.  A minimal Linux machine for WebGoat would take significantly less disk space than the Browser Appliance VM since WebGoat does not require X-Windows.  The advantage of using the Browser Appliance is that VMWare Tools is installed (which may give some performance benefit and I haven't read the VMWare license close enough to know if you need special permission to redistribute VMWare Tools).  I'm also not sure if permission is required to redistribute the Java Development Kit (JDK - and I'm not sure if the JDK is really required for WebGoat or if the JRE will suffice).

Requirements: I don't know the exact minimum space requirements for this, but I believe it will take at least 2 GB of hard disk space and when the VM is running it will take 256 MB of RAM (so the host computer should have at least 512 MB).

Here are the steps to go through.  I try to be specific in each step, but some details may have been left out....

- Download and Install VMWare Player from <A HREF="http://www.vmware.com/products/player/">http://www.vmware.com/products/player/</A> (approximately 29 MB)

- Download and Unzip Browser Appliance VM from <A HREF="http://www.vmware.com/vmtn/vm/browserapp.html">http://www.vmware.com/vmtn/vm/browserapp.html</A> (approximately 200 MB, unzips to approximately 840 MB)

- Rename Browser Appliance folder if desired (recommended if you plan to unzip the folder again to have a &quot;stock&quot; Browser Appliance)

- Open VMWare Player

- Open Browser-Appliance.vmx in VMWare Player

- By default, the newer versions of this VM runs in NAT networking mode, which is recommended so no other systems than the host OS will be able to access WebGoat.  If you have an older version of the VM that defaulted to &quot;Bridged&quot; networking, change to NAT by selecting (in menu bar of VMWare player - can be done while VM is booting) Devices -&gt; Ethernet -&gt; NAT

- Wait for VM to finish booting and Browser will appear.

-  Download and install Java JDK 1.5 from Sun (<A HREF="http://java.sun.com">http://java.sun.com</A>)

	- Go to <A HREF="http://java.sun.com/j2se/1.5.0/download.jsp">http://java.sun.com/j2se/1.5.0/download.jsp</A>
	- Click Download JDK 5.0
	- Read license.  If you accept, click Accept License
	- Select Linux self-extracting installer (it will be saved to the Desktop - this document assumes it is named jdk-1_5_0_05-linux-i586.bin)

- Open a root terminal (Applications -&gt; System Tools -&gt; Root Terminal (and enter password of VMWare)

- change to Desktop directory - cd Desktop

- Move Java file to /usr/local 
# mv jdk-1_5_0_05-linux-i586.bin /usr/local

- Change to /usr/local
# cd /usr/local

- Run jdk installer 
# sh jdk-1_5_0_05-linux-i586.bin

	- Read license agreement

	- If you agree to license, type yes 
	
	- Let it install.... it will create a directory /usr/local/jdk1.5.0_05 (or perhaps a different version number)

	- You can delete the jdk-1_5_0_05-linux-i586.bin file if desired
	
- Go to back to your browser window and go to <A HREF="http://www.owasp.org/software/webgoat.html">http://www.owasp.org/software/webgoat.html</A>

- Follow links and download Unix_WebGoat-x.x.zip (x.x is most recent version - as of November 2005 it is 3.7 - this file will be saved to the Desktop)

- In Root prompt (which is still in /usr/local directory), make a webgoat subdirectory
# mkdir webgoat

- Change to webgoat directory
# cd webgoat

- Move webgoat .zip file into this directory
# mv /home/vmware/Desktop/Unix_WebGoat-x.x.zip .
	
- Unzip the Unix_WebGoat-x.x.zip 
# unzip Unix_WebGoat-x.x.zip

- Edit the following line in webgoat.sh, set JAVA_HOME to your JDK1.5 path.  
# nano webgoat.sh

change _BOTH_ lines that say:
	JAVA_HOME=&quot;SET ME TO YOUR JAVA 1.5 JDK PATH&quot;
to
	JAVA_HOME=&quot;/usr/local/jdk1.5.0_05&quot;

	Hit Control-X to exit, answer Y to save changes

- Test that webgoat starts: start webgoat 
# sh webgoat.sh start

- determine your IP address:
# ifconfig

- In HOST os, go to <A HREF="http://(ip">http://(ip</A>)/WebGoat/attack (Notice the capital 'W' and 'G')

- login in as: user = guest, password = guest

If you see the webgoat screen, you have done everything right.  You can stop here if you would like to start webgoat manually.  

There are a few more optional steps below.

If you would like webgoat to start automatically when the vm boots:
- Create a webgoat startup file with 
# nano /etc/init.d/webgoat

and include the lines:

	cd /usr/local/webgoat 
	sh /usr/local/webgoat/webgoat.sh $1

# chmod u+x /etc/init.d/webgoat

# update-rc.d webgoat start 99 2 .

(Optional) You can save some memory by not having X-Windows start when you boot the vm.  Do that by disabling gdm (ubuntu runs X at all runlevels so editing inittab doesn't work):

# update-rc.d -f gdm remove

Reboot the system and see if it works.  If everything is working, you may want to turn the vm's disk into a &quot;nonpersisent&quot; one where the system will be restored to the current state on each boot.  This can make using WebGoat more fun because it allows you to attack the system and run all sorts of interesting and destructive commands knowing that you will not cause any damage that a reboot won't fix.  It also will make WebGoat forget your progress on each reboot, so the &quot;Report Card&quot; function will be of limited usefulness.  

If you would like to make the machine non-persistent:
- Shutdown the VM gracefully and exit VMWare player
- Open Browser-Appliance.vmx in a text editor and add the following line at the end:

scsi0:0.mode = &quot;independent-nonpersistent&quot;

If you do not make the disk nonpersistent, it is recommended that you create a copy or .zip archive of the configured VM's directory so that it can be restored if the system is corrupted during attacks. 

That should cover everything.  Good luck and have fun.

Chuck Willis
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000281.html">[OWASP-WEBGOAT]Fwd: Exception with starting Webgoat
</A></li>
	
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#283">[ date ]</a>
              <a href="thread.html#283">[ thread ]</a>
              <a href="subject.html#283">[ subject ]</a>
              <a href="author.html#283">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.owasp.org/mailman/listinfo/owasp-webgoat">More information about the Owasp-webgoat
mailing list</a><br>
</body></html>
