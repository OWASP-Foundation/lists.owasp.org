<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [OWASP-WEBGOAT]How to create a new lesson
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:owasp-webgoat%40lists.owasp.org?Subject=%5BOWASP-WEBGOAT%5DHow%20to%20create%20a%20new%20lesson&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000104.html">
   <LINK REL="Next"  HREF="000106.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[OWASP-WEBGOAT]How to create a new lesson</H1>
    <B>Bruce Mayhew</B> 
    <A HREF="mailto:owasp-webgoat%40lists.owasp.org?Subject=%5BOWASP-WEBGOAT%5DHow%20to%20create%20a%20new%20lesson&In-Reply-To="
       TITLE="[OWASP-WEBGOAT]How to create a new lesson">bruce.mayhew at aspectsecurity.com
       </A><BR>
    <I>Sun Jan 19 09:08:22 EST 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="000104.html">[OWASP-WEBGOAT]Newbie Install Question
</A></li>
        <LI>Next message: <A HREF="000106.html">[OWASP-WEBGOAT]NEW WebGoat installers via CVS
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#105">[ date ]</a>
              <a href="thread.html#105">[ thread ]</a>
              <a href="subject.html#105">[ subject ]</a>
              <a href="author.html#105">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>How to write a new WebGoat lesson

All you have to do is implement the abstract methods in LessonAdapter.  I have
put together an outline below.

WebGoat uses the Element Construction Set from the Jakarta project.  You should read up
on the API for ECS at <A HREF="http://www.peerfear.org/alexandria/content/html/javadoc/ecs/HEAD/index.html.">http://www.peerfear.org/alexandria/content/html/javadoc/ecs/HEAD/index.html.</A>
In addition you can look at the other lessons for examples of how to use the ECS.



Step 1: Set up the framework

		import java.util.*;
		import org.apache.ecs.*;
		import org.apache.ecs.html.*;
		
		/**
		 *  Copyright (c) 2002 Free Software Foundation developed under the custody of the Open Web
		 *  Application Security Project (<A HREF="http://www.owasp.org">http://www.owasp.org</A>) This software package is published by OWASP
		 *  under the GPL. You should read and accept the LICENSE before you use, modify and/or redistribute
		 *  this software.
		 *
		 * @author     <A HREF="http://lists.owasp.org/mailman/listinfo/owasp-webgoat">jwilliams at aspectsecurity.com</A>
		 * @created    November 6, 2002
		 */
		public class NewLesson extends LessonAdapter
		{
		
			protected Element createContent(WebSession s)
			{
				return( new StringElement( &quot;Hello World&quot; ) );
			}
		
			public String getCategory()
			{
			}
		
			protected List getHints()
			{
			}
		
			protected String getInstructions()
			{
			}
		
			protected Element getMenuItem()
			{
			}
		
			protected Integer getRanking()
			{
			}
		
			public String getTitle()
			{
			}
		}
		


Step 2: Implement createContent

Creating the content for a lesson is fairly simple. There are two main parts: 
	(1) handling the input from the user's last request, 
	(2) generating the next screen for the user.  
This all happens within the createContent method.  Remember that each lesson should be
handled on a single page, so you'll need to design your lesson to work that way.  
A good generic pattern for the createContent method is shown below:

		// define a constant for the field name
		private static final String INPUT = &quot;input&quot;;
		
		protected Element createContent(WebSession s)
		{
			ElementContainer ec = new ElementContainer();
			try
			{
				// get some input from the user -- see ParameterParser for details
				String userInput = s.getParser().getStringParameter(INPUT, &quot;&quot;);

				// do something with the input
				//   -- SQL query?
				//   -- Runtime.exec?
				//   -- Some other dangerous thing
				
				// generate some output -- a string and an input field
				ec.addElement(new StringElement(&quot;Enter a string: &quot;));
				ec.addElement( new Input(Input.TEXT, INPUT, userInput) );
			}
			catch (Exception e)
			{
				s.setMessage(&quot;Error generating &quot; + this.getClass().getName());
				e.printStackTrace();
			}
			return (ec);
		}
	
ECS is quite powerful -- see the Encoding lesson for an example of how to use it to create a table
with rows and rows of output.


Step 3: Implement the other methods

The other methods in the LessonAdapter class help the lesson plug into the overall
WebGoat framework.  They are simple and should only take a few minutes to implement.

			public String getCategory()
			{
				// The default category is &quot;General&quot; Only override this
				// method if you wish to create a new category or if you
				// wish this lesson to reside within a category other the
				// &quot;General&quot;
				
				return( &quot;NewCategory&quot; );  // or use an existing category
			}
		
			protected List getHints()
			{
				// Hints will be returned to the user in the order they 
				// appear below.  The user must click on the &quot;next hint&quot;
				// button before the hint will be displayed.
				
				List hints = new ArrayList();
				hints.add(&quot;A general hint to put users on the right track&quot;);
				hints.add(&quot;A hint that gives away a little piece of the problem&quot;);
				hints.add(&quot;A hint that basically gives the answer&quot;);
				return hints;
			}
		
			protected String getInstructions()
			{
				// Instructions will rendered as html and will appear below
				// the area and above the actual lesson area.
				// Instructions should provide the user with the general setup
				// and goal of the lesson.
				
				return(&quot;The text that goes at the top of the page&quot;);
			}
		
			protected Element getMenuItem()
			{
				// This is the text of the link that will appear on
				// the left hand menus under the appropriate category.
				// Their is a limited amount of horizontal space in
				// this area before wrapping will occur.
				
				return( &quot;MyLesson&quot; );
			}
		
			protected Integer getRanking()
			{
				// The ranking denotes the order in which the menu item
				// will appear in menu list for each category.  The lowest
				// number will appear as the first lesson.
				
				return new Integer(10);
			}

			public String getTitle()
			{
				// The title of the lesson.  This will appear above the
				// control area at the top of the page.  This field will
				// be rendered as html.
				
				return (&quot;My Lesson's Short Title&quot;);
			}


Step 4: Build and test

Once you've implemented your new lesson, you can use ant to build and deploy your new web
application.  First you want to remove the webgoat .war *AND* the webgoat directory from
your webapps directory.  Then, from your webgoat directory, type:

	&gt; ant install
	
This will compile your new lesson and &quot;install&quot; the path into Tomcat.  You only need to &quot;install&quot;
once.  If you make changes to the web application and want to test them, you can use:

	&gt; ant reload



	
Step 5: Give back to the community

If you've come up with a lesson that you think helps to teach people about web application
security, please contribute it by sending it to the people who maintain the WebGoat application.

Thanks!


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.owasp.org/pipermail/owasp-webgoat/attachments/20030119/ea2d8350/attachment.html">http://lists.owasp.org/pipermail/owasp-webgoat/attachments/20030119/ea2d8350/attachment.html</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000104.html">[OWASP-WEBGOAT]Newbie Install Question
</A></li>
	<LI>Next message: <A HREF="000106.html">[OWASP-WEBGOAT]NEW WebGoat installers via CVS
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#105">[ date ]</a>
              <a href="thread.html#105">[ thread ]</a>
              <a href="subject.html#105">[ subject ]</a>
              <a href="author.html#105">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.owasp.org/mailman/listinfo/owasp-webgoat">More information about the Owasp-webgoat
mailing list</a><br>
</body></html>
