<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Owasp-webgoat] ecs dependency resolved
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:owasp-webgoat%40lists.owasp.org?Subject=Re%3A%20%5BOwasp-webgoat%5D%20ecs%20dependency%20resolved&In-Reply-To=%3C554D0EB9.2020601%40owasp.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   
   <LINK REL="Next"  HREF="000787.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Owasp-webgoat] ecs dependency resolved</H1>
    <B>Jason White</B> 
    <A HREF="mailto:owasp-webgoat%40lists.owasp.org?Subject=Re%3A%20%5BOwasp-webgoat%5D%20ecs%20dependency%20resolved&In-Reply-To=%3C554D0EB9.2020601%40owasp.org%3E"
       TITLE="[Owasp-webgoat] ecs dependency resolved">jason.white at owasp.org
       </A><BR>
    <I>Fri May  8 19:30:01 UTC 2015</I>
    <P><UL>
        
        <LI>Next message: <A HREF="000787.html">[Owasp-webgoat] ecs dependency resolved
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#786">[ date ]</a>
              <a href="thread.html#786">[ thread ]</a>
              <a href="subject.html#786">[ subject ]</a>
              <a href="author.html#786">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>(pushing discussion back onto the list)

This is all I get from:
$ mvn -U dependency:tree -Dverbose

[INFO] Scanning for projects...
[INFO]

[INFO]
------------------------------------------------------------------------
[INFO] Building access-control-matrix 1.0
[INFO]
------------------------------------------------------------------------
[INFO]
[INFO] --- maven-dependency-plugin:2.1:tree (default-cli) @
access-control-matrix ---
[INFO] org.owasp.webgoat.lesson:access-control-matrix:jar:1.0
[INFO] \- org.owasp.webgoat:webgoat-container:jar:classes:6.1.0:provided
[INFO]
------------------------------------------------------------------------
[INFO] BUILD SUCCESS
------------------------------------------------------------------------


I pushed my merged changes to my fork
(<A HREF="https://github.com/misfir3/WebGoat-Lessons">https://github.com/misfir3/WebGoat-Lessons</A>).  I have been
fetching/merging from upstream WebGoat/WebGoat-Lessons.

Jason

On 05/08/2015 02:25 AM, Nanne Baars wrote:
&gt;<i> Hi Jason,
</I>&gt;<i> 
</I>&gt;<i> Can you execute the `mvn dependency:tree` command in for example the
</I>&gt;<i> access-control-matrix project, this should give something like:
</I>&gt;<i> 
</I>&gt;<i> org.owasp.webgoat.lesson:access-control-matrix:jar:1.0              
</I>&gt;<i> \- org.owasp.webgoat:webgoat-container:jar:classes:6.1.0:provided   
</I>&gt;<i>    +- javax.activation:activation:jar:1.1:provided                  
</I>&gt;<i>    +- axis:axis:jar:1.2:provided                                    
</I>&gt;<i>    +- axis:axis-saaj:jar:1.2:provided                               
</I>&gt;<i>    +- axis:axis-jaxrpc:jar:1.2:provided                             
</I>&gt;<i>    +- axis:axis-ant:jar:1.2:provided                                
</I>&gt;<i>    +- org.apache.commons:commons-lang3:jar:3.3.2:provided           
</I>&gt;<i>    +- commons-fileupload:commons-fileupload:jar:1.2.2:provided      
</I>&gt;<i>    +- commons-io:commons-io:jar:1.3.2:provided                      
</I>&gt;<i>    +- commons-collections:commons-collections:jar:3.1:provided      
</I>&gt;<i>    +- commons-digester:commons-digester:jar:1.8.1:provided          
</I>&gt;<i>    |  \- commons-beanutils:commons-beanutils:jar:1.8.0:provided     
</I>&gt;<i>    +- commons-logging:commons-logging:jar:1.1.3:provided            
</I>&gt;<i>    +- org.slf4j:jcl-over-slf4j:jar:1.7.7:provided                   
</I>&gt;<i>    +- commons-discovery:commons-discovery:jar:0.2:provided          
</I>&gt;<i>    +- javax.mail:mail:jar:1.4.2:provided                            
</I>&gt;<i>    +- javax.mail:mailapi:jar:1.4.2:provided                         
</I>&gt;<i>    +- hsqldb:hsqldb:jar:1.8.0.10:provided                           
</I>&gt;<i>    +- log4j:log4j:jar:1.2.17:provided                               
</I>&gt;<i>    +- wsdl4j:wsdl4j:jar:1.5.1:provided                              
</I>&gt;<i>    +- java2html:j2h:jar:1.3.1:provided                              
</I>&gt;<i>    +- ecs:ecs:jar:1.4.2:provided                                    
</I>&gt;<i>     ..........
</I>&gt;<i> 
</I>&gt;<i> The jar for ecs should be there.
</I>&gt;<i> 
</I>&gt;<i> Thanks,
</I>&gt;<i> --Nanne
</I>&gt;<i> 
</I>&gt;&gt;<i> Date: Thu, 7 May 2015 18:50:17 -0400
</I>&gt;&gt;<i> From: <A HREF="https://lists.owasp.org/mailman/listinfo/owasp-webgoat">jason.white at owasp.org</A>
</I>&gt;&gt;<i> To: <A HREF="https://lists.owasp.org/mailman/listinfo/owasp-webgoat">bmayhew at sonatype.com</A>; <A HREF="https://lists.owasp.org/mailman/listinfo/owasp-webgoat">nanne.baars at outlook.com</A>
</I>&gt;&gt;<i> CC: <A HREF="https://lists.owasp.org/mailman/listinfo/owasp-webgoat">lawson89 at gmail.com</A>
</I>&gt;&gt;<i> Subject: Re: ecs dependency resolved
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Decided to move back over the new forked repos after some other local UI
</I>&gt;&gt;<i> changes:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Rebuilt from the core/container (mvn -U clean package)
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> ran ..
</I>&gt;&gt;<i> $ mvn install:install-file
</I>&gt;&gt;<i>
</I>&gt;<i> -Dfile=/home/jason/code/webgoat-core-misfir3/target/webgoat-container-6.1.0-classes.jar
</I>&gt;&gt;<i> -DgroupId=org.owasp.webgoat -DartifactId=webgoat-container
</I>&gt;&gt;<i> -Dclassifier=classes -Dversion=6.1.0 -Dpackaging=jar
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Then in the lessons project ...
</I>&gt;&gt;<i> $ mvn -U clean package
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I still get ...
</I>&gt;&gt;<i> [INFO] BUILD FAILURE
</I>&gt;&gt;<i> [INFO]
</I>&gt;&gt;<i> ------------------------------------------------------------------------
</I>&gt;&gt;<i> [INFO] Total time: 1.986s
</I>&gt;&gt;<i> [INFO] Finished at: Thu May 07 18:43:45 EDT 2015
</I>&gt;&gt;<i> [INFO] Final Memory: 16M/211M
</I>&gt;&gt;<i> [INFO]
</I>&gt;&gt;<i> ------------------------------------------------------------------------
</I>&gt;&gt;<i> [ERROR] Failed to execute goal
</I>&gt;&gt;<i> org.apache.maven.plugins:maven-compiler-plugin:3.1:compile
</I>&gt;&gt;<i> (default-compile) on project access-control-matrix: Compilation failure:
</I>&gt;&gt;<i> Compilation failure:
</I>&gt;&gt;<i> [ERROR]
</I>&gt;&gt;<i>
</I>&gt;<i> /home/jason/code/webgoat-lessons-misfir3/access-control-matrix/src/main/java/org/owasp/webgoat/plugin/AccessControlMatrix.java:[4,22]
</I>&gt;&gt;<i> package org.apache.ecs does not exist
</I>&gt;&gt;<i> [ERROR]
</I>&gt;&gt;<i>
</I>&gt;<i> /home/jason/code/webgoat-lessons-misfir3/access-control-matrix/src/main/java/org/owasp/webgoat/plugin/AccessControlMatrix.java:[5,22]
</I>&gt;&gt;<i> package org.apache.ecs does not exist
</I>&gt;&gt;<i> [ERROR]
</I>&gt;&gt;<i>
</I>&gt;<i> /home/jason/code/webgoat-lessons-misfir3/access-control-matrix/src/main/java/org/owasp/webgoat/plugin/AccessControlMatrix.java:[6,27]
</I>&gt;&gt;<i> package org.apache.ecs.html does not exist
</I>&gt;&gt;<i> ...
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Gonna keep working UI in the other local project in the meantime.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Cheers,
</I>&gt;&gt;<i> Jason
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> On 05/03/2015 10:20 AM, Bruce Mayhew wrote:
</I>&gt;&gt;<i> &gt; BTW - don;t worry about why my lesson images did;t load. I spelled my
</I>&gt;&gt;<i> &gt; class name wrong for the java file :)
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; On Sun, May 3, 2015 at 10:17 AM, Bruce Mayhew &lt;<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-webgoat">bmayhew at sonatype.com</A>
</I>&gt;&gt;<i> &gt; &lt;mailto:<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-webgoat">bmayhew at sonatype.com</A>&gt;&gt; wrote:
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; I've merged in your changes to my branch and the master. They work
</I>&gt;&gt;<i> &gt; fine.
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; In the process of testing the template lesson, I noticed the images
</I>&gt;&gt;<i> &gt; were not loading correctly, I'm still looking at that. Looking at
</I>&gt;&gt;<i> &gt; the code for rewritePaths I noticed
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; public void rewritePaths(Path pluginTarget) {
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; try {
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; PluginFileUtils.replaceInFiles(this.lesson.getSimpleName() +
</I>&gt;&gt;<i> &gt; &quot;_files&quot;, pluginTarget.getFileName().toString() + &quot;/plugin/&quot; +
</I>&gt;&gt;<i> &gt; this.lesson.getSimpleName() + &quot;/lessonSolutions/en/&quot; +
</I>&gt;&gt;<i> &gt; this.lesson.getSimpleName() + &quot;_files&quot;, solutionLanguageFiles.values());
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; PluginFileUtils.replaceInFiles(this.lesson.getSimpleName() +
</I>&gt;&gt;<i> &gt; &quot;_files&quot;, pluginTarget.getFileName().toString() + &quot;/plugin/&quot; +
</I>&gt;&gt;<i> &gt; this.lesson.getSimpleName() + &quot;/lessonPlans/en/&quot; +
</I>&gt;&gt;<i> &gt; this.lesson.getSimpleName() + &quot;_files&quot;,
</I>&gt;&gt;<i> &gt; lessonPlansLanguageFiles.values());
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; } catch (IOException e) {
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; thrownewPluginLoadingFailure(&quot;Unable to rewrite the
</I>&gt;&gt;<i> &gt; paths in the solutions&quot;, e);
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; }
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; }
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; that only the english (en) paths get rewritten. We should probably
</I>&gt;&gt;<i> &gt; use the locale instead of en.
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; Bruce
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; On Sun, May 3, 2015 at 2:04 AM, Nanne Baars &lt;<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-webgoat">nanne.baars at outlook.com</A>
</I>&gt;&gt;<i> &gt; &lt;mailto:<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-webgoat">nanne.baars at outlook.com</A>&gt;&gt; wrote:
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; Checked my local repository and I also had an old jar file in
</I>&gt;&gt;<i> &gt; the repository, removed that one and made the following change
</I>&gt;&gt;<i> &gt; to webgoat-container pom.xml:
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; &lt;plugin&gt;
</I>&gt;&gt;<i> &gt; &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;
</I>&gt;&gt;<i> &gt; &lt;version&gt;2.6&lt;/version&gt;
</I>&gt;&gt;<i> &gt; &lt;configuration&gt;
</I>&gt;&gt;<i> &gt; &lt;attachClasses&gt;true&lt;/attachClasses&gt;
</I>&gt;&gt;<i> &gt; &lt;/configuration&gt;
</I>&gt;&gt;<i> &gt; &lt;/plugin&gt;
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; This attaches a jar file to the project as an additional
</I>&gt;&gt;<i> &gt; artifact. The maven builder-helper-plugin also uploads the jar
</I>&gt;&gt;<i> &gt; file to a remote repository.
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; In the lesson project I changed the dependency to:
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; &lt;dependency&gt;
</I>&gt;&gt;<i> &gt; &lt;groupId&gt;org.owasp.webgoat&lt;/groupId&gt;
</I>&gt;&gt;<i> &gt; &lt;artifactId&gt;webgoat-container&lt;/artifactId&gt;
</I>&gt;&gt;<i> &gt; &lt;version&gt;6.1.0&lt;/version&gt;
</I>&gt;&gt;<i> &gt; &lt;classifier&gt;classes&lt;/classifier&gt;
</I>&gt;&gt;<i> &gt; &lt;scope&gt;provided&lt;/scope&gt;
</I>&gt;&gt;<i> &gt; &lt;/dependency&gt;
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; So this one depends on webgoat-container-6.1.0-classes.jar
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; I cleaned up the dependencies of the lessons cleaned my local
</I>&gt;&gt;<i> &gt; repository and build everything again it seems to work.
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; @Bruce: can you verify this and merge the container and lessons
</I>&gt;&gt;<i> &gt; project?
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; --Nanne
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; ------------------------------------------------------------------------
</I>&gt;&gt;<i> &gt; Date: Sat, 2 May 2015 19:59:38 -0400
</I>&gt;&gt;<i> &gt; Subject: ecs dependency resolved
</I>&gt;&gt;<i> &gt; From: <A HREF="https://lists.owasp.org/mailman/listinfo/owasp-webgoat">bmayhew at sonatype.com</A> &lt;mailto:<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-webgoat">bmayhew at sonatype.com</A>&gt;
</I>&gt;&gt;<i> &gt; To: <A HREF="https://lists.owasp.org/mailman/listinfo/owasp-webgoat">jason.white at owasp.org</A> &lt;mailto:<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-webgoat">jason.white at owasp.org</A>&gt;;
</I>&gt;&gt;<i> &gt; <A HREF="https://lists.owasp.org/mailman/listinfo/owasp-webgoat">nanne.baars at outlook.com</A> &lt;mailto:<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-webgoat">nanne.baars at outlook.com</A>&gt;;
</I>&gt;&gt;<i> &gt; <A HREF="https://lists.owasp.org/mailman/listinfo/owasp-webgoat">lawson89 at gmail.com</A> &lt;mailto:<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-webgoat">lawson89 at gmail.com</A>&gt;
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; I figure out why Jason was getting the ecs dependency error. I
</I>&gt;&gt;<i> &gt; changed the packaging of the webgoat-container to a war file a
</I>&gt;&gt;<i> &gt; bit ago. Nanne and I must have had an older jar file in our m2
</I>&gt;&gt;<i> &gt; repo so when we compiled there was no error. After going
</I>&gt;&gt;<i> &gt; through all the poms today for a different reason and moving the
</I>&gt;&gt;<i> &gt; webgoat-container dependency to the parent pom only. I started
</I>&gt;&gt;<i> &gt; to see the same ECS error.
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; It turns out that a war file as a dependency is not the same as
</I>&gt;&gt;<i> &gt; a jar file. There are multiple ways to fix this. I went with
</I>&gt;&gt;<i> &gt; changing the WebGot pom back to generating a jar file. removed
</I>&gt;&gt;<i> &gt; all the webgoat-container dependencies in the lesson poms.
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; Everything builds fine and I think the lessons should inherit
</I>&gt;&gt;<i> &gt; the webgoat-container dependency from the parent anyhow.
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; I still need to test all this and get it checked in but should
</I>&gt;&gt;<i> &gt; be doing that later tonight for the lessons.
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; **** Update *****
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; Turns out the mvn:tomcat7:run-war expects a war file. go figure.
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; It also turns out you can add an ignorePackaging to run a jar
</I>&gt;&gt;<i> &gt; file with run-war. However, the jar file doesn't extract like
</I>&gt;&gt;<i> &gt; the war file does. sigh....
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; Might not get the changes in tonight!
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; Bruce
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt;
</I></PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	
	<LI>Next message: <A HREF="000787.html">[Owasp-webgoat] ecs dependency resolved
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#786">[ date ]</a>
              <a href="thread.html#786">[ thread ]</a>
              <a href="subject.html#786">[ subject ]</a>
              <a href="author.html#786">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.owasp.org/mailman/listinfo/owasp-webgoat">More information about the Owasp-webgoat
mailing list</a><br>
</body></html>
