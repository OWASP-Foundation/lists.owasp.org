<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Owasp-appsensor-project] AppSensor API Questions (Node.js	Demonstration Implementation)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:owasp-appsensor-project%40lists.owasp.org?Subject=Re%3A%20%5BOwasp-appsensor-project%5D%20AppSensor%20API%20Questions%20%28Node.js%0A%09Demonstration%20Implementation%29&In-Reply-To=%3CCACHuFzaL7SpW54h%3DE32Zvd5%3D9h1nQrssay31KuAYk8%3DnTwjZsQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000725.html">
   <LINK REL="Next"  HREF="000727.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Owasp-appsensor-project] AppSensor API Questions (Node.js	Demonstration Implementation)</H1>
    <B>Chetan Karande</B> 
    <A HREF="mailto:owasp-appsensor-project%40lists.owasp.org?Subject=Re%3A%20%5BOwasp-appsensor-project%5D%20AppSensor%20API%20Questions%20%28Node.js%0A%09Demonstration%20Implementation%29&In-Reply-To=%3CCACHuFzaL7SpW54h%3DE32Zvd5%3D9h1nQrssay31KuAYk8%3DnTwjZsQ%40mail.gmail.com%3E"
       TITLE="[Owasp-appsensor-project] AppSensor API Questions (Node.js	Demonstration Implementation)">chetan.karande at owasp.org
       </A><BR>
    <I>Sun Apr  6 04:13:54 UTC 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="000725.html">[Owasp-appsensor-project] AppSensor Guide v2.0 - Last call for &quot;whole section&quot; contributions
</A></li>
        <LI>Next message: <A HREF="000727.html">[Owasp-appsensor-project] AppSensor API Questions (Node.js	Demonstration Implementation)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#726">[ date ]</a>
              <a href="thread.html#726">[ thread ]</a>
              <a href="subject.html#726">[ subject ]</a>
              <a href="author.html#726">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>John,

Based on the sample apps you have added (which were very helpful), I
attempted to build initial version of nodejs client in a forked repository:

<A HREF="https://github.com/ckarande/appsensor/tree/master/sample-apps/simple-nodejs-ws-rest-client">https://github.com/ckarande/appsensor/tree/master/sample-apps/simple-nodejs-ws-rest-client</A>

I didn't verify end-to-end behavior yet, but thought of sharing it to get
your feedback and to know if I am on the right track.

Also, I noticed webSocket is used for sample dashboard implementation. Do
you plan for using webSockets even on AppSensor server as an alternate
option to REST APIs, so that responses can be pushed without client polling
for it?

Best,

Chetan

On Mon, Mar 17, 2014 at 1:25 AM, John Melton &lt;<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-appsensor-project">jtmelton at gmail.com</A>&gt; wrote:

&gt;<i> Chetan,
</I>&gt;<i> Replying to this on list since Colin had asked for an example json snippet
</I>&gt;<i> at one point. A sample JSON string for adding a new event is below.
</I>&gt;<i>
</I>&gt;<i> {&quot;user&quot;:{&quot;username&quot;:&quot;SOME_END_USERNAME&quot;},&quot;detectionPoint&quot;:{&quot;id&quot;:&quot;SOME_DETECTION_POINT_ID&quot;},&quot;timestamp&quot;:
</I>&gt;<i> SOME_UNIX_TIMESTAMP }
</I>&gt;<i>
</I>&gt;<i> The only additional point to note is that you have to make the request
</I>&gt;<i> with an http request header. The default key for that header is 'X-Appsensor-Client-Application-Name'
</I>&gt;<i> and the value would be the name of the client application being used.
</I>&gt;<i>
</I>&gt;<i> For further info check the addRecord method at
</I>&gt;<i> <A HREF="https://github.com/jtmelton/appsensor/blob/master/sample-apps/simple-dashboard/src/main/webapp/index.jsp.">https://github.com/jtmelton/appsensor/blob/master/sample-apps/simple-dashboard/src/main/webapp/index.jsp.</A>
</I>&gt;<i> Thanks,
</I>&gt;<i> John
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On Sun, Mar 16, 2014 at 11:40 PM, Chetan Karande &lt;<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-appsensor-project">chetan.karande at owasp.org</A>
</I>&gt;<i> &gt; wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> Great. Thank you  John.
</I>&gt;&gt;<i> On Mar 16, 2014 11:37 PM, &quot;John Melton&quot; &lt;<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-appsensor-project">jtmelton at gmail.com</A>&gt; wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Chetan,
</I>&gt;&gt;&gt;<i> Good question. I've been working on the code. I'm actually pushing some
</I>&gt;&gt;&gt;<i> code right now, then I'll send out a group email with some updates. I
</I>&gt;&gt;&gt;<i> haven't pulled out the JSON structure yet, but I'll try to get some basic
</I>&gt;&gt;&gt;<i> examples together and documented and send it to the list in the next couple
</I>&gt;&gt;&gt;<i> days.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Thanks,
</I>&gt;&gt;&gt;<i> John
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> On Sun, Mar 16, 2014 at 10:57 PM, Chetan Karande &lt;
</I>&gt;&gt;&gt;<i> <A HREF="https://lists.owasp.org/mailman/listinfo/owasp-appsensor-project">chetan.karande at owasp.org</A>&gt; wrote:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Hi John,
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> I was side tracked due to other priorities for a while, and wanted to
</I>&gt;&gt;&gt;&gt;<i> resume working in AppSensor reference implementation in Node.js.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> As per our last conversation, you were going to work on adding a sample
</I>&gt;&gt;&gt;&gt;<i> app and include minimum required json message structure as part the tech
</I>&gt;&gt;&gt;&gt;<i> documentation. Just wanted to check if you had chance to do any progress on
</I>&gt;&gt;&gt;&gt;<i> that.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Thank you.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Best Regards,
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Chetan Karande
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> <A HREF="https://lists.owasp.org/mailman/listinfo/owasp-appsensor-project">chetan.karande at owasp.org</A>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> OWASP NYC Local Chapter &lt;<A HREF="https://www.owasp.org/index.php/NYC">https://www.owasp.org/index.php/NYC</A>&gt;
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Open Web Application Security Project&lt;<A HREF="https://www.owasp.org/index.php/Main_Page">https://www.owasp.org/index.php/Main_Page</A>&gt;
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> On Mon, Dec 9, 2013 at 2:42 AM, John Melton &lt;<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-appsensor-project">jtmelton at gmail.com</A>&gt; wrote:
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> Chetan,
</I>&gt;&gt;&gt;&gt;&gt;<i> Awesome to see what you're coming up with.
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> With respect to your questions, I responded inline below, but also
</I>&gt;&gt;&gt;&gt;&gt;<i> wanted to mention that one task I have for Colin is to give him the minimum
</I>&gt;&gt;&gt;&gt;&gt;<i> json structure needed so it can be documented. I'll also put that in the
</I>&gt;&gt;&gt;&gt;&gt;<i> tech documentation as well.
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> Thanks,
</I>&gt;&gt;&gt;&gt;&gt;<i> John
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> On Sun, Dec 8, 2013 at 6:07 PM, Chetan Karande &lt;
</I>&gt;&gt;&gt;&gt;&gt;<i> <A HREF="https://lists.owasp.org/mailman/listinfo/owasp-appsensor-project">chetan.karande at owasp.org</A>&gt; wrote:
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> Hi John,
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> I started exploring the AppSensor code on github and went over the
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> AppSensor Guide document. It helped me in getting more idea about AppSensor
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> in general. I have a few questions for you specifically about approaching
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> Node.js demonstration implementation. Please answer when you get chance:
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> Question 1. As per on our earlier email conversation, I explored
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> more on implementing addEvent() and getResponses() methods in Node.js
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> app. Based on the AppSensor REST Service code on github, I think the
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> service expects client using following endpoints and JSON
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> message structures. Can you please confirm if I am on right track, and
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> answer question highlighted.
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> *addEvent() Implementation:*
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> *======================*
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> *Invoke REST Endpoint:* /api/v1.0/events
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> *Sample Event JSON Object to be sent from the Node.js  App:*
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> {
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> user: {
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> username: &quot;&quot;
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>  ipAddress: &quot;&quot;
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> },
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> detectionPoint : {  // ??? Does Node.js client need to populate this
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> object? If yes, what goes in responses, how to decide threshold?
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> All that is needed in the detectionPoint object field is the &quot;id&quot;
</I>&gt;&gt;&gt;&gt;&gt;<i> field. The rest is found server-side.
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>  id: &quot;&quot;,
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> threshold: &quot;&quot;,
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> responses: []
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>  },
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> timestamp: &quot;&quot;,
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> detectionSystemId: &quot;&quot;,
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>  resource: &quot;&quot;,
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> eventType: &quot;&quot;
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> }
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> *getResponses() Implementation:*
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> *=========================*
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> *Poll REST EndPoint URL:* /api/v1.0/responses
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> *Expected Response object from AppSensor REST service:*
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> {
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> id: &quot;&quot;,
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> threshold: &quot;&quot;,
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>  responses: [
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> {
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> user: {
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> username: &quot;&quot;,
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>  ipAddress: &quot;&quot;
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> },
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> action: &quot;&quot;,
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>  detectionPoint: {}, //???. It contains responses array again. What
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> to expect in it?
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> The detection point really shouldn't be part of the response - I'll
</I>&gt;&gt;&gt;&gt;&gt;<i> try to remove this from being serialized.
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>  timestamp: &quot;&quot;,
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>  detectionSystemId: &quot;&quot;,
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> interval : {
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> duration: &quot;&quot;,
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>  unit: 0 //number
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> }
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> },
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> {
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>  //another response
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> }
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> ]
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> }
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> 2. In case multiple responses received as result of invoking
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> *getResponses()*, does order in which actions are performed matter?
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> Good question that I don't think has been considered before. It
</I>&gt;&gt;&gt;&gt;&gt;<i> shouldn't in our case in the reference implementation (unless we add some
</I>&gt;&gt;&gt;&gt;&gt;<i> new features), but the timestamp is available, so it's likely best practice
</I>&gt;&gt;&gt;&gt;&gt;<i> to execute them in order. I'll add this point to the documentation.
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> 3. Can I set AppSensor REST Server on my machine and use it for
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> testing Node.js demo implementation? If so, can you please provide me steps
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> to set it up.
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> Yep, but there's not a project setup to do it yet. I'll try to add a
</I>&gt;&gt;&gt;&gt;&gt;<i> sample app for that soon. If you'd like to use it before I get that done,
</I>&gt;&gt;&gt;&gt;&gt;<i> have a look at the appsensor-ws-rest-server project and the
</I>&gt;&gt;&gt;&gt;&gt;<i> RestRequestHandlerTest class. There is a helper method at the bottom of the
</I>&gt;&gt;&gt;&gt;&gt;<i> class (startServer) that runs the service on grizzly. You can call that in
</I>&gt;&gt;&gt;&gt;&gt;<i> a main method to get a small simple server going for testing.
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> Just to share, I am exploring to retrofit ghost &lt;<A HREF="https://ghost.org/">https://ghost.org/</A>&gt;,
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> an open-source Node.js based blogging platform for AppSensor demonstration
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> implementation. I am working on getting familiar with its code and identify
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> detection points.
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> That's an awesome project. Adding security to existing popular
</I>&gt;&gt;&gt;&gt;&gt;<i> platforms has been a goal for OWASP for some time - nice to see progress
</I>&gt;&gt;&gt;&gt;&gt;<i> here.
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> Best Regards,
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> Chetan Karande
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> <A HREF="https://lists.owasp.org/mailman/listinfo/owasp-appsensor-project">chetan.karande at owasp.org</A>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> OWASP NYC Local Chapter &lt;<A HREF="https://www.owasp.org/index.php/NYC">https://www.owasp.org/index.php/NYC</A>&gt;
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> Open Web Application Security Project&lt;<A HREF="https://www.owasp.org/index.php/Main_Page">https://www.owasp.org/index.php/Main_Page</A>&gt;
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.owasp.org/pipermail/owasp-appsensor-project/attachments/20140406/1728180a/attachment.html">http://lists.owasp.org/pipermail/owasp-appsensor-project/attachments/20140406/1728180a/attachment.html</A>&gt;
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000725.html">[Owasp-appsensor-project] AppSensor Guide v2.0 - Last call for &quot;whole section&quot; contributions
</A></li>
	<LI>Next message: <A HREF="000727.html">[Owasp-appsensor-project] AppSensor API Questions (Node.js	Demonstration Implementation)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#726">[ date ]</a>
              <a href="thread.html#726">[ thread ]</a>
              <a href="subject.html#726">[ subject ]</a>
              <a href="author.html#726">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.owasp.org/mailman/listinfo/owasp-appsensor-project">More information about the Owasp-appsensor-project
mailing list</a><br>
</body></html>
