<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Owasp-turkey] [netsec] Re:  Under DDos Attack
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:owasp-turkey%40lists.owasp.org?Subject=%5BOwasp-turkey%5D%20%5Bnetsec%5D%20Re%3A%20%20Under%20DDos%20Attack&In-Reply-To=4911E8B9.6090409%40lifeoverip.net">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000485.html">
   <LINK REL="Next"  HREF="000487.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Owasp-turkey] [netsec] Re:  Under DDos Attack</H1>
    <B>Serkan Akcan</B> 
    <A HREF="mailto:owasp-turkey%40lists.owasp.org?Subject=%5BOwasp-turkey%5D%20%5Bnetsec%5D%20Re%3A%20%20Under%20DDos%20Attack&In-Reply-To=4911E8B9.6090409%40lifeoverip.net"
       TITLE="[Owasp-turkey] [netsec] Re:  Under DDos Attack">Serkan.Akcan at nebulabilisim.com.tr
       </A><BR>
    <I>Wed Nov  5 14:35:58 EST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="000485.html">[Owasp-turkey] [netsec] Re:  Under DDos Attack
</A></li>
        <LI>Next message: <A HREF="000487.html">[Owasp-turkey] [netsec] Re:  Under DDos Attack
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#486">[ date ]</a>
              <a href="thread.html#486">[ thread ]</a>
              <a href="subject.html#486">[ subject ]</a>
              <a href="author.html#486">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Application Proxy &#246;zelli&#287;i olan firewall &#252;r&#252;nlerinde engelleme i&#351;lemi daha kolay yap&#305;labilir zira bu sistemlerde direk web sunucusuna trafik g&#246;nderilmez. Firewall kendi kar&#351;&#305;lar istekleri. Bu s&#305;rada bir&#231;ok kontrol yaparak paketlerin sunucuya teslim edilip edilmemesine karar verebiliriz. Bir nevi k&#252;&#231;&#252;k waf diyebiliriz.

Ayr&#305;ca &#252;lke kodlar&#305;n&#305; bilen firewall &#252;r&#252;nleri de var. GUI'den Rusya'y&#305; yasakla diyorsunuz yasakl&#305;yor. Ip bloklar&#305;n&#305; bilmenize gerek yok.

Dolay&#305;s&#305; ile &#252;r&#252;n se&#231;iminin &#246;nemini bir kez daha g&#246;rm&#252;&#351; oluyoruz. Bu konu hakk&#305;nda vakti zaman&#305;nda bilgiguvenligi.org mail listesinde tart&#305;&#351;ma yapm&#305;&#351;t&#305;k uzunca. Ayr&#305;ca beyaz &#351;apka'ya makale de yazm&#305;&#351;t&#305;m.


SA


-----Original Message-----
From: Huzeyfe ONAL [mailto:<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-turkey">huzeyfe at lifeoverip.net</A>] 
Sent: 05 Kas&#305;m 2008 &#199;ar&#351;amba 20:41
To: <A HREF="https://lists.owasp.org/mailman/listinfo/owasp-turkey">netsec at lifeoverip.net</A>
Cc: <A HREF="https://lists.owasp.org/mailman/listinfo/owasp-turkey">owasp-turkey at lists.owasp.org</A>
Subject: Re: [netsec] Re: [Owasp-turkey] Under DDos Attack

Selamlar,

bir saldirgan GET flood islemini nasil yapabilir dusunelim;

ilk bakista benim aklima bu isin farkli IP adreslerinden 
yuzlerce/binlerce http istegi olusturrarak yapilmasi geliyor.

Oncelikle GET flood yapabilmesi icin TCP 3way handshake islemini 
tamamlamak zorundadir. Demekki yapilacak her GET flood islemi bizim 
Firewall tarafindan gorulecek.

Yani ben Firewallumda SYNProxy ve stateful tracking ozelliklerini 
kullanarak farkli ip adreslerinden gelecek get floodlarini TCP/IP 
seviyesinde gorebilecegim icin daha web sunucuya ulastirmadan 
engelleyebilirim. Tabi binlerce ip adresinden gelecek birer istek 
karsisinda cok birsey yapamaz ama boyle bir saldiri tipi ile henuz 
karsilasmadim ben.


Firewalllar icin Linux Iptables'in tarpitting patch'i var, Free/OpenBSD 
Packet Filter tum bu ozellikleri yamasiz sagliyor.


Ferruh Mavituna wrote:
&gt;<i>
</I>&gt;<i>     Benim gordugum DDOS konusunda yapilan en buyuk yanlis islem
</I>&gt;<i>     saldiriyi application seviyesinde eritmeye calismak ki bu da
</I>&gt;<i>     network seviyesine gore %60-%70 daha pahaliya mal oluyor.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Durumuna gore degisir tabii ki, ama hafif zeki olan herhangi bir GET 
</I>&gt;<i> istegi bazli DDoS da firewall bazinda engelleme yapmak (/firewall cok 
</I>&gt;<i> zeki bir sey degils/e) pek mumkun degil. Tahminim buradaki durumda o. 
</I>&gt;<i> Ama HTTP istegini analiz edebilen cozumler varsa sonuc uretecektir, bu 
</I>&gt;<i> konuda oneri varsa acikcasi bende merak ediyorum. Cunku s&#305;k s&#305;k 
</I>&gt;<i> karsima gelen konulardan biri ve maalesef pek basit bir cozumu yok.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> 2008/11/5 Huzeyfe ONAL &lt;<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-turkey">huzeyfe at lifeoverip.net</A> 
</I>&gt;<i> &lt;mailto:<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-turkey">huzeyfe at lifeoverip.net</A>&gt;&gt;
</I>&gt;<i>
</I>&gt;<i>     Musa selamlar,
</I>&gt;<i>
</I>&gt;<i>     mumkunse kullanilan software firewall'un ismini ogrenebilir miyim?
</I>&gt;<i>     Zira bana degerler cok az geldi. Yani en basit Firewall bile bu
</I>&gt;<i>     degerler karsisinda rahatlikla ayakta durur. Es zamanli 30000~
</I>&gt;<i>     paket ya da ortalama 20000~ state durumunda bile %5 civarinda CPU
</I>&gt;<i>     harcayan software firewallar var.
</I>&gt;<i>
</I>&gt;<i>     Mesela OpenBSD Packet Filter ve benzeri firewallar icin yogun
</I>&gt;<i>      paketler 80. port(uygulamaya ulasmadan)a gitmeden network
</I>&gt;<i>     seviyesinde bloklanabilir. Bunun icin firewall'a  tek bir ip
</I>&gt;<i>     adresinden su porta max baglanti sayisi y dir demek yeterli.
</I>&gt;<i>
</I>&gt;<i>     Paketler uygulama seviyesine ciktiginda engellemek hem daha zor
</I>&gt;<i>     hem de cok daha fazla kaynak tuketiyorlar.
</I>&gt;<i>
</I>&gt;<i>     Benim gordugum DDOS konusunda yapilan en buyuk yanlis islem
</I>&gt;<i>     saldiriyi application seviyesinde eritmeye calismak ki bu da
</I>&gt;<i>     network seviyesine gore %60-%70 daha pahaliya mal oluyor.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>     Musa Ulker wrote:
</I>&gt;<i>
</I>&gt;<i>         Tekrar merhabalar,
</I>&gt;<i>
</I>&gt;<i>         Ferruh; &#199;ok ilgin&#231;tir denedi&#287;im modlar kald&#305;ramad&#305; apachede
</I>&gt;<i>         ciddi y&#252;k
</I>&gt;<i>         durmaya devam etti.  Buradaki bottleneck software firewall
</I>&gt;<i>         ataklar&#305;
</I>&gt;<i>         durdurmad&#305; yeterli olmad&#305;. Y&#252;klenen ip say&#305;s&#305; ba&#351;ta 1 5 10
</I>&gt;<i>         diye de&#287;il
</I>&gt;<i>         de ayn&#305; anda 100+ &#351;eklinde olunca ve iplerde de&#287;i&#351;ti&#287;i i&#231;in
</I>&gt;<i>         &#231;ok k&#305;sa
</I>&gt;<i>         aral&#305;klarla (1dkdan az s&#252;re i&#231;in) yeni ipleri yakalayamad&#305; ve
</I>&gt;<i>         apacheyi, apachede &#231;al&#305;&#351;an uygulama da mysql i kilitledi..
</I>&gt;<i>
</I>&gt;<i>         Benim &#246;rnek verdi&#287;im %30 sadece bir tane apache forku i&#231;in.
</I>&gt;<i>         Maksimum
</I>&gt;<i>         olan&#305; i&#231;indi. Firewall &#231;al&#305;&#351;madan sistem kitleniyordu, ssha bile
</I>&gt;<i>         eri&#351;ilmiyordu. Firewallla CPU kullan&#305;m&#305; %80-85 civar&#305;nda
</I>&gt;<i>         seyretmeye
</I>&gt;<i>         ba&#351;lad&#305;. Ayn&#305; anda mevcut 80 portuna connection say&#305;s&#305; 200+
</I>&gt;<i>         civar&#305;ndayd&#305;..
</I>&gt;<i>
</I>&gt;<i>         Sald&#305;r&#305; detay&#305;: Connect flood. S&#252;rekli GET iste&#287;i. Sald&#305;r&#305; &#231;al&#305;&#351;an
</I>&gt;<i>         uygulama &#252;zerinden mysql i devre d&#305;&#351;&#305; b&#305;rakmaya y&#246;nelik oldu&#287;unu
</I>&gt;<i>         d&#252;&#351;&#252;n&#252;yorum. Daha &#246;nceden benzer bir sald&#305;rr&#305;yla kar&#351;&#305;la&#351;m&#305;&#351;t&#305;m..
</I>&gt;<i>         Gelen paketler gayet normal g&#246;z&#252;k&#252;yor. Arada malformed
</I>&gt;<i>         requestlerde
</I>&gt;<i>         geliyordu ama ba&#351;ka bir kaynaktan olabilir.
</I>&gt;<i>
</I>&gt;<i>         Kubilay; Rusya IP bloklar&#305; konusunda ara&#351;t&#305;rma yaparken &#351;&#246;yle bir
</I>&gt;<i>         siteyle kar&#351;&#305;la&#351;t&#305;m, incelemenizi tavsiye ederim:
</I>&gt;<i>         <A HREF="http://www.countryipblocks.net/">http://www.countryipblocks.net/</A>
</I>&gt;<i>
</I>&gt;<i>         Bedirhan; Apache KeepAlive konfigurasyonda kapal&#305;yd&#305;. Apache
</I>&gt;<i>         backdoor
</I>&gt;<i>         module gibi bir&#351;eyler buldum ama buldu&#287;um apache &#252;zerinden
</I>&gt;<i>         backdoor
</I>&gt;<i>         a&#231;an bir moduledu. Senin bahsetti&#287;in mod&#252;l&#252; payla&#351;&#305;r m&#305;s&#305;n?
</I>&gt;<i>
</I>&gt;<i>         DNS g&#252;ncellemsi akl&#305;ma geldi ama zararlar&#305;n&#305; k&#305;yaslay&#305;nca &#231;&#246;z&#252;mler
</I>&gt;<i>         aras&#305;ndan &#231;&#305;kard&#305;m..
</I>&gt;<i>
</I>&gt;<i>         Akl&#305;n yolu bir: HW firewallarla &#231;&#246;z&#252;ld&#252; olay. Reverse proxy
</I>&gt;<i>         ile ba&#351;ka
</I>&gt;<i>         bir sunucuya y&#246;nlendirildi istekler ve o sunucu &#246;n&#252;nde Layer 7
</I>&gt;<i>         filtering yap&#305;ld&#305;. (Juniper &#252;zerinden custom filterlarla)
</I>&gt;<i>
</I>&gt;<i>         Herkese g&#246;sterdi&#287;i a&#231;&#305;l&#305;mlar ve verdi&#287;i cevaplardan dolay&#305;
</I>&gt;<i>         te&#351;ekk&#252;r ediyorum..
</I>&gt;<i>
</I>&gt;<i>         Selamlar,
</I>&gt;<i>
</I>&gt;<i>         M.Musa &#220;lker
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>         2008/11/4 Ferruh Mavituna &lt;<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-turkey">ferruh at mavituna.com</A>
</I>&gt;<i>         &lt;mailto:<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-turkey">ferruh at mavituna.com</A>&gt;&gt;:
</I>&gt;<i>          
</I>&gt;<i>
</I>&gt;<i>             Merhabalar Musa,
</I>&gt;<i>
</I>&gt;<i>             Benim merak ettigim esas kilit noktasi neresi? (gavurlarin
</I>&gt;<i>             tabiri ile
</I>&gt;<i>             bottleneck). Yani application da mi is kitleniyor, ondeki
</I>&gt;<i>             firewall mu
</I>&gt;<i>             sapitmaya basliyor, load balancer mi vs. ?
</I>&gt;<i>
</I>&gt;<i>             Apache process' i %30 ise , uygulamada veya Apache de bir
</I>&gt;<i>             sorun  yok diye
</I>&gt;<i>             varsayiyorum. Database server ne alemde onda da ciddi bir
</I>&gt;<i>             yuklenme yok mu?
</I>&gt;<i>
</I>&gt;<i>             Bir de saldirinin detaylari ne? Syn-flood, connect-flood,
</I>&gt;<i>             yogun application
</I>&gt;<i>             istekleri (HTTP vs.)?  veya baska bir port acikta onun
</I>&gt;<i>             uzerinden mi bir sey
</I>&gt;<i>             yapiliyor? gelen paketlerin tum degerleri normal mi?
</I>&gt;<i>             Mesela tuhaf window
</I>&gt;<i>             size lari var mi vs.
</I>&gt;<i>
</I>&gt;<i>             Sonucta DDoS ataklari engellemek cok zor olabiliyor ama bu
</I>&gt;<i>             bilgileri
</I>&gt;<i>             verirsen daha detayli yardimci olunabilir sanirim.
</I>&gt;<i>
</I>&gt;<i>             Iyi Calismalar,
</I>&gt;<i>
</I>&gt;<i>             2008/11/4 Musa Ulker &lt;<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-turkey">musaulker at gmail.com</A>
</I>&gt;<i>             &lt;mailto:<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-turkey">musaulker at gmail.com</A>&gt;&gt;
</I>&gt;<i>                
</I>&gt;<i>
</I>&gt;<i>                 Merhabalar,
</I>&gt;<i>
</I>&gt;<i>                 Dedicated bir sunucuya bir &#231;ok koldan DDos sald&#305;r&#305;s&#305;
</I>&gt;<i>                 ger&#231;ekle&#351;tiriliyor. En &#231;ok y&#252;k Apache &#252;zerinde. Apache
</I>&gt;<i>                 CPU load'&#305; %30u
</I>&gt;<i>                 ge&#231;ebiliyor farkl&#305; apache processleri &#231;al&#305;&#351;&#305;yor. T&#252;rl&#252;
</I>&gt;<i>                 &#231;al&#305;&#351;malar
</I>&gt;<i>                 yapt&#305;m; firewallar (salt iptables, apf, csf vs)
</I>&gt;<i>                 denedim, ddos
</I>&gt;<i>                 protectionlar&#305; test ettim ama sald&#305;r&#305;y&#305; tam olarak
</I>&gt;<i>                 kesemedim. Birazc&#305;k
</I>&gt;<i>                 y&#252;k&#252; hafifletebildim. Zombie makinalar &#252;zerinden
</I>&gt;<i>                 sald&#305;r&#305; halen devam
</I>&gt;<i>                 ediyor.
</I>&gt;<i>
</I>&gt;<i>                 Bu konuda nas&#305;l bir yol izlemem gerekiyor?
</I>&gt;<i>
</I>&gt;<i>                 Te&#351;ekk&#252;rler
</I>&gt;<i>
</I>&gt;<i>                 --
</I>&gt;<i>                 M.Musa &#220;lker
</I>&gt;<i>                 _______________________________________________
</I>&gt;<i>                 Owasp-turkey mailing list
</I>&gt;<i>                 <A HREF="https://lists.owasp.org/mailman/listinfo/owasp-turkey">Owasp-turkey at lists.owasp.org</A>
</I>&gt;<i>                 &lt;mailto:<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-turkey">Owasp-turkey at lists.owasp.org</A>&gt;
</I>&gt;<i>                 <A HREF="https://lists.owasp.org/mailman/listinfo/owasp-turkey">https://lists.owasp.org/mailman/listinfo/owasp-turkey</A>
</I>&gt;<i>                      
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>             --
</I>&gt;<i>             Ferruh Mavituna
</I>&gt;<i>             <A HREF="http://ferruh.mavituna.com">http://ferruh.mavituna.com</A>
</I>&gt;<i>
</I>&gt;<i>                
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>     ---------------------------------------------------------------------
</I>&gt;<i>     To unsubscribe, e-mail: <A HREF="https://lists.owasp.org/mailman/listinfo/owasp-turkey">netsec-unsubscribe at lifeoverip.net</A>
</I>&gt;<i>     &lt;mailto:<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-turkey">netsec-unsubscribe at lifeoverip.net</A>&gt;
</I>&gt;<i>     For additional commands, e-mail: <A HREF="https://lists.owasp.org/mailman/listinfo/owasp-turkey">netsec-help at lifeoverip.net</A>
</I>&gt;<i>     &lt;mailto:<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-turkey">netsec-help at lifeoverip.net</A>&gt;
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> -- 
</I>&gt;<i> Ferruh Mavituna
</I>&gt;<i> <A HREF="http://ferruh.mavituna.com">http://ferruh.mavituna.com</A>
</I>

---------------------------------------------------------------------
To unsubscribe, e-mail: <A HREF="https://lists.owasp.org/mailman/listinfo/owasp-turkey">netsec-unsubscribe at lifeoverip.net</A>
For additional commands, e-mail: <A HREF="https://lists.owasp.org/mailman/listinfo/owasp-turkey">netsec-help at lifeoverip.net</A>

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000485.html">[Owasp-turkey] [netsec] Re:  Under DDos Attack
</A></li>
	<LI>Next message: <A HREF="000487.html">[Owasp-turkey] [netsec] Re:  Under DDos Attack
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#486">[ date ]</a>
              <a href="thread.html#486">[ thread ]</a>
              <a href="subject.html#486">[ subject ]</a>
              <a href="author.html#486">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.owasp.org/mailman/listinfo/owasp-turkey">More information about the Owasp-turkey
mailing list</a><br>
</body></html>
