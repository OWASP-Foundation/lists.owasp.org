<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Owasp-turkey] [netsec] Re:  Under DDos Attack
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:owasp-turkey%40lists.owasp.org?Subject=%5BOwasp-turkey%5D%20%5Bnetsec%5D%20Re%3A%20%20Under%20DDos%20Attack&In-Reply-To=4911CFA4.5060801%40lifeoverip.net">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000483.html">
   <LINK REL="Next"  HREF="000485.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Owasp-turkey] [netsec] Re:  Under DDos Attack</H1>
    <B>Ferruh Mavituna</B> 
    <A HREF="mailto:owasp-turkey%40lists.owasp.org?Subject=%5BOwasp-turkey%5D%20%5Bnetsec%5D%20Re%3A%20%20Under%20DDos%20Attack&In-Reply-To=4911CFA4.5060801%40lifeoverip.net"
       TITLE="[Owasp-turkey] [netsec] Re:  Under DDos Attack">ferruh at mavituna.com
       </A><BR>
    <I>Wed Nov  5 12:09:43 EST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="000483.html">[Owasp-turkey] [netsec] Re:  Under DDos Attack
</A></li>
        <LI>Next message: <A HREF="000485.html">[Owasp-turkey] [netsec] Re:  Under DDos Attack
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#484">[ date ]</a>
              <a href="thread.html#484">[ thread ]</a>
              <a href="subject.html#484">[ subject ]</a>
              <a href="author.html#484">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i>
</I>&gt;<i> Benim gordugum DDOS konusunda yapilan en buyuk yanlis islem saldiriyi
</I>&gt;<i> application seviyesinde eritmeye calismak ki bu da network seviyesine gore
</I>&gt;<i> %60-%70 daha pahaliya mal oluyor.
</I>

Durumuna gore degisir tabii ki, ama hafif zeki olan herhangi bir GET istegi
bazli DDoS da firewall bazinda engelleme yapmak (*firewall cok zeki bir sey
degils*e) pek mumkun degil. Tahminim buradaki durumda o. Ama HTTP istegini
analiz edebilen cozumler varsa sonuc uretecektir, bu konuda oneri varsa
acikcasi bende merak ediyorum. Cunku s&#305;k s&#305;k karsima gelen konulardan biri
ve maalesef pek basit bir cozumu yok.


2008/11/5 Huzeyfe ONAL &lt;<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-turkey">huzeyfe at lifeoverip.net</A>&gt;

&gt;<i> Musa selamlar,
</I>&gt;<i>
</I>&gt;<i> mumkunse kullanilan software firewall'un ismini ogrenebilir miyim? Zira
</I>&gt;<i> bana degerler cok az geldi. Yani en basit Firewall bile bu degerler
</I>&gt;<i> karsisinda rahatlikla ayakta durur. Es zamanli 30000~ paket ya da ortalama
</I>&gt;<i> 20000~ state durumunda bile %5 civarinda CPU harcayan software firewallar
</I>&gt;<i> var.
</I>&gt;<i>
</I>&gt;<i> Mesela OpenBSD Packet Filter ve benzeri firewallar icin yogun  paketler 80.
</I>&gt;<i> port(uygulamaya ulasmadan)a gitmeden network seviyesinde bloklanabilir.
</I>&gt;<i> Bunun icin firewall'a  tek bir ip adresinden su porta max baglanti sayisi y
</I>&gt;<i> dir demek yeterli.
</I>&gt;<i>
</I>&gt;<i> Paketler uygulama seviyesine ciktiginda engellemek hem daha zor hem de cok
</I>&gt;<i> daha fazla kaynak tuketiyorlar.
</I>&gt;<i>
</I>&gt;<i> Benim gordugum DDOS konusunda yapilan en buyuk yanlis islem saldiriyi
</I>&gt;<i> application seviyesinde eritmeye calismak ki bu da network seviyesine gore
</I>&gt;<i> %60-%70 daha pahaliya mal oluyor.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Musa Ulker wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> Tekrar merhabalar,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Ferruh; &#199;ok ilgin&#231;tir denedi&#287;im modlar kald&#305;ramad&#305; apachede ciddi y&#252;k
</I>&gt;&gt;<i> durmaya devam etti.  Buradaki bottleneck software firewall ataklar&#305;
</I>&gt;&gt;<i> durdurmad&#305; yeterli olmad&#305;. Y&#252;klenen ip say&#305;s&#305; ba&#351;ta 1 5 10 diye de&#287;il
</I>&gt;&gt;<i> de ayn&#305; anda 100+ &#351;eklinde olunca ve iplerde de&#287;i&#351;ti&#287;i i&#231;in &#231;ok k&#305;sa
</I>&gt;&gt;<i> aral&#305;klarla (1dkdan az s&#252;re i&#231;in) yeni ipleri yakalayamad&#305; ve
</I>&gt;&gt;<i> apacheyi, apachede &#231;al&#305;&#351;an uygulama da mysql i kilitledi..
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Benim &#246;rnek verdi&#287;im %30 sadece bir tane apache forku i&#231;in. Maksimum
</I>&gt;&gt;<i> olan&#305; i&#231;indi. Firewall &#231;al&#305;&#351;madan sistem kitleniyordu, ssha bile
</I>&gt;&gt;<i> eri&#351;ilmiyordu. Firewallla CPU kullan&#305;m&#305; %80-85 civar&#305;nda seyretmeye
</I>&gt;&gt;<i> ba&#351;lad&#305;. Ayn&#305; anda mevcut 80 portuna connection say&#305;s&#305; 200+
</I>&gt;&gt;<i> civar&#305;ndayd&#305;..
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Sald&#305;r&#305; detay&#305;: Connect flood. S&#252;rekli GET iste&#287;i. Sald&#305;r&#305; &#231;al&#305;&#351;an
</I>&gt;&gt;<i> uygulama &#252;zerinden mysql i devre d&#305;&#351;&#305; b&#305;rakmaya y&#246;nelik oldu&#287;unu
</I>&gt;&gt;<i> d&#252;&#351;&#252;n&#252;yorum. Daha &#246;nceden benzer bir sald&#305;rr&#305;yla kar&#351;&#305;la&#351;m&#305;&#351;t&#305;m..
</I>&gt;&gt;<i> Gelen paketler gayet normal g&#246;z&#252;k&#252;yor. Arada malformed requestlerde
</I>&gt;&gt;<i> geliyordu ama ba&#351;ka bir kaynaktan olabilir.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Kubilay; Rusya IP bloklar&#305; konusunda ara&#351;t&#305;rma yaparken &#351;&#246;yle bir
</I>&gt;&gt;<i> siteyle kar&#351;&#305;la&#351;t&#305;m, incelemenizi tavsiye ederim:
</I>&gt;&gt;<i> <A HREF="http://www.countryipblocks.net/">http://www.countryipblocks.net/</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Bedirhan; Apache KeepAlive konfigurasyonda kapal&#305;yd&#305;. Apache backdoor
</I>&gt;&gt;<i> module gibi bir&#351;eyler buldum ama buldu&#287;um apache &#252;zerinden backdoor
</I>&gt;&gt;<i> a&#231;an bir moduledu. Senin bahsetti&#287;in mod&#252;l&#252; payla&#351;&#305;r m&#305;s&#305;n?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> DNS g&#252;ncellemsi akl&#305;ma geldi ama zararlar&#305;n&#305; k&#305;yaslay&#305;nca &#231;&#246;z&#252;mler
</I>&gt;&gt;<i> aras&#305;ndan &#231;&#305;kard&#305;m..
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Akl&#305;n yolu bir: HW firewallarla &#231;&#246;z&#252;ld&#252; olay. Reverse proxy ile ba&#351;ka
</I>&gt;&gt;<i> bir sunucuya y&#246;nlendirildi istekler ve o sunucu &#246;n&#252;nde Layer 7
</I>&gt;&gt;<i> filtering yap&#305;ld&#305;. (Juniper &#252;zerinden custom filterlarla)
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Herkese g&#246;sterdi&#287;i a&#231;&#305;l&#305;mlar ve verdi&#287;i cevaplardan dolay&#305; te&#351;ekk&#252;r
</I>&gt;&gt;<i> ediyorum..
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Selamlar,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> M.Musa &#220;lker
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> 2008/11/4 Ferruh Mavituna &lt;<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-turkey">ferruh at mavituna.com</A>&gt;:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Merhabalar Musa,
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Benim merak ettigim esas kilit noktasi neresi? (gavurlarin tabiri ile
</I>&gt;&gt;&gt;<i> bottleneck). Yani application da mi is kitleniyor, ondeki firewall mu
</I>&gt;&gt;&gt;<i> sapitmaya basliyor, load balancer mi vs. ?
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Apache process' i %30 ise , uygulamada veya Apache de bir sorun  yok diye
</I>&gt;&gt;&gt;<i> varsayiyorum. Database server ne alemde onda da ciddi bir yuklenme yok
</I>&gt;&gt;&gt;<i> mu?
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Bir de saldirinin detaylari ne? Syn-flood, connect-flood, yogun
</I>&gt;&gt;&gt;<i> application
</I>&gt;&gt;&gt;<i> istekleri (HTTP vs.)?  veya baska bir port acikta onun uzerinden mi bir
</I>&gt;&gt;&gt;<i> sey
</I>&gt;&gt;&gt;<i> yapiliyor? gelen paketlerin tum degerleri normal mi? Mesela tuhaf window
</I>&gt;&gt;&gt;<i> size lari var mi vs.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Sonucta DDoS ataklari engellemek cok zor olabiliyor ama bu bilgileri
</I>&gt;&gt;&gt;<i> verirsen daha detayli yardimci olunabilir sanirim.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Iyi Calismalar,
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> 2008/11/4 Musa Ulker &lt;<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-turkey">musaulker at gmail.com</A>&gt;
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Merhabalar,
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Dedicated bir sunucuya bir &#231;ok koldan DDos sald&#305;r&#305;s&#305;
</I>&gt;&gt;&gt;&gt;<i> ger&#231;ekle&#351;tiriliyor. En &#231;ok y&#252;k Apache &#252;zerinde. Apache CPU load'&#305; %30u
</I>&gt;&gt;&gt;&gt;<i> ge&#231;ebiliyor farkl&#305; apache processleri &#231;al&#305;&#351;&#305;yor. T&#252;rl&#252; &#231;al&#305;&#351;malar
</I>&gt;&gt;&gt;&gt;<i> yapt&#305;m; firewallar (salt iptables, apf, csf vs) denedim, ddos
</I>&gt;&gt;&gt;&gt;<i> protectionlar&#305; test ettim ama sald&#305;r&#305;y&#305; tam olarak kesemedim. Birazc&#305;k
</I>&gt;&gt;&gt;&gt;<i> y&#252;k&#252; hafifletebildim. Zombie makinalar &#252;zerinden sald&#305;r&#305; halen devam
</I>&gt;&gt;&gt;&gt;<i> ediyor.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Bu konuda nas&#305;l bir yol izlemem gerekiyor?
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Te&#351;ekk&#252;rler
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> --
</I>&gt;&gt;&gt;&gt;<i> M.Musa &#220;lker
</I>&gt;&gt;&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;&gt;&gt;<i> Owasp-turkey mailing list
</I>&gt;&gt;&gt;&gt;<i> <A HREF="https://lists.owasp.org/mailman/listinfo/owasp-turkey">Owasp-turkey at lists.owasp.org</A>
</I>&gt;&gt;&gt;&gt;<i> <A HREF="https://lists.owasp.org/mailman/listinfo/owasp-turkey">https://lists.owasp.org/mailman/listinfo/owasp-turkey</A>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> --
</I>&gt;&gt;&gt;<i> Ferruh Mavituna
</I>&gt;&gt;&gt;<i> <A HREF="http://ferruh.mavituna.com">http://ferruh.mavituna.com</A>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> ---------------------------------------------------------------------
</I>&gt;<i> To unsubscribe, e-mail: <A HREF="https://lists.owasp.org/mailman/listinfo/owasp-turkey">netsec-unsubscribe at lifeoverip.net</A>
</I>&gt;<i> For additional commands, e-mail: <A HREF="https://lists.owasp.org/mailman/listinfo/owasp-turkey">netsec-help at lifeoverip.net</A>
</I>&gt;<i>
</I>&gt;<i>
</I>

-- 
Ferruh Mavituna
<A HREF="http://ferruh.mavituna.com">http://ferruh.mavituna.com</A>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="https://lists.owasp.org/pipermail/owasp-turkey/attachments/20081105/a66947d6/attachment.html">https://lists.owasp.org/pipermail/owasp-turkey/attachments/20081105/a66947d6/attachment.html</A> 
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000483.html">[Owasp-turkey] [netsec] Re:  Under DDos Attack
</A></li>
	<LI>Next message: <A HREF="000485.html">[Owasp-turkey] [netsec] Re:  Under DDos Attack
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#484">[ date ]</a>
              <a href="thread.html#484">[ thread ]</a>
              <a href="subject.html#484">[ subject ]</a>
              <a href="author.html#484">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.owasp.org/mailman/listinfo/owasp-turkey">More information about the Owasp-turkey
mailing list</a><br>
</body></html>
