<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Owasp-turkey] BSQL Hacker Beta Versiyon - v0.9
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:owasp-turkey%40lists.owasp.org?Subject=%5BOwasp-turkey%5D%20BSQL%20Hacker%20Beta%20Versiyon%20-%20v0.9&In-Reply-To=f235628a0708281636n7bb9b132saf52ef910cbb3e0c%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000222.html">
   <LINK REL="Next"  HREF="000185.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Owasp-turkey] BSQL Hacker Beta Versiyon - v0.9</H1>
    <B>Ferruh Mavituna</B> 
    <A HREF="mailto:owasp-turkey%40lists.owasp.org?Subject=%5BOwasp-turkey%5D%20BSQL%20Hacker%20Beta%20Versiyon%20-%20v0.9&In-Reply-To=f235628a0708281636n7bb9b132saf52ef910cbb3e0c%40mail.gmail.com"
       TITLE="[Owasp-turkey] BSQL Hacker Beta Versiyon - v0.9">ferruh at mavituna.com
       </A><BR>
    <I>Mon Sep  3 04:28:21 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="000222.html">[Owasp-turkey] 3 yeni ceviri
</A></li>
        <LI>Next message: <A HREF="000185.html">[Owasp-turkey] SQL Injection gibi Code Injection?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#184">[ date ]</a>
              <a href="thread.html#184">[ thread ]</a>
              <a href="subject.html#184">[ subject ]</a>
              <a href="author.html#184">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Bedirhan ve Kerem ikinizinde yorumlari icin cok tesekkurler,

Ancak cevap verebiliyorum kusura bakmayin yaklasik bir haftadir hasta
sekilde evde yatiyorum.


   - http proxy kullanamadim (ilk basta dogru calistiramadigimdan sql
hatalarimi gormek icin kendi IIS'imin loglarina bakmak zorunda kaldim)

Proxy' yi bir test etmem lazim, calismayan GUI elementlerinden biri olabilir
:<i>) Bunun harici HTTP cevaplarini outputlarini history de normalde
</I>gorebiliyor olman lazim.

   - hazirlanan sql cumlecigini bir sekilde calistirmadan gormek guzel
olurdu (en azindan ilk cumlecikleri, yani {POSITION}=0, {CHAR}=40 degerleri
ile mesela)

Bu da yapilacaklar listemde kesinlikle cok onemli dedigin gibi,

   - once length hesaplamayi dusunur musun? Extract edecegin bi verinin
bitip bitmedigini nasil anliyorsun (100 gibi bir max len deger mi var?).

Aslinda bu kisim biraz degisik ileride onceden length hesaplamayi opsioyonel
olarak koyacagim. Su an tamamen donen dataya gore datayi alirken length' i
kesfediyor. Dolayisiyla onceden length hesaplmaya gerek kalmiyor ama bu
yontem bazi noktalarda sorun cikardi. Max Length ozelligi ise tamamen extra
cok uzun datalar icin. Ama onceden length hesaplmayi da ekleyecegim. Bitip
bitmedigini ozetle donen datanin null olmasindan anliyorum.

Bu NNNNNNNNNNNNNN olayi bir kac durumda olabiliyor. Query yanlis olunca,
length tespti edilmeyince vb. baska ilginc durumlar. GEnelde length ile
alakali olmasi gerekiyor.


SQL Injection Cheat Sheet' i de bir tabda yuklemeyi planliyorum, bir de
guncelleme destegi ile.


a) BrwMain'de ScriptErrorSuppressed = True yapabilirsen, indirilmi&#351; olan
html i&#231;eri&#287;i g&#246;sterilirken olu&#351;an script error dialog boxlar&#305;ndan
kurtulabiliriz :)

- Evet bunu unutmusum kesinlikle koyacagim

b) Bir Static Constructorla HttpRequest Classinin icinde su handler
atamasinin bir kere olmasini saglayabilirsin.

Dogru ya basit static ile hemen isi cozebilirim, duzelteyim onu da.


String.IsNullOrEmpty olayi mantikli sanirim en iyisi buna her zaman elimi
alistirmak.


d) Ayrica kulland&#305;&#287;&#305;n regular expressionlar&#305; ya static olarak , ya da
property set edildiginde ...
Evet bu aklimdaydi performans icin biraz yardimci olabilir.


e) Gene &#231;ok dikkat etti&#287;ini koddada g&#246;rmeme ra&#287;men string concatlar&#305;
StringBuilder veya String.Format ile yapabilirsen kod okunurlu&#287;u artabilir
kanaatindeyim.

Eger data 1000+ karakter uzerinde olmayacaksa genelde stringbuilder
kullanmiyorum daha okunaksiz oluyor bence, bu tamamen kisisel bir bakis
acisi tabii ki :)


Ayrica en azindan Console bazl&#305; taraf&#305;n mono'ya port edilmesinede talibim,
seninle bununla ilgili olarakta bir time plan &#231;&#305;kartabiliriz.
Bu super bir teklif Kerem, cunku bende ozelliikle bu konuda destek
verebilecek ve vakit ayirabilecek birini ariyordum. Cok memnun olurum. Nasil
baslayabiliriz o konuda bir fikrim yok, stabil ilk versiyonu beklemek
sanirim en mantikli cozum su an. ilk stabil versiyon ciktiktan sonra console
da Mono icin gerekli tum degisiklikleri yapariz. Benim mono da cok fazla
deneyemim yok ama bir kac test sonucunda .NET Framework VB uygulamalarini
calistiramadim neden dolayi oldugunu bilmiyorum.

Bu konuda benimle gene iletisime gecersen Mono da da calistirmak cok guzel
olacaktir.


Tesekkurler,

On 29/08/07, Izzet Kerem Kusmezer &lt;<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-turkey">keremskusmezer at gmail.com</A>&gt; wrote:
&gt;<i>
</I>&gt;<i> Merhabalar,
</I>&gt;<i>
</I>&gt;<i> Oncelikle ellerine saglik guzel bir aray&#252;z ve uygulama geli&#351;tirmi&#351;sin.
</I>&gt;<i> 2 - 3 tane ufak &#246;nerim olacak, daha koda tam olarak bakamad&#305;m ama k&#305;saca
</I>&gt;<i> gozume &#231;arpanlar:
</I>&gt;<i>
</I>&gt;<i> a) BrwMain'de ScriptErrorSuppressed = True yapabilirsen, indirilmi&#351; olan
</I>&gt;<i> html i&#231;eri&#287;i g&#246;sterilirken olu&#351;an script error dialog boxlar&#305;ndan
</I>&gt;<i> kurtulabiliriz :)
</I>&gt;<i>
</I>&gt;<i> b) Bir Static Constructorla HttpRequest Classinin icinde su handler
</I>&gt;<i> atamasinin bir kere olmasini saglayabilirsin.
</I>&gt;<i> Shared Sub New()
</I>&gt;<i> 'PERFORMANCE: May we can put it to somewhere else for only one execution
</I>&gt;<i> ServicePointManager.ServerCertificateValidationCallback = New
</I>&gt;<i> Net.Security.RemoteCertificateValidationCallback( AddressOf
</I>&gt;<i> Helpers.ValidateCertificate)
</I>&gt;<i> End Sub
</I>&gt;<i>
</I>&gt;<i> c) Ayr&#305;ca String kontrolleri i&#231;in String.IsNullOrEmpty ' i kesinlikle
</I>&gt;<i> tavsiye ederim , boyle If tmpStr = String.Empty'de g&#246;zden ka&#231;abilecek null
</I>&gt;<i> olma durumlar&#305;n&#305;da kaps&#305;yor olacaks&#305;n. Veya direkt olarak s&#246;yle bir
</I>&gt;<i> IsStringReallyEmpty diye bir method :)
</I>&gt;<i>
</I>&gt;<i> Public Function IsStringReallyEmpty(SourceText as String) as Boolean
</I>&gt;<i>      Return CBool(IIf(String.IsNullOrEmpty(SourceText),True,
</I>&gt;<i> String.IsNullOrEmpty(SourceText.Trim())))
</I>&gt;<i> End Function
</I>&gt;<i>
</I>&gt;<i> d) Ayrica kulland&#305;&#287;&#305;n regular expressionlar&#305; ya static olarak , ya da
</I>&gt;<i> property set edildiginde
</I>&gt;<i> Dim tempEx As New System.Text.RegularExpressions.Regex (&quot;kerem&quot;,
</I>&gt;<i> RegularExpressions.RegexOptions.Compiled)
</I>&gt;<i> gibi tutarsan her seferinde RegEx.IsMatch'te pattern ge&#231;i&#351;i yap&#305;ld&#305;&#287;&#305;ndaki
</I>&gt;<i> parse maliyetindende kurtulmu&#351; olursun.
</I>&gt;<i>
</I>&gt;<i> Bu arada belki Database Interface implementasyonlar&#305; plugin based bir
</I>&gt;<i> yap&#305;ya ge&#231;irebilirsin diye d&#252;&#351;&#252;n&#252;yorum, b&#246;ylece mesela ayn&#305; database i&#231;in
</I>&gt;<i> farkl&#305; methodlarla kontroller yapan bir motor olu&#351;turulabilir. Ben b&#246;yle bir
</I>&gt;<i> plugin yap&#305;s&#305;n&#305; implemente etmek i&#231;in &#351;imdiden talibim, elimde kendi
</I>&gt;<i> projelerim i&#231;in yazm&#305;&#351; oldu&#287;um bir plugin engine var ve rahatl&#305;kla
</I>&gt;<i> kullanabiliriz.
</I>&gt;<i>
</I>&gt;<i> e) Gene &#231;ok dikkat etti&#287;ini koddada g&#246;rmeme ra&#287;men string concatlar&#305;
</I>&gt;<i> StringBuilder veya String.Format ile yapabilirsen kod okunurlu&#287;u artabilir
</I>&gt;<i> kanaatindeyim.
</I>&gt;<i>
</I>&gt;<i> Kesinlikle cross thread gui access ve invoke kullan&#305;m tarz&#305;na ger&#231;ekten
</I>&gt;<i> bay&#305;ld&#305;m, ellerine sa&#287;l&#305;k.
</I>&gt;<i>
</I>&gt;<i> Ayrica en azindan Console bazl&#305; taraf&#305;n mono'ya port edilmesinede talibim,
</I>&gt;<i> seninle bununla ilgili olarakta bir time plan &#231;&#305;kartabiliriz.
</I>&gt;<i>
</I>&gt;<i> Ger&#231;ekten &#231;ok faydal&#305; bir tool yazm&#305;&#351;&#305;n, elimden gelen yard&#305;mda bulunmak
</I>&gt;<i> isterim.
</I>&gt;<i>
</I>&gt;<i> Sayg&#305;lar&#305;mla
</I>&gt;<i> Kerem K&#252;smezer
</I>&gt;<i>
</I>&gt;<i> 27.08.2007 tarihinde Ferruh Mavituna &lt;<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-turkey">ferruh at mavituna.com</A> &gt; yazm&#305;&#351;:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Selamlar,
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Cok uzun zaman once basladigim ancak yakin donemde tekrar yazmaya
</I>&gt;<i> &gt; basladigim bir Blind SQL Injection programi var. Ilk beta verisyonunu
</I>&gt;<i> &gt; yayinladim. Henuz beta bile denemez belki ama en azindan calisiyor.
</I>&gt;<i> &gt; Dokumantasyon cok zayif henuz, uzerinde calisiyorum.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Lisans GPL, stable versiyon insallah 1-2 ay icerisinde yayinlanacak.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Program ozetle Blind SQL Injection lari otomatik olarak exploit etmek
</I>&gt;<i> &gt; icin gelistirildi. Hemen hemen her durumda her sekilde SQL Injection' i her
</I>&gt;<i> &gt; database den alma amaci ile yazdim. Ancak bu esnekligin bedeli programi
</I>&gt;<i> &gt; konfigure etmek biraz zor. Ben cok uzun suredir kendi testlerimde
</I>&gt;<i> &gt; kullaniyorum. Diger SQL Injection araclarinda olmayan bir cok gelismis
</I>&gt;<i> &gt; ozellige sahip mesela Nonce lari kullanabilme ( degisken viewstateler
</I>&gt;<i> &gt; gibi rasgele deger kullanan formlari exploit ederken).
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Konsol ve GUI olarak iki farkli uygulama var GUI de her ozellik yokken
</I>&gt;<i> &gt; konsolda da GUI deki her ozellik yok. Sonucta ikiside hemen hemen tum
</I>&gt;<i> &gt; ozelliklere sahip olacak. GUI &quot;otomatik injection&quot; modunda calisabiliyor. Bu
</I>&gt;<i> &gt; modda injection a basladiktan sonra eger DB yapisi destekleniyorsa ( su
</I>&gt;<i> &gt; an sadece SQL Server modulu calisiyor) tum db semasi ve kayitlar
</I>&gt;<i> &gt; otomatik olarak cekiliyor.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Genis ve bir o kadar karisik / guncellenmemis ve zaman zaman yanlis olan
</I>&gt;<i> &gt; bir dokumantasyon var. Konsol versiyonu kullanacaksaniz ozellikle kesinlikle
</I>&gt;<i> &gt; bunu kontrol edin. Ek olarak parametrelerden de uygulamanin neleri
</I>&gt;<i> &gt; destekledigini gorebilirsiniz.
</I>&gt;<i> &gt; <A HREF="http://ferruh.mavituna.com/makale/bsql-hacker-console-manual/">http://ferruh.mavituna.com/makale/bsql-hacker-console-manual/</A>
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;  Sadece Uygulama :
</I>&gt;<i> &gt; <A HREF="http://ferruh.mavituna.com/opensource/BSQLHacker_v09_Binary.zip">http://ferruh.mavituna.com/opensource/BSQLHacker_v09_Binary.zip</A>
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; .NET Framework 3.5 gerekebilir ama .NET Framework 2.0 ile de calismasi
</I>&gt;<i> &gt; gerekiyor
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Kaynak Kodu :
</I>&gt;<i> &gt; <A HREF="http://ferruh.mavituna.com/opensource/BSQLHacker_v09_Source.zip">http://ferruh.mavituna.com/opensource/BSQLHacker_v09_Source.zip</A>
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Kullananlar olursa her turlu yorum, oneri, hata bildirilerine
</I>&gt;<i> &gt; bekliyorum. Dedigim gibi tum yazilimi tamamen test amacli kabul edebilirsin,
</I>&gt;<i> &gt; ilginc hatalarla karsilasilabilirsiniz ya da bazi GUI formlarinin henuz
</I>&gt;<i> &gt; calismadigini gorebilirsiniz.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Kullanim Ornegi (Klasik bir SQL Injection icin) :
</I>&gt;<i> &gt; <A HREF="http://localhost/sqlserver/?p=1">http://localhost/sqlserver/?p=1</A> AND ISNULL(ASCII(SUBSTRING(( {INJECTION}
</I>&gt;<i> &gt; ),{POSITION},1)),0){OPERATION}{CHAR}--
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Kalin olan yazilar dinamik degiskenler, sadece {INJECTION}  &quot;Automated
</I>&gt;<i> &gt; Attack&quot; kullanilcaksa kullaniliyor. Aksi takdirde buraya kendiniz herhangi
</I>&gt;<i> &gt; bir SQL query koyabilirsiniz. Bu Query sadece bir kayit dondurmek zorunda.
</I>&gt;<i> &gt; Bu ornek SQL Server icin ama ne yapmaniz normalde biliyorsaniz basitce
</I>&gt;<i> &gt; ORACLE, PostgreSQL, MySQL vs. icinde benzer kodlar yazabilirsiniz. Ben
</I>&gt;<i> &gt; MySQL, ORACLE ve SQL Server da cesitli testler yaptim. Ek olarak MySQL
</I>&gt;<i> &gt; Benchmark ve SQL Server WAITFOR DELAY tarzi full blind' lari destekliyor.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Bu dinamik degiskenler ana adreste Request &amp; Injection  tabi altindaki
</I>&gt;<i> &gt; heryerde kullanilabilir. Dolayisiyla GET, POST, HTTP HEADERS ve Cookie lerde
</I>&gt;<i> &gt; injection yapabilirsiniz.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Tesekkurler,
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; --
</I>&gt;<i> &gt; Ferruh Mavituna
</I>&gt;<i> &gt; <A HREF="http://ferruh.mavituna.com">http://ferruh.mavituna.com</A>
</I>&gt;<i> &gt; _______________________________________________
</I>&gt;<i> &gt; Owasp-turkey mailing list
</I>&gt;<i> &gt; <A HREF="https://lists.owasp.org/mailman/listinfo/owasp-turkey">Owasp-turkey at lists.owasp.org</A>
</I>&gt;<i> &gt; <A HREF="https://lists.owasp.org/mailman/listinfo/owasp-turkey">https://lists.owasp.org/mailman/listinfo/owasp-turkey</A>
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i>
</I>

-- 
Ferruh Mavituna
<A HREF="http://ferruh.mavituna.com">http://ferruh.mavituna.com</A>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="https://lists.owasp.org/pipermail/owasp-turkey/attachments/20070903/d26eee31/attachment.html">https://lists.owasp.org/pipermail/owasp-turkey/attachments/20070903/d26eee31/attachment.html</A> 
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000222.html">[Owasp-turkey] 3 yeni ceviri
</A></li>
	<LI>Next message: <A HREF="000185.html">[Owasp-turkey] SQL Injection gibi Code Injection?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#184">[ date ]</a>
              <a href="thread.html#184">[ thread ]</a>
              <a href="subject.html#184">[ subject ]</a>
              <a href="author.html#184">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.owasp.org/mailman/listinfo/owasp-turkey">More information about the Owasp-turkey
mailing list</a><br>
</body></html>
