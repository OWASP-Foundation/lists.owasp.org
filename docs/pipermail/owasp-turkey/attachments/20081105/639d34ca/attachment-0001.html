<tt>
Anladim,&nbsp;&lt;br&gt;&lt;br&gt;Diger&nbsp;bir&nbsp;soru&nbsp;uygulama&nbsp;gerekenden&nbsp;fazla&nbsp;CPU&nbsp;harciyor&nbsp;mu?&nbsp;Cok&nbsp;yuksek&nbsp;database&nbsp;prosesi&nbsp;gerektiren&nbsp;islemler&nbsp;var&nbsp;mi?&nbsp;Ya&nbsp;da&nbsp;yogun&nbsp;islem&nbsp;yapan&nbsp;PHP&nbsp;sayfalari.&nbsp;Eger&nbsp;GET&nbsp;yapilan&nbsp;sayfa&nbsp;sitenin&nbsp;en&nbsp;sayfasi&nbsp;ise&nbsp;o&nbsp;sayfayi&nbsp;cachelemek&nbsp;mumkun&nbsp;mu?&nbsp;IP&nbsp;ler&nbsp;duzenli&nbsp;degisiyor&nbsp;olamaz&nbsp;eminim&nbsp;ki&nbsp;ayni&nbsp;IPler&nbsp;bloklanana&nbsp;kadar&nbsp;GET&nbsp;islemine&nbsp;devam&nbsp;ediyordur.&nbsp;Dolayisiyla&nbsp;ayni&nbsp;IP&nbsp;adresi&nbsp;dakika&nbsp;icerisin&nbsp;atiyorum&nbsp;30&nbsp;istek&nbsp;yaparsa&nbsp;o&nbsp;kisiyi&nbsp;direk&nbsp;bloklayabilirsin,&nbsp;ya&nbsp;da&nbsp;CAPTCHA&nbsp;vs.&nbsp;gibi&nbsp;onay&nbsp;isteyen&nbsp;bir&nbsp;ekran&nbsp;gosterebilir&nbsp;ve&nbsp;eger&nbsp;onay&nbsp;vermezse&nbsp;bu&nbsp;kisi,&nbsp;onu&nbsp;bloklarsin&nbsp;(bu&nbsp;blok&nbsp;firewall&amp;nbsp;&nbsp;seviyesinde&nbsp;daha&nbsp;iyi&nbsp;olur&nbsp;ama&nbsp;teknik&nbsp;olarak&nbsp;zor&nbsp;olursa&nbsp;uygulama&nbsp;seviyesindeki&nbsp;blokta&nbsp;yetecektir)&nbsp;&lt;br&gt;<br>
&lt;br&gt;Ikinci&nbsp;olarak&nbsp;sanirim&nbsp;Apache&nbsp;icin&nbsp;benzer&nbsp;bir&nbsp;cok&nbsp;mod&nbsp;var&nbsp;&lt;a&nbsp;href=&quot;http://www.zdziarski.com/projects/mod_evasive/&quot;&gt;http://www.zdziarski.com/projects/mod_evasive/&lt;/a&gt;&nbsp;gibi&nbsp;bir&nbsp;mod&nbsp;isini&nbsp;gorebilir.&lt;br&gt;&lt;br&gt;Ucuncu&nbsp;olarak&nbsp;GET&nbsp;isteklerini&nbsp;incele,&nbsp;eger&nbsp;bariz&nbsp;be&nbsp;benzerlik&nbsp;varsa&nbsp;direk&nbsp;ona&nbsp;gore&nbsp;bloklama&nbsp;yap.&nbsp;Mesela&nbsp;sacma&nbsp;bir&nbsp;user-agent,&nbsp;ya&nbsp;da&nbsp;language&nbsp;header&amp;#39;&nbsp;i&nbsp;yoksa,&nbsp;ya&nbsp;da&nbsp;accept&nbsp;yoksa&nbsp;vs.&nbsp;Bu&nbsp;bazi&nbsp;kisileri&nbsp;yanlislikla&nbsp;bloklamaya&nbsp;neden&nbsp;olabilir&nbsp;ama&nbsp;sanirim&nbsp;bu&nbsp;tip&nbsp;bir&nbsp;zamanda&nbsp;3-5&nbsp;kisiyi&nbsp;kaybetmek&nbsp;herkesi&nbsp;kaybetmekten&nbsp;daha&nbsp;iyi&nbsp;bir&nbsp;secim&nbsp;olacaktir.&lt;br&gt;<br>
&lt;br&gt;Ozelikle&nbsp;3.&nbsp;oneri&nbsp;cok&nbsp;isine&nbsp;yarayabilir,&nbsp;saldiri&nbsp;yapanlarin&nbsp;isteklerini&nbsp;cok&nbsp;detayli&nbsp;incelemek&nbsp;ve&nbsp;bir&nbsp;pattern&nbsp;yakalamay&nbsp;calismak&nbsp;onemli&nbsp;bir&nbsp;nokta.&nbsp;Onlar&nbsp;saldiriyi&nbsp;degistirebilirler&nbsp;ama&nbsp;bunu&nbsp;anlamalari&nbsp;ve&nbsp;cozmeleri&nbsp;bile&nbsp;cok&nbsp;uzun&nbsp;surecektir.&lt;br&gt;<br>
&lt;br&gt;Iyi&nbsp;Calismalar,&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;2008/11/4&nbsp;Musa&nbsp;Ulker&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:musaulker@gmail.com&quot;&gt;musaulker@gmail.com&lt;/a&gt;&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;<br>
Tekrar&nbsp;merhabalar,&lt;br&gt;<br>
&lt;br&gt;<br>
Ferruh;&nbsp;Çok&nbsp;ilginçtir&nbsp;denediðim&nbsp;modlar&nbsp;kaldýramadý&nbsp;apachede&nbsp;ciddi&nbsp;yük&lt;br&gt;<br>
durmaya&nbsp;devam&nbsp;etti.&nbsp;&amp;nbsp;Buradaki&nbsp;bottleneck&nbsp;software&nbsp;firewall&nbsp;ataklarý&lt;br&gt;<br>
durdurmadý&nbsp;yeterli&nbsp;olmadý.&nbsp;Yüklenen&nbsp;ip&nbsp;sayýsý&nbsp;baþta&nbsp;1&nbsp;5&nbsp;10&nbsp;diye&nbsp;deðil&lt;br&gt;<br>
de&nbsp;ayný&nbsp;anda&nbsp;100+&nbsp;þeklinde&nbsp;olunca&nbsp;ve&nbsp;iplerde&nbsp;deðiþtiði&nbsp;için&nbsp;çok&nbsp;kýsa&lt;br&gt;<br>
aralýklarla&nbsp;(1dkdan&nbsp;az&nbsp;süre&nbsp;için)&nbsp;yeni&nbsp;ipleri&nbsp;yakalayamadý&nbsp;ve&lt;br&gt;<br>
apacheyi,&nbsp;apachede&nbsp;çalýþan&nbsp;uygulama&nbsp;da&nbsp;mysql&nbsp;i&nbsp;kilitledi..&lt;br&gt;<br>
&lt;br&gt;<br>
Benim&nbsp;örnek&nbsp;verdiðim&nbsp;%30&nbsp;sadece&nbsp;bir&nbsp;tane&nbsp;apache&nbsp;forku&nbsp;için.&nbsp;Maksimum&lt;br&gt;<br>
olaný&nbsp;içindi.&nbsp;Firewall&nbsp;çalýþmadan&nbsp;sistem&nbsp;kitleniyordu,&nbsp;ssha&nbsp;bile&lt;br&gt;<br>
eriþilmiyordu.&nbsp;Firewallla&nbsp;CPU&nbsp;kullanýmý&nbsp;%80-85&nbsp;civarýnda&nbsp;seyretmeye&lt;br&gt;<br>
baþladý.&nbsp;Ayný&nbsp;anda&nbsp;mevcut&nbsp;80&nbsp;portuna&nbsp;connection&nbsp;sayýsý&nbsp;200+&lt;br&gt;<br>
civarýndaydý..&lt;br&gt;<br>
&lt;br&gt;<br>
Saldýrý&nbsp;detayý:&nbsp;Connect&nbsp;flood.&nbsp;Sürekli&nbsp;GET&nbsp;isteði.&nbsp;Saldýrý&nbsp;çalýþan&lt;br&gt;<br>
uygulama&nbsp;üzerinden&nbsp;mysql&nbsp;i&nbsp;devre&nbsp;dýþý&nbsp;býrakmaya&nbsp;yönelik&nbsp;olduðunu&lt;br&gt;<br>
düþünüyorum.&nbsp;Daha&nbsp;önceden&nbsp;benzer&nbsp;bir&nbsp;saldýrrýyla&nbsp;karþýlaþmýþtým..&lt;br&gt;<br>
Gelen&nbsp;paketler&nbsp;gayet&nbsp;normal&nbsp;gözüküyor.&nbsp;Arada&nbsp;malformed&nbsp;requestlerde&lt;br&gt;<br>
geliyordu&nbsp;ama&nbsp;baþka&nbsp;bir&nbsp;kaynaktan&nbsp;olabilir.&lt;br&gt;<br>
&lt;br&gt;<br>
Kubilay;&nbsp;Rusya&nbsp;IP&nbsp;bloklarý&nbsp;konusunda&nbsp;araþtýrma&nbsp;yaparken&nbsp;þöyle&nbsp;bir&lt;br&gt;<br>
siteyle&nbsp;karþýlaþtým,&nbsp;incelemenizi&nbsp;tavsiye&nbsp;ederim:&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://www.countryipblocks.net/&quot;&nbsp;target=&quot;_blank&quot;&gt;http://www.countryipblocks.net/&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
Bedirhan;&nbsp;Apache&nbsp;KeepAlive&nbsp;konfigurasyonda&nbsp;kapalýydý.&nbsp;Apache&nbsp;backdoor&lt;br&gt;<br>
module&nbsp;gibi&nbsp;birþeyler&nbsp;buldum&nbsp;ama&nbsp;bulduðum&nbsp;apache&nbsp;üzerinden&nbsp;backdoor&lt;br&gt;<br>
açan&nbsp;bir&nbsp;moduledu.&nbsp;Senin&nbsp;bahsettiðin&nbsp;modülü&nbsp;paylaþýr&nbsp;mýsýn?&lt;br&gt;<br>
&lt;br&gt;<br>
DNS&nbsp;güncellemsi&nbsp;aklýma&nbsp;geldi&nbsp;ama&nbsp;zararlarýný&nbsp;kýyaslayýnca&nbsp;çözümler&lt;br&gt;<br>
arasýndan&nbsp;çýkardým..&lt;br&gt;<br>
&lt;br&gt;<br>
Aklýn&nbsp;yolu&nbsp;bir:&nbsp;HW&nbsp;firewallarla&nbsp;çözüldü&nbsp;olay.&nbsp;Reverse&nbsp;proxy&nbsp;ile&nbsp;baþka&lt;br&gt;<br>
bir&nbsp;sunucuya&nbsp;yönlendirildi&nbsp;istekler&nbsp;ve&nbsp;o&nbsp;sunucu&nbsp;önünde&nbsp;Layer&nbsp;7&lt;br&gt;<br>
filtering&nbsp;yapýldý.&nbsp;(Juniper&nbsp;üzerinden&nbsp;custom&nbsp;filterlarla)&lt;br&gt;<br>
&lt;br&gt;<br>
Herkese&nbsp;gösterdiði&nbsp;açýlýmlar&nbsp;ve&nbsp;verdiði&nbsp;cevaplardan&nbsp;dolayý&nbsp;teþekkür&nbsp;ediyorum..&lt;br&gt;<br>
&lt;br&gt;<br>
Selamlar,&lt;br&gt;<br>
&lt;br&gt;<br>
M.Musa&nbsp;Ülker&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
2008/11/4&nbsp;Ferruh&nbsp;Mavituna&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:ferruh@mavituna.com&quot;&gt;ferruh@mavituna.com&lt;/a&gt;&amp;gt;:&lt;br&gt;<br>
&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;Wj3C7c&quot;&gt;&amp;gt;&nbsp;Merhabalar&nbsp;Musa,&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;Benim&nbsp;merak&nbsp;ettigim&nbsp;esas&nbsp;kilit&nbsp;noktasi&nbsp;neresi?&nbsp;(gavurlarin&nbsp;tabiri&nbsp;ile&lt;br&gt;<br>
&amp;gt;&nbsp;bottleneck).&nbsp;Yani&nbsp;application&nbsp;da&nbsp;mi&nbsp;is&nbsp;kitleniyor,&nbsp;ondeki&nbsp;firewall&nbsp;mu&lt;br&gt;<br>
&amp;gt;&nbsp;sapitmaya&nbsp;basliyor,&nbsp;load&nbsp;balancer&nbsp;mi&nbsp;vs.&nbsp;?&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;Apache&nbsp;process&amp;#39;&nbsp;i&nbsp;%30&nbsp;ise&nbsp;,&nbsp;uygulamada&nbsp;veya&nbsp;Apache&nbsp;de&nbsp;bir&nbsp;sorun&nbsp;&amp;nbsp;yok&nbsp;diye&lt;br&gt;<br>
&amp;gt;&nbsp;varsayiyorum.&nbsp;Database&nbsp;server&nbsp;ne&nbsp;alemde&nbsp;onda&nbsp;da&nbsp;ciddi&nbsp;bir&nbsp;yuklenme&nbsp;yok&nbsp;mu?&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;Bir&nbsp;de&nbsp;saldirinin&nbsp;detaylari&nbsp;ne?&nbsp;Syn-flood,&nbsp;connect-flood,&nbsp;yogun&nbsp;application&lt;br&gt;<br>
&amp;gt;&nbsp;istekleri&nbsp;(HTTP&nbsp;vs.)?&nbsp;&amp;nbsp;veya&nbsp;baska&nbsp;bir&nbsp;port&nbsp;acikta&nbsp;onun&nbsp;uzerinden&nbsp;mi&nbsp;bir&nbsp;sey&lt;br&gt;<br>
&amp;gt;&nbsp;yapiliyor?&nbsp;gelen&nbsp;paketlerin&nbsp;tum&nbsp;degerleri&nbsp;normal&nbsp;mi?&nbsp;Mesela&nbsp;tuhaf&nbsp;window&lt;br&gt;<br>
&amp;gt;&nbsp;size&nbsp;lari&nbsp;var&nbsp;mi&nbsp;vs.&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;Sonucta&nbsp;DDoS&nbsp;ataklari&nbsp;engellemek&nbsp;cok&nbsp;zor&nbsp;olabiliyor&nbsp;ama&nbsp;bu&nbsp;bilgileri&lt;br&gt;<br>
&amp;gt;&nbsp;verirsen&nbsp;daha&nbsp;detayli&nbsp;yardimci&nbsp;olunabilir&nbsp;sanirim.&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;Iyi&nbsp;Calismalar,&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;2008/11/4&nbsp;Musa&nbsp;Ulker&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:musaulker@gmail.com&quot;&gt;musaulker@gmail.com&lt;/a&gt;&amp;gt;&lt;br&gt;<br>
&amp;gt;&amp;gt;&lt;br&gt;<br>
&amp;gt;&amp;gt;&nbsp;Merhabalar,&lt;br&gt;<br>
&amp;gt;&amp;gt;&lt;br&gt;<br>
&amp;gt;&amp;gt;&nbsp;Dedicated&nbsp;bir&nbsp;sunucuya&nbsp;bir&nbsp;çok&nbsp;koldan&nbsp;DDos&nbsp;saldýrýsý&lt;br&gt;<br>
&amp;gt;&amp;gt;&nbsp;gerçekleþtiriliyor.&nbsp;En&nbsp;çok&nbsp;yük&nbsp;Apache&nbsp;üzerinde.&nbsp;Apache&nbsp;CPU&nbsp;load&amp;#39;ý&nbsp;%30u&lt;br&gt;<br>
&amp;gt;&amp;gt;&nbsp;geçebiliyor&nbsp;farklý&nbsp;apache&nbsp;processleri&nbsp;çalýþýyor.&nbsp;Türlü&nbsp;çalýþmalar&lt;br&gt;<br>
&amp;gt;&amp;gt;&nbsp;yaptým;&nbsp;firewallar&nbsp;(salt&nbsp;iptables,&nbsp;apf,&nbsp;csf&nbsp;vs)&nbsp;denedim,&nbsp;ddos&lt;br&gt;<br>
&amp;gt;&amp;gt;&nbsp;protectionlarý&nbsp;test&nbsp;ettim&nbsp;ama&nbsp;saldýrýyý&nbsp;tam&nbsp;olarak&nbsp;kesemedim.&nbsp;Birazcýk&lt;br&gt;<br>
&amp;gt;&amp;gt;&nbsp;yükü&nbsp;hafifletebildim.&nbsp;Zombie&nbsp;makinalar&nbsp;üzerinden&nbsp;saldýrý&nbsp;halen&nbsp;devam&lt;br&gt;<br>
&amp;gt;&amp;gt;&nbsp;ediyor.&lt;br&gt;<br>
&amp;gt;&amp;gt;&lt;br&gt;<br>
&amp;gt;&amp;gt;&nbsp;Bu&nbsp;konuda&nbsp;nasýl&nbsp;bir&nbsp;yol&nbsp;izlemem&nbsp;gerekiyor?&lt;br&gt;<br>
&amp;gt;&amp;gt;&lt;br&gt;<br>
&amp;gt;&amp;gt;&nbsp;Teþekkürler&lt;br&gt;<br>
&amp;gt;&amp;gt;&lt;br&gt;<br>
&amp;gt;&amp;gt;&nbsp;--&lt;br&gt;<br>
&amp;gt;&amp;gt;&nbsp;M.Musa&nbsp;Ülker&lt;br&gt;<br>
&amp;gt;&amp;gt;&nbsp;_______________________________________________&lt;br&gt;<br>
&amp;gt;&amp;gt;&nbsp;Owasp-turkey&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&amp;gt;&amp;gt;&nbsp;&lt;a&nbsp;href=&quot;mailto:Owasp-turkey@lists.owasp.org&quot;&gt;Owasp-turkey@lists.owasp.org&lt;/a&gt;&lt;br&gt;<br>
&amp;gt;&amp;gt;&nbsp;&lt;a&nbsp;href=&quot;https://lists.owasp.org/mailman/listinfo/owasp-turkey&quot;&nbsp;target=&quot;_blank&quot;&gt;https://lists.owasp.org/mailman/listinfo/owasp-turkey&lt;/a&gt;&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;--&lt;br&gt;<br>
&amp;gt;&nbsp;Ferruh&nbsp;Mavituna&lt;br&gt;<br>
&amp;gt;&nbsp;&lt;a&nbsp;href=&quot;http://ferruh.mavituna.com&quot;&nbsp;target=&quot;_blank&quot;&gt;http://ferruh.mavituna.com&lt;/a&gt;&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;br&nbsp;clear=&quot;all&quot;&gt;&lt;br&gt;--&nbsp;&lt;br&gt;Ferruh&nbsp;Mavituna&lt;br&gt;&lt;a&nbsp;href=&quot;http://ferruh.mavituna.com&quot;&gt;http://ferruh.mavituna.com&lt;/a&gt;&lt;br&gt;
</tt>
