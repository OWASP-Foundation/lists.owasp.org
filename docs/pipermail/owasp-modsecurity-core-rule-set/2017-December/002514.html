<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Owasp-modsecurity-core-rule-set] Setting tx.anomaly_score before including crs-setup.conf somehow works, should it?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:owasp-modsecurity-core-rule-set%40lists.owasp.org?Subject=Re%3A%20%5BOwasp-modsecurity-core-rule-set%5D%20Setting%20tx.anomaly_score%0A%20before%20including%20crs-setup.conf%20somehow%20works%2C%20should%20it%3F&In-Reply-To=%3C20171204151241.rxr2i7va7iq5pzns%40leander%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002512.html">
   <LINK REL="Next"  HREF="002515.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Owasp-modsecurity-core-rule-set] Setting tx.anomaly_score before including crs-setup.conf somehow works, should it?</H1>
    <B>Christian Folini</B> 
    <A HREF="mailto:owasp-modsecurity-core-rule-set%40lists.owasp.org?Subject=Re%3A%20%5BOwasp-modsecurity-core-rule-set%5D%20Setting%20tx.anomaly_score%0A%20before%20including%20crs-setup.conf%20somehow%20works%2C%20should%20it%3F&In-Reply-To=%3C20171204151241.rxr2i7va7iq5pzns%40leander%3E"
       TITLE="[Owasp-modsecurity-core-rule-set] Setting tx.anomaly_score before including crs-setup.conf somehow works, should it?">christian.folini at netnea.com
       </A><BR>
    <I>Mon Dec  4 15:12:41 UTC 2017</I>
    <P><UL>
        <LI>Previous message: <A HREF="002512.html">[Owasp-modsecurity-core-rule-set] Setting tx.anomaly_score before including crs-setup.conf somehow works, should it?
</A></li>
        <LI>Next message: <A HREF="002515.html">[Owasp-modsecurity-core-rule-set] Setting tx.anomaly_score before including crs-setup.conf somehow works, should it?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2514">[ date ]</a>
              <a href="thread.html#2514">[ thread ]</a>
              <a href="subject.html#2514">[ subject ]</a>
              <a href="author.html#2514">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

On Mon, Dec 04, 2017 at 04:07:00PM +0100, Cristian Mammoli wrote:
&gt;<i> In REQUEST-901 thresholds are set to default if not already set, I know.
</I>
Sorry, I jumped to conclusions too quickly then.

&gt;<i> There are no conditionals like in 901100.
</I>&gt;<i> 
</I>&gt;<i> What am I missing?
</I>
The problem sounds as if you would have to raise the debug log level and
work your way through the file to see which rule sets which value and in
what order.

Ahoj,

Christian


&gt;<i> 
</I>&gt;<i> Ty
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Il 04/12/2017 14:47, Christian Folini ha scritto:
</I>&gt;<i> &gt; Hey Cristian,
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; No, this works perfectly. Let me tell you why:
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; The crs-setup.conf does not actually set the threshold. Instead the
</I>&gt;<i> &gt; REQUEST-901 initialization file sets the threshold to the default value
</I>&gt;<i> &gt; if it is not set.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; You are setting the anomaly score in your rule file in modsecurity, so no
</I>&gt;<i> &gt; need to set it to the default during the initialization.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; This is very close to what I personally favor: Setting it in the server
</I>&gt;<i> &gt; config and not in an include. That way the threshold is always in plane sight.
</I>&gt;<i> &gt; Same for paranoia level btw.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Ahoj,
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Christian
</I>
-- 
<A HREF="https://www.feistyduck.com/training/modsecurity-training-course">https://www.feistyduck.com/training/modsecurity-training-course</A>
<A HREF="https://www.feistyduck.com/books/modsecurity-handbook/">https://www.feistyduck.com/books/modsecurity-handbook/</A>
mailto:<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-modsecurity-core-rule-set">christian.folini at netnea.com</A>
twitter: @ChrFolini
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002512.html">[Owasp-modsecurity-core-rule-set] Setting tx.anomaly_score before including crs-setup.conf somehow works, should it?
</A></li>
	<LI>Next message: <A HREF="002515.html">[Owasp-modsecurity-core-rule-set] Setting tx.anomaly_score before including crs-setup.conf somehow works, should it?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2514">[ date ]</a>
              <a href="thread.html#2514">[ thread ]</a>
              <a href="subject.html#2514">[ subject ]</a>
              <a href="author.html#2514">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.owasp.org/mailman/listinfo/owasp-modsecurity-core-rule-set">More information about the Owasp-modsecurity-core-rule-set
mailing list</a><br>
</body></html>
