<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Owasp-modsecurity-core-rule-set] allow:request
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:owasp-modsecurity-core-rule-set%40lists.owasp.org?Subject=%5BOwasp-modsecurity-core-rule-set%5D%20allow%3Arequest&In-Reply-To=db523627fd193d6bbef6e6f78a1652e5%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000831.html">
   <LINK REL="Next"  HREF="000833.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Owasp-modsecurity-core-rule-set] allow:request</H1>
    <B>Ryan Barnett</B> 
    <A HREF="mailto:owasp-modsecurity-core-rule-set%40lists.owasp.org?Subject=%5BOwasp-modsecurity-core-rule-set%5D%20allow%3Arequest&In-Reply-To=db523627fd193d6bbef6e6f78a1652e5%40mail.gmail.com"
       TITLE="[Owasp-modsecurity-core-rule-set] allow:request">RBarnett at trustwave.com
       </A><BR>
    <I>Wed Aug 10 08:54:20 EDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="000831.html">[Owasp-modsecurity-core-rule-set] allow:request
</A></li>
        <LI>Next message: <A HREF="000833.html">[Owasp-modsecurity-core-rule-set] ModSecurity Advanced Topic of the Week: Audit Log Searching with ModGrep
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#832">[ date ]</a>
              <a href="thread.html#832">[ thread ]</a>
              <a href="subject.html#832">[ subject ]</a>
              <a href="author.html#832">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 8/9/11 5:46 PM, &quot;David Sinclair&quot; &lt;<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-modsecurity-core-rule-set">dbsinclair at multiservice.com</A>&gt; wrote:


&gt;<i>The SecRuleEngine variable is set to DetectionOnly.  I guess that makes
</I>&gt;<i>sense if it only detecting but wish it had been documented a bit more.
</I>
Good point David.  I updated the SecRuleEngine info for DetectionOnly and
added a NOTE to the Reference Manual to point this out -

<A HREF="https://sourceforge.net/apps/mediawiki/mod-security/index.php?title=Referen">https://sourceforge.net/apps/mediawiki/mod-security/index.php?title=Referen</A>
ce_Manual#SecRuleEngine

<A HREF="https://sourceforge.net/apps/mediawiki/mod-security/index.php?title=Referen">https://sourceforge.net/apps/mediawiki/mod-security/index.php?title=Referen</A>
ce_Manual#Actions


-Ryan

&gt;<i>Thank you for the help and quick response.
</I>&gt;<i>
</I>&gt;<i>David B. Sinclair
</I>&gt;<i>Security Manager
</I>&gt;<i>Email:   <A HREF="https://lists.owasp.org/mailman/listinfo/owasp-modsecurity-core-rule-set">dbsinclair at multiservice.com</A>
</I>&gt;<i>-----Original Message-----
</I>&gt;<i>From: Ryan Barnett [mailto:<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-modsecurity-core-rule-set">RBarnett at trustwave.com</A>]
</I>&gt;<i>Sent: Tuesday, August 09, 2011 4:41 PM
</I>&gt;<i>To: David Sinclair; <A HREF="https://lists.owasp.org/mailman/listinfo/owasp-modsecurity-core-rule-set">owasp-modsecurity-core-rule-set at lists.owasp.org</A>
</I>&gt;<i>Subject: Re: [Owasp-modsecurity-core-rule-set] allow:request
</I>&gt;<i>
</I>&gt;<i>What is your SecRuleEngine set to?  If it is DetectionOnly then it will
</I>&gt;<i>not execute allow actions as they are considered disruptive.  If this is
</I>&gt;<i>the case, then you can add &quot;ctl:ruleEngine=On&quot; to your rule to trigger the
</I>&gt;<i>allow.  Remember though, that this has now enabled blocking mode for this
</I>&gt;<i>transaction which means that any phase 3 and 4 rules may trigger blocks.
</I>&gt;<i>If you don't want that, then you should add another phase:3 rule to your
</I>&gt;<i>custom rules file to &quot;ctl:ruleEngine=DetectionOnly&quot;.
</I>&gt;<i>
</I>&gt;<i>-Ryan
</I>&gt;<i>
</I>&gt;<i>From: David Sinclair
</I>&gt;<i>&lt;<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-modsecurity-core-rule-set">dbsinclair at multiservice.com</A>&lt;mailto:<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-modsecurity-core-rule-set">dbsinclair at multiservice.com</A>&gt;&gt;
</I>&gt;<i>Date: Tue, 9 Aug 2011 16:37:12 -0500
</I>&gt;<i>To:
</I>&gt;<i>&quot;<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-modsecurity-core-rule-set">owasp-modsecurity-core-rule-set at lists.owasp.org</A>&lt;mailto:owasp-modsecurity-
</I>&gt;<i><A HREF="https://lists.owasp.org/mailman/listinfo/owasp-modsecurity-core-rule-set">core-rule-set at lists.owasp.org</A>&gt;&quot;
</I>&gt;<i>&lt;<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-modsecurity-core-rule-set">owasp-modsecurity-core-rule-set at lists.owasp.org</A>&lt;mailto:owasp-modsecurity-
</I>&gt;<i><A HREF="https://lists.owasp.org/mailman/listinfo/owasp-modsecurity-core-rule-set">core-rule-set at lists.owasp.org</A>&gt;&gt;
</I>&gt;<i>Subject: [Owasp-modsecurity-core-rule-set] allow:request
</I>&gt;<i>
</I>&gt;<i>I am rather new to modsecurity rules and am having trouble understanding
</I>&gt;<i>the functionality of allow:request.  From this debug logsnippet, I have
</I>&gt;<i>written a custom rule, modsecurity_crs_15_custom_rules.conf,  that is
</I>&gt;<i>designed to allow the GET of a .dtd and skip the remainder of request
</I>&gt;<i>phase processing with allow:request.  However, this log shows that the
</I>&gt;<i>processing of the rules in the request phases continues with crs_20 that I
</I>&gt;<i>am trying to avoid.  Is there something that I have missed?
</I>&gt;<i>
</I>&gt;<i> Warning. Operator EQ matched 0 at TX. [file
</I>&gt;<i>&quot;/etc/httpd/conf/modsecurity_crs/modsecurity_crs_10_config.conf&quot;] [line
</I>&gt;<i>&quot;309&quot;] [id &quot;98
</I>&gt;<i> Rule returned 1.
</I>&gt;<i> Match -&gt; mode NEXT_RULE.
</I>&gt;<i> Recipe: Invoking rule 2ad8c7cf62e0; [file
</I>&gt;<i>&quot;/etc/httpd/conf/modsecurity_crs/base_rules/modsecurity_crs_15_custom_rule
</I>&gt;<i>s.conf&quot;] [line
</I>&gt;<i> Rule 2ad8c7cf62e0: SecRule &quot;REQUEST_METHOD&quot; &quot;@rx ^GET$&quot;
</I>&gt;<i>&quot;phase:1,chain,nolog,t:none,severity:6,rev:1.0.0,allow:request,msg:'Allow
</I>&gt;<i> Transformation completed in 1 usec.
</I>&gt;<i> Executing operator &quot;rx&quot; with param &quot;^GET$&quot; against REQUEST_METHOD.
</I>&gt;<i> Target value: &quot;GET&quot;
</I>&gt;<i> Operator completed in 2 usec.
</I>&gt;<i> Rule returned 1.
</I>&gt;<i> Match -&gt; mode NEXT_RULE.
</I>&gt;<i> Recipe: Invoking rule 2ad8c7cf6ea0; [file
</I>&gt;<i>&quot;/etc/httpd/conf/modsecurity_crs/base_rules/modsecurity_crs_15_custom_rule
</I>&gt;<i>s.conf&quot;] [line
</I>&gt;<i> Rule 2ad8c7cf6ea0: SecRule &quot;REQUEST_FILENAME&quot; &quot;@rx ^/dtd/.*[.]dtd$&quot;
</I>&gt;<i>&quot;t:none&quot;
</I>&gt;<i> Transformation completed in 1 usec.
</I>&gt;<i> Executing operator &quot;rx&quot; with param &quot;^/dtd/.*[.]dtd$&quot; against
</I>&gt;<i>REQUEST_FILENAME.
</I>&gt;<i> Target value: &quot;/dtd/BCSSRequest-v1.1.dtd&quot;
</I>&gt;<i> Operator completed in 3 usec.
</I>&gt;<i> Warning. Pattern match &quot;^/dtd/.*[.]dtd$&quot; at REQUEST_FILENAME. [file
</I>&gt;<i>&quot;/etc/httpd/conf/modsecurity_crs/base_rules/modsecurity_crs_15
</I>&gt;<i> Rule returned 1.
</I>&gt;<i> Match -&gt; mode NEXT_RULE.
</I>&gt;<i> Recipe: Invoking rule 2ad8c7cf9ef8; [file
</I>&gt;<i>&quot;/etc/httpd/conf/modsecurity_crs/base_rules/modsecurity_crs_20_protocol_vi
</I>&gt;<i>olations.conf&quot;
</I>&gt;<i> Rule 2ad8c7cf9ef8: SecRule &quot;REQUEST_LINE&quot; &quot;!@rx
</I>&gt;<i>^(?:(?:[a-z]{3,10}\\s+(?:\\w{3,7}?://[\\w\\-\\./]*(?::\\d+)?)?/[^?#]*(?:\\
</I>&gt;<i>?[^#\\s]
</I>&gt;<i> T (0) lowercase: &quot;get /dtd/bcssrequest-v1.1.dtd http/1.0&quot;
</I>&gt;<i> Transformation completed in 9 usec.
</I>&gt;<i> Executing operator &quot;!rx&quot; with param
</I>&gt;<i>&quot;^(?:(?:[a-z]{3,10}\\s+(?:\\w{3,7}?://[\\w\\-\\./]*(?::\\d+)?)?/[^?#]*(?:\
</I>&gt;<i>\?[^#\\s]*)?(?:#[\\S
</I>&gt;<i> Target value: &quot;get /dtd/bcssrequest-v1.1.dtd http/1.0&quot;
</I>&gt;<i> Operator completed in 8 usec.
</I>&gt;<i> Rule returned 0.
</I>&gt;<i> No match, not chained -&gt; mode NEXT_RULE.
</I>&gt;<i>
</I>&gt;<i>David B. Sinclair
</I>&gt;<i>Security Manager
</I>&gt;<i>Email:   <A HREF="https://lists.owasp.org/mailman/listinfo/owasp-modsecurity-core-rule-set">dbsinclair at multiservice.com</A>&lt;mailto:<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-modsecurity-core-rule-set">dbsinclair at multiservice.com</A>&gt;
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>--------------------------------------------------------------------------
</I>&gt;<i>-------------
</I>&gt;<i>This email is intended solely for the use of the addressee and may
</I>&gt;<i>contain information that is confidential, proprietary, or both.
</I>&gt;<i>If you receive this email in error please immediately notify the
</I>&gt;<i>sender and delete the email.
</I>&gt;<i>--------------------------------------------------------------------------
</I>&gt;<i>-------------
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>________________________________
</I>&gt;<i>This transmission may contain information that is privileged,
</I>&gt;<i>confidential, and/or exempt from disclosure under applicable law. If you
</I>&gt;<i>are not the intended recipient, you are hereby notified that any
</I>&gt;<i>disclosure, copying, distribution, or use of the information contained
</I>&gt;<i>herein (including any reliance thereon) is STRICTLY PROHIBITED. If you
</I>&gt;<i>received this transmission in error, please immediately contact the sender
</I>&gt;<i>and destroy the material in its entirety, whether in electronic or hard
</I>&gt;<i>copy format.
</I>&gt;<i>
</I>&gt;<i>--------------------------------------------------------------------------
</I>&gt;<i>-------------
</I>&gt;<i>This email is intended solely for the use of the addressee and may
</I>&gt;<i>contain information that is confidential, proprietary, or both.
</I>&gt;<i>If you receive this email in error please immediately notify the
</I>&gt;<i>sender and delete the email.
</I>&gt;<i>--------------------------------------------------------------------------
</I>&gt;<i>-------------
</I>&gt;<i>
</I>&gt;<i>
</I>

This transmission may contain information that is privileged, confidential, and/or exempt from disclosure under applicable law. If you are not the intended recipient, you are hereby notified that any disclosure, copying, distribution, or use of the information contained herein (including any reliance thereon) is STRICTLY PROHIBITED. If you received this transmission in error, please immediately contact the sender and destroy the material in its entirety, whether in electronic or hard copy format.

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000831.html">[Owasp-modsecurity-core-rule-set] allow:request
</A></li>
	<LI>Next message: <A HREF="000833.html">[Owasp-modsecurity-core-rule-set] ModSecurity Advanced Topic of the Week: Audit Log Searching with ModGrep
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#832">[ date ]</a>
              <a href="thread.html#832">[ thread ]</a>
              <a href="subject.html#832">[ subject ]</a>
              <a href="author.html#832">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.owasp.org/mailman/listinfo/owasp-modsecurity-core-rule-set">More information about the Owasp-modsecurity-core-rule-set
mailing list</a><br>
</body></html>
