<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Owasp-modsecurity-core-rule-set] Input filter: failed to create temporary file
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:owasp-modsecurity-core-rule-set%40lists.owasp.org?Subject=%5BOwasp-modsecurity-core-rule-set%5D%20Input%20filter%3A%20failed%20to%0A%20create%20temporary%20file&In-Reply-To=4B4F8B30.8050801%40breach.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000262.html">
   <LINK REL="Next"  HREF="000264.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Owasp-modsecurity-core-rule-set] Input filter: failed to create temporary file</H1>
    <B>Matthew Saltzman</B> 
    <A HREF="mailto:owasp-modsecurity-core-rule-set%40lists.owasp.org?Subject=%5BOwasp-modsecurity-core-rule-set%5D%20Input%20filter%3A%20failed%20to%0A%20create%20temporary%20file&In-Reply-To=4B4F8B30.8050801%40breach.com"
       TITLE="[Owasp-modsecurity-core-rule-set] Input filter: failed to create temporary file">mjs at clemson.edu
       </A><BR>
    <I>Thu Jan 14 19:03:14 EST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="000262.html">[Owasp-modsecurity-core-rule-set] Input filter: failed to create temporary file
</A></li>
        <LI>Next message: <A HREF="000264.html">[Owasp-modsecurity-core-rule-set] Input filter: failed to create temporary file
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#263">[ date ]</a>
              <a href="thread.html#263">[ thread ]</a>
              <a href="subject.html#263">[ subject ]</a>
              <a href="author.html#263">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Thu, 2010-01-14 at 13:22 -0800, Brian Rectanus wrote: 
&gt;<i> Matthew Saltzman wrote:
</I>&gt;<i> &gt; On Mon, 2010-01-11 at 22:04 -0500, Matthew Saltzman wrote: 
</I>&gt;<i> &gt;&gt; On Mon, 2010-01-11 at 12:46 -0800, Brian Rectanus wrote: 
</I>&gt;<i> &gt;&gt;&gt; I don't think temp files will create the directory structure (working
</I>&gt;<i> &gt;&gt;&gt; from memory here).  Verify that it does not happen after creating
</I>&gt;<i> &gt;&gt;&gt; /tmp/httpd with mode 1777.  I would not create it there, though.  Better
</I>&gt;<i> &gt;&gt;&gt; in something like /var/httpd/modsec/tmp and used only for modsec.
</I>&gt;<i> &gt;&gt; Interesting:
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;       * Making /tmp/httpd, mode 1777, owner apache:apache solves the
</I>&gt;<i> &gt;&gt;         problem.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; This seems like a bug--you can't count on the directory to exist
</I>&gt;<i> &gt;&gt; (particularly if it lives in /tmp), so you have to check and either not
</I>&gt;<i> &gt;&gt; use it or create it.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;       * Changing /etc/httpd/modsecurity.d/modsecurity_crs_10_config.conf
</I>&gt;<i> &gt;&gt;         to point to a different directory for SecUploadDir, SecDataDir,
</I>&gt;<i> &gt;&gt;         and SecTmpDir and either reloading or restarting httpd doesn't
</I>&gt;<i> &gt;&gt;         change where the file is created--it's still in /tmp. 
</I>&gt;<i> &gt;&gt;       * Moving the directives to modsecurity_localrules.conf has the
</I>&gt;<i> &gt;&gt;         same lack of effect on the location where the file is written.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; So either I'm doing something wrong here, or my directives are being
</I>&gt;<i> &gt;&gt; ignored for some reason.  More hints welcome.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Thanks for your help so far.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Any suggestions how I should follow this up?  Can anyone confirm that
</I>&gt;<i> &gt; it's a bug or explain how to work around it?  Or should I be taking it
</I>&gt;<i> &gt; to a different list?
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Thanks.
</I>&gt;<i> 
</I>&gt;<i> If the directives are not changing it, then maybe they are set later on
</I>&gt;<i> in the config somewhere (ie overwriting your change)?  I suggest you
</I>&gt;<i> grep for where SecTmpDir may be set in another location.
</I>
The only occurrences I can find are
in /etc/httpd/modsecurity.d/modsecurity_crs_10_config.conf and 
/etc/httpd/modsecurity.d/modsecurity_localrules.conf.  The former came
with the installation, the latter are my changes, which AIUI will
override the ones in the file that sorts earlier.  There is one instance
of each directive in each of the files.  Also, changing the ones in
modsecurity_crs_10_config.conf didn't seem to help either.

&gt;<i> 
</I>&gt;<i> -B
</I>&gt;<i> 
</I>
-- 
                Matthew Saltzman

Clemson University Math Sciences
mjs AT clemson DOT edu
<A HREF="http://www.math.clemson.edu/~mjs">http://www.math.clemson.edu/~mjs</A>
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000262.html">[Owasp-modsecurity-core-rule-set] Input filter: failed to create temporary file
</A></li>
	<LI>Next message: <A HREF="000264.html">[Owasp-modsecurity-core-rule-set] Input filter: failed to create temporary file
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#263">[ date ]</a>
              <a href="thread.html#263">[ thread ]</a>
              <a href="subject.html#263">[ subject ]</a>
              <a href="author.html#263">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.owasp.org/mailman/listinfo/owasp-modsecurity-core-rule-set">More information about the Owasp-modsecurity-core-rule-set
mailing list</a><br>
</body></html>
