<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Owasp-modsecurity-core-rule-set] Facebook scrape problem
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:owasp-modsecurity-core-rule-set%40lists.owasp.org?Subject=Re%3A%20%5BOwasp-modsecurity-core-rule-set%5D%20Facebook%20scrape%20problem&In-Reply-To=%3C20160518090756.GA5099%40elias%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002166.html">
   <LINK REL="Next"  HREF="002168.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Owasp-modsecurity-core-rule-set] Facebook scrape problem</H1>
    <B>Christian Folini</B> 
    <A HREF="mailto:owasp-modsecurity-core-rule-set%40lists.owasp.org?Subject=Re%3A%20%5BOwasp-modsecurity-core-rule-set%5D%20Facebook%20scrape%20problem&In-Reply-To=%3C20160518090756.GA5099%40elias%3E"
       TITLE="[Owasp-modsecurity-core-rule-set] Facebook scrape problem">christian.folini at netnea.com
       </A><BR>
    <I>Wed May 18 09:07:56 UTC 2016</I>
    <P><UL>
        <LI>Previous message: <A HREF="002166.html">[Owasp-modsecurity-core-rule-set] Facebook scrape problem
</A></li>
        <LI>Next message: <A HREF="002168.html">[Owasp-modsecurity-core-rule-set] Facebook scrape problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2167">[ date ]</a>
              <a href="thread.html#2167">[ thread ]</a>
              <a href="subject.html#2167">[ subject ]</a>
              <a href="author.html#2167">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Kenneth,

On Wed, May 18, 2016 at 03:24:49PM +0800, T. Kenneth Lojo (IRRI) wrote:
&gt;<i> &quot;I suggest you run in blocking mode with anomaly scoring on and
</I>&gt;<i> a high anomaly limit (-&gt; 1K or more).&quot;
</I>&gt;<i> 
</I>&gt;<i> Do I chance the inbound and outbound values to 1k+?
</I>
The relevant one is inbound. It's very unusual to get outbound scores
higher then 10 or 20. 

For convenience, I usually configure the two in sync. Thus both to 1K to
start with. Then I tune, then I lower the limits. In multiple
iterations down to 10 or 5.

&gt;<i> (deny to delayed blocking)
</I>&gt;<i> 66 SecDefaultAction &quot;phase:1,delayed blocking,log&quot;
</I>&gt;<i> 67 SecDefaultAction &quot;phase:2,delayed blocking,log&quot;
</I>
What is delayed blocking? Looks like a misunderstanding.
I run with pass/pass and let the core rules do the blocking (in the
files mentioned by No&#235;l).

&gt;<i> and uncommented:
</I>&gt;<i> 
</I>&gt;<i> 152 SecAction \
</I>&gt;<i> ...
</I>
That's the one.


I think you have realised that there are multiple &quot;schools&quot; or
strategies to CRS deployments or tuning in ithe general sense.
Barry favors to start in detection mode, tune and then go to a 
strict blocking mode. I am an advocate of starting in blocking mode
with anomaly scoring and a high anomaly limit, then work your way
down to a low limit. The final result will be almost the same.
As Barry tends to disable non-critical rules, you end up with blocking
on the critical ones. These are the ones which give you a score
of 5. I usually try and tune down to a limit of 5. So it's
really identical. It's just a different path to reach the same goal. 
My key argument for my method is, that people never leave detection
mode because they fear the switch to blocking. If you start with
blocking (and a high limit), then every iteration lowering the limits
helps you to build up confidence in your system and there is no
final &quot;switch from detection to blocking&quot;.
The example which contradicts my statement is Barry who actually
switches to blocking in the end. I think this is rare.

Ahoj,

Christian





Ahoj,

Christian


-- 
Happiness exists on earth, and it is won through prudent
exercise of reason, knowledge of the harmony of the universe, and
constant practice of generosity.       &#160;
-- Jos&#233; Mart&#237;
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002166.html">[Owasp-modsecurity-core-rule-set] Facebook scrape problem
</A></li>
	<LI>Next message: <A HREF="002168.html">[Owasp-modsecurity-core-rule-set] Facebook scrape problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2167">[ date ]</a>
              <a href="thread.html#2167">[ thread ]</a>
              <a href="subject.html#2167">[ subject ]</a>
              <a href="author.html#2167">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.owasp.org/mailman/listinfo/owasp-modsecurity-core-rule-set">More information about the Owasp-modsecurity-core-rule-set
mailing list</a><br>
</body></html>
