From chaim at chaimsanders.com  Mon Nov  6 16:53:19 2017
From: chaim at chaimsanders.com (Chaim Sanders)
Date: Mon, 6 Nov 2017 11:53:19 -0500
Subject: [Owasp-modsecurity-core-rule-set] Up 11/6: Monthly Project Chat
In-Reply-To: <CAE8hE=q0TdyxGK6JGW2pEF1ikUHuReqAbsOD_cOkAWieTUAoUw@mail.gmail.com>
References: <CAE8hE=q0TdyxGK6JGW2pEF1ikUHuReqAbsOD_cOkAWieTUAoUw@mail.gmail.com>
Message-ID: <CAE8hE=oxHfP_2Cgcrn4jKfFAaAqOyY1hW=Y95fBp6x67WE1w5w@mail.gmail.com>

Greetings again,

This is a reminder of our regular Core Rule Set project chat.

(please note that the EST has been adjusted for DST)
20:30 CET (13:30 EDT, 18:30 GMT)
on Freenode IRC, channel #modsecurity

The current agenda can be found here:

<http://goog_2053163377/>
https://github.com/SpiderLabs/owasp-modsecurity-crs/issues/925

On Fri, Oct 27, 2017 at 7:02 PM, Chaim Sanders <chaim at chaimsanders.com>
wrote:

> Hello everyone,
>
> Coming up on November 6th, we'll have our regular Core Rule Set project
> chat.
> 20:30 CET (14:30 EDT, 18:30 GMT)
> on Freenode IRC, channel #modsecurity
>
> If you're interested in learning more about the project or you are
> interested in a particular issue/feature, we'd love to hear from you. The
> current agenda can be found here:
>
> <http://goog_2053163377>
> https://github.com/SpiderLabs/owasp-modsecurity-crs/issues/925
>
> Cheers,
>
> --
> --
> Chaim Sanders
> http://www.ChaimSanders.com
>



-- 
-- 
Chaim Sanders
http://www.ChaimSanders.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.owasp.org/pipermail/owasp-modsecurity-core-rule-set/attachments/20171106/c9283d7d/attachment.html>

From chaim at chaimsanders.com  Tue Nov  7 00:47:29 2017
From: chaim at chaimsanders.com (Chaim Sanders)
Date: Mon, 6 Nov 2017 19:47:29 -0500
Subject: [Owasp-modsecurity-core-rule-set] News from the Core Rule Set
	(2017-11-06)
Message-ID: <CAE8hE=r3hOy7U8kMhA-v1u-nqn4U_nHJt+e2noBgvy2G1YY+zQ@mail.gmail.com>

This is the CRS newsletter covering the period from Early September until
today.

We held our monthly community chat. We had quite a few people stop by.
Special thanks to our active participants:

   - dune73
   - fzipi
   - csanders
   - franbuehler
   - emphazer
   - spartantri
   - luketheduke
   - techair
   - jose_
   - airween
   - athmane
   - bostrt

During the chat we discussed the following

   - Promotion of 3 heavy contributors to developers (@fgsch
   <https://github.com/fgsch>, @fzipi <https://github.com/fzipi> and
   @spartantri <https://github.com/spartantri>)
      - Docs will be updated to reflect their promotion, congrats and thank
      you!!!
   - CRS Summit at AppSecEU in June in Tel Aviv (?)
      - dune73 will setup a project and let us know the status as we move
      along.
      - fzipi spoke at OWASP Dev Summit about WAF test data. A new license
      is available (https://cdla.io/)
   - Testing (FTW is working when using with CRS-support/ftw#14
   <https://github.com/CRS-support/ftw/pull/14>)
      - PR is awaiting merge but seems to be working well.
      - dune73 plans to write a blog.
   - Idea to update release poster (with logo in the center)
      - We had some great press about the poster.
      - Need to check balance but Dune73 will finance privately changes.
      - Shooting for by AppSecEU
      - Idea to start to sell the release poster via a printing service
      like Redbubble <https://www.redbubble.com/>
   - Info: CRS nominated for the German Open Source Business award (
   http://osbar.it)
      - Everyone is excited thank you to Dune73 for nominating us
   - Plans for new blog posts
      - Franbuehler writing up about SQL disassembly
      - dune73 writing about FTW
      - csanders-git writing about Apache vulnerability breakdown.
   - [PR #881 <https://github.com/SpiderLabs/owasp-modsecurity-crs/pull/881>]
   : Java Attacks
      - Will be assigned to csanders-git
   - [PR #884 <https://github.com/SpiderLabs/owasp-modsecurity-crs/pull/884>]
   : SQL injection probing rule split 942370
      - emphazer is working on a PR for this so it's in line with
      franbuelers comments.
   - [PR #896 <https://github.com/SpiderLabs/owasp-modsecurity-crs/pull/896>]
   : Command substitution backquoted version support
      - Splitting into two and fixing conflict when available.
   - [PR #899 <https://github.com/SpiderLabs/owasp-modsecurity-crs/pull/899>]
   : Dokuwiki and Nextcloud exclusion packages (work in progress)
      - Will be done when submitter has time.
   - [PR #905 <https://github.com/SpiderLabs/owasp-modsecurity-crs/pull/905>]
   : Duplicated header bypass fix and chunk support
      - csanders-git and fzipi are going to take the helm on getting this
      one through.
   - [PR #922 <https://github.com/SpiderLabs/owasp-modsecurity-crs/pull/922>]
   : New developers (see above)
      - Merged, need to add other testers also.
      - remove spratantri from 905 as contributor
   - Many PRs / test updates by @azhao155 <https://github.com/azhao155> (which
   are awesome). Bring up a question about what to do with Apache versus Nginx
      - behaviors when the underlying engine 'fixes' and issue.
      - Going to add support for multiple return status. This should take
      care of all the test updates.
   - [Issue #924
   <https://github.com/SpiderLabs/owasp-modsecurity-crs/issues/924>]
   Tagging of CVE/CWE
      - The conversation centered around the if adding these added
      increased complexity of writing rules it may also muddy logs
      - Everyone agreed additional information would be nice, CVE CWE,
      WASC, CAPEC
      - Pushed the conversation back to the issue with regard to CVE.
   - Release 3.1 planning
      - Possible after Java fixes are done.
   - Stickers and maybe shirts (for appsec eu) using Redbubble
   - New ModSecv3 t-shirt were made, current order is empty but more may be
   coming

The next community chats will be held on the following dates:

   - Dec 4, 2017, 20:30 CET
   - January 8, 2018 20:30 CET (Note: The change from our normal schedule)
   - February 5, 2018 20:30 CET

Upcoming talks and talks that were just posted

   - ModSec 3.0 talk on B-sides Toronto next week:
   http://www.bsidesto.ca/abstracts.html#6
   - BlackHat Europe Arsenal demo for libModSecurity in December:
   https://www.blackhat.com/eu-17/arsenal/schedule/#modsecurity-300-9079
   - WAFs FTW! A modern devops approach to security testing:
   https://www.youtube.com/watch?v=05Uy0R7UdFw
   <https://www.youtube.com/watch?v=05Uy0R7UdFw>
   - Introducing the OWASP ModSEcurity Core Rule Set (CRS) 3.0:
   https://www.youtube.com/watch?v=oCxW966128A

Some nice new blog posts have come out on coreruleset.org

   - How You Can Help the CRS Project
   <https://coreruleset.org/20170913/how-you-can-help-the-crs-project/>
   - Writing FTW test cases for OWASP CRS
   <https://coreruleset.org/20170915/writing-ftw-test-cases-for-owasp-crs/>
   - OptionsBleed Defenses <https://coreruleset.org/20170920/optionsbleed/>
   - CRS Project Nominated for Swiss DINACon Award
   <https://coreruleset.org/20171003/crs-project-nominated-for-swiss-dinacon-award/>


-- 
-- 
Chaim Sanders
http://www.ChaimSanders.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.owasp.org/pipermail/owasp-modsecurity-core-rule-set/attachments/20171106/2b53d9b6/attachment.html>

From brentgclarklist at gmail.com  Tue Nov  7 15:30:43 2017
From: brentgclarklist at gmail.com (Brent Clark)
Date: Tue, 7 Nov 2017 17:30:43 +0200
Subject: [Owasp-modsecurity-core-rule-set] No logging for SQLi rules
Message-ID: <85474212-cf1b-3744-92a6-45771ccedbbb@gmail.com>

Good day Guys

I'm in bit of a pickle, in that, I've received a request that no modsecurity logs may contains passwords or attempted passwords etc in the log.

This is for if we get audited.

I can set:

|SecDefaultAction "phase:1,deny,nolog,auditlog" SecDefaultAction
"phase:2,deny,nolog,auditlog" But then I would loose visibility of other
issues. This is mostly for the SQLi rules that I am trying to tackle.
Does anyone know of a way of disabling logging, without having to search
and replace the rules provided by Owasp. If anyone can assist, it would
be greatly appreciated. Regards Brent Clark |

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.owasp.org/pipermail/owasp-modsecurity-core-rule-set/attachments/20171107/c8e82f90/attachment.html>

From christian.folini at netnea.com  Tue Nov  7 15:45:45 2017
From: christian.folini at netnea.com (Christian Folini)
Date: Tue, 7 Nov 2017 16:45:45 +0100
Subject: [Owasp-modsecurity-core-rule-set] No logging for SQLi rules
In-Reply-To: <85474212-cf1b-3744-92a6-45771ccedbbb@gmail.com>
References: <85474212-cf1b-3744-92a6-45771ccedbbb@gmail.com>
Message-ID: <20171107154545.fg6out7oqkla5234@leander>

Hey Brent,

There is the sanitize group of actions that applies to the Audit log and will
replace certain parameter values with asterisks.

However, the alert message written to the Apache Error-Log and the Debug-Log
(Level 3) are unaffected by this.

It's one of the major issues I have with ModSecurity.

The following issue described this shortcoming:
https://github.com/SpiderLabs/ModSecurity/issues/1132

Ahoj,

Christian

On Tue, Nov 07, 2017 at 05:30:43PM +0200, Brent Clark wrote:
> Good day Guys
> I'm in bit of a pickle, in that, I've received a request that no modsecurity log
> s may contains passwords or attempted passwords etc in the log.
> This is for if we get audited.
> 
> I can set:
> SecDefaultAction "phase:1,deny,nolog,auditlog"
> SecDefaultAction "phase:2,deny,nolog,auditlog"
> 
> But then I would loose visibility of other issues.
> 
> This is mostly for the SQLi rules that I am trying to tackle.
> 
> Does anyone know of a way of disabling logging, without having to search and rep
> lace the rules provided by Owasp.
> 
> If anyone can assist, it would be greatly appreciated.
> 
> Regards
> Brent Clark

> _______________________________________________
> Owasp-modsecurity-core-rule-set mailing list
> Owasp-modsecurity-core-rule-set at lists.owasp.org
> https://lists.owasp.org/mailman/listinfo/owasp-modsecurity-core-rule-set


-- 
https://www.feistyduck.com/training/modsecurity-training-course
https://www.feistyduck.com/books/modsecurity-handbook/
mailto:christian.folini at netnea.com
twitter: @ChrFolini

From oelnaggar04 at gmail.com  Thu Nov  9 07:10:00 2017
From: oelnaggar04 at gmail.com (Osama Elnaggar)
Date: Thu, 9 Nov 2017 01:10:00 -0600
Subject: [Owasp-modsecurity-core-rule-set] No logging for SQLi rules
In-Reply-To: <20171107154545.fg6out7oqkla5234@leander>
References: <85474212-cf1b-3744-92a6-45771ccedbbb@gmail.com>
	<20171107154545.fg6out7oqkla5234@leander>
Message-ID: <CACva_gFd=6SjEwSWke2ZfPxsfuamA1MDMyREK0Aio7dynbpj3Q@mail.gmail.com>

Thinking out loud here.  As a temporary solution for the ErrorLog issue,
how about using Apache's piped logging option and piping it through sed
which does the sanitization before writing it to disk?

-- 
Osama Elnaggar

On November 8, 2017 at 2:47:48 AM, Christian Folini (
christian.folini at netnea.com) wrote:

Hey Brent,

There is the sanitize group of actions that applies to the Audit log and
will
replace certain parameter values with asterisks.

However, the alert message written to the Apache Error-Log and the
Debug-Log
(Level 3) are unaffected by this.

It's one of the major issues I have with ModSecurity.

The following issue described this shortcoming:
https://github.com/SpiderLabs/ModSecurity/issues/1132

Ahoj,

Christian

On Tue, Nov 07, 2017 at 05:30:43PM +0200, Brent Clark wrote:
> Good day Guys
> I'm in bit of a pickle, in that, I've received a request that no
modsecurity log
> s may contains passwords or attempted passwords etc in the log.
> This is for if we get audited.
>
> I can set:
> SecDefaultAction "phase:1,deny,nolog,auditlog"
> SecDefaultAction "phase:2,deny,nolog,auditlog"
>
> But then I would loose visibility of other issues.
>
> This is mostly for the SQLi rules that I am trying to tackle.
>
> Does anyone know of a way of disabling logging, without having to search
and rep
> lace the rules provided by Owasp.
>
> If anyone can assist, it would be greatly appreciated.
>
> Regards
> Brent Clark

> _______________________________________________
> Owasp-modsecurity-core-rule-set mailing list
> Owasp-modsecurity-core-rule-set at lists.owasp.org
> https://lists.owasp.org/mailman/listinfo/owasp-modsecurity-core-rule-set


-- 
https://www.feistyduck.com/training/modsecurity-training-course
https://www.feistyduck.com/books/modsecurity-handbook/
mailto:christian.folini at netnea.com
twitter: @ChrFolini
_______________________________________________
Owasp-modsecurity-core-rule-set mailing list
Owasp-modsecurity-core-rule-set at lists.owasp.org
https://lists.owasp.org/mailman/listinfo/owasp-modsecurity-core-rule-set
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.owasp.org/pipermail/owasp-modsecurity-core-rule-set/attachments/20171109/98bc7d41/attachment.html>

From christian.folini at netnea.com  Mon Nov 20 18:47:43 2017
From: christian.folini at netnea.com (Christian Folini)
Date: Mon, 20 Nov 2017 19:47:43 +0100
Subject: [Owasp-modsecurity-core-rule-set] OWASP Top 10 is out - featuring
	ModSecurity and Core Rule Set
Message-ID: <20171120184743.i6s4f63rhnqha5pv@leander>

Hi there,

The new edition of the OWASP Top Ten has been released.

https://owasp.blogspot.ch/2017/11/owasp-is-pleased-to-announce-release-of.html

It features ModSecurity and the OWASP ModSecurity Core Rule Set under 
A10: Insufficient Logging & Monitoring under "How to Prevent":

"... There are commercial and open source application protection
frameworks such as OWASP AppSensor, web application
firewalls such as ModSecurity with the OWASP ModSecurity
Core Rule Set, and log correlation software with custom
dashboards and alerting."

Of course we all know, that ModSec and CRS can do a lot more than logging,
but as you probably know, OWASP is not especially friendly towards the
use of Web Application Firewalls and getting into A10 is already a big
step forward.

I do not know if Trustwave has been lobbying for the inclusion, but I do
know that we owe a lot of this to Osama Elnaggar who played an important
role in the review of the document.

In fact I was ready to get involved myself, but Osama asked me to keep a
low profile and not to raise any suspicion and a potential backfire.
This strategy worked perfectly well. Well done!

I plan to follow up with a blog post on https://coreruleset.org to take
up the momentum and explain to OWASP Top Ten readers just how we can support
them. Maybe Trustwave can do the same on its blog.

Best regards,

Christian

P.S. On a similar note, four new members of the OWASP board of directors
have been announced today as well. I have spoken about CRS with three
of them before and I think they see our project in a favorable light.



-- 
https://www.feistyduck.com/training/modsecurity-training-course
https://www.feistyduck.com/books/modsecurity-handbook/
mailto:christian.folini at netnea.com
twitter: @ChrFolini

From naudin at supagro.inra.fr  Thu Nov 30 09:13:46 2017
From: naudin at supagro.inra.fr (Philippe Naudin)
Date: Thu, 30 Nov 2017 10:13:46 +0100
Subject: [Owasp-modsecurity-core-rule-set] missing tag OWASP_CRS
Message-ID: <20171130101346.38d0e3f6@uic-hp-phn.supagro.inra.fr>

Dear CRS users,

I have recently updated C.R.S. from 3.0.0 to 3.0.2, and some exceptions
in my rules stopped working.

This is because 3.0.0 rules had a tag starting with OWASP_CRS/, and I
use this tag to exclude all C.R.S. rules in rare cases like :
ctl:ruleRemoveTargetByTag=OWASP_CRS;ARGS:sql_query
But this tag is gone in some rules of version 3.0.2 (for exemple rules
921110 and following in REQUEST-921-PROTOCOL-ATTACK.conf).

Is there a better way to achieve this (completely excluding an element
of a request from exam) ?

Thanks for your advices,

-- 
Philippe Naudin

From christian.folini at netnea.com  Thu Nov 30 19:49:28 2017
From: christian.folini at netnea.com (Christian Folini)
Date: Thu, 30 Nov 2017 20:49:28 +0100
Subject: [Owasp-modsecurity-core-rule-set] missing tag OWASP_CRS
In-Reply-To: <20171130101346.38d0e3f6@uic-hp-phn.supagro.inra.fr>
References: <20171130101346.38d0e3f6@uic-hp-phn.supagro.inra.fr>
Message-ID: <20171130194928.uweo6xfyxlttn5az@leander>

Hey Philippe,

On Thu, Nov 30, 2017 at 10:13:46AM +0100, Philippe Naudin wrote:
> This is because 3.0.0 rules had a tag starting with OWASP_CRS/, and I
> use this tag to exclude all C.R.S. rules in rare cases like :
> ctl:ruleRemoveTargetByTag=OWASP_CRS;ARGS:sql_query
> But this tag is gone in some rules of version 3.0.2 (for exemple rules
> 921110 and following in REQUEST-921-PROTOCOL-ATTACK.conf).

I do not see this widespread tag to be in use on 921110 in 3.0.0 nor
in 3.0.2. In fact the whole 921xxx rule file did not see any change between
these two versions.

Tags are not used in a systematic manner in CRS unfortunately. But a big
rule cleanup project has finished and systematization of the tagging is
high on the wishlist now.

If you want to disable CRS completely for a given request, there are
multiple options. A very good one is to remove all rule ids 
from 900000-999999 while in phase 1.
e.g.: ctl:ruleRemoveTargetById=900000-999999;ARGS:sql_query

Ahoj,

Christian




> 
> Is there a better way to achieve this (completely excluding an element
> of a request from exam) ?
> 
> Thanks for your advices,
> 
> -- 
> Philippe Naudin
> _______________________________________________
> Owasp-modsecurity-core-rule-set mailing list
> Owasp-modsecurity-core-rule-set at lists.owasp.org
> https://lists.owasp.org/mailman/listinfo/owasp-modsecurity-core-rule-set

-- 
https://www.feistyduck.com/training/modsecurity-training-course
https://www.feistyduck.com/books/modsecurity-handbook/
mailto:christian.folini at netnea.com
twitter: @ChrFolini

