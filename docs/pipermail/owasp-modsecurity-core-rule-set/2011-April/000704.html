<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Owasp-modsecurity-core-rule-set] A Recommended Base Configuration - SecResponseBodyAccess
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:owasp-modsecurity-core-rule-set%40lists.owasp.org?Subject=%5BOwasp-modsecurity-core-rule-set%5D%20A%20Recommended%20Base%0A%20Configuration%20-%20SecResponseBodyAccess&In-Reply-To=BANLkTik5RD0ZfRa3CBSTpbreq1qL6Q2uBQ%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000700.html">
   <LINK REL="Next"  HREF="000701.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Owasp-modsecurity-core-rule-set] A Recommended Base Configuration - SecResponseBodyAccess</H1>
    <B>Ryan Barnett</B> 
    <A HREF="mailto:owasp-modsecurity-core-rule-set%40lists.owasp.org?Subject=%5BOwasp-modsecurity-core-rule-set%5D%20A%20Recommended%20Base%0A%20Configuration%20-%20SecResponseBodyAccess&In-Reply-To=BANLkTik5RD0ZfRa3CBSTpbreq1qL6Q2uBQ%40mail.gmail.com"
       TITLE="[Owasp-modsecurity-core-rule-set] A Recommended Base Configuration - SecResponseBodyAccess">RBarnett at trustwave.com
       </A><BR>
    <I>Tue Apr 12 10:23:52 EDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="000700.html">[Owasp-modsecurity-core-rule-set] A Recommended Base Configuration - SecResponseBodyAccess
</A></li>
        <LI>Next message: <A HREF="000701.html">[Owasp-modsecurity-core-rule-set] A Recommended Base Configuration - SecResponseBodyAccess
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#704">[ date ]</a>
              <a href="thread.html#704">[ thread ]</a>
              <a href="subject.html#704">[ subject ]</a>
              <a href="author.html#704">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On 4/11/11 9:56 AM, &quot;Klaubert Herr da Silveira&quot; &lt;<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-modsecurity-core-rule-set">klaubert at gmail.com</A>&gt; wrote:

&gt;<i>Hi Ryan and Christian,
</I>&gt;<i>
</I>&gt;<i>We can't forget the wrongly defined mime type configured on backend,
</I>&gt;<i>that can put a extra load on ModSecurity (ie. .pdf defined as
</I>&gt;<i>text/plain). This can kill modsec &quot;image&quot;. Really the
</I>&gt;<i>SecResponseBodyLimit and SecResponseBodyLimitAction can help very much
</I>&gt;<i>on this.
</I>
Good point.  When binary content is wrapped in text-based Content-Type
response header it can cause problems.  Hmm, maybe it would be worth
testing another pre-qualifier check against the response_body with
something like @validateByteRange to ensure that the body isn't binary
before deciding to run rules against it.

&gt;<i>
</I>&gt;<i>On the wiki, can be good to write how to disable the
</I>&gt;<i>SecResponseBodyAccess on static content, once that it is not subject
</I>&gt;<i>to processing (ie. .txt, .html files), on specific locations.
</I>
We already have rulesets in the OWASP CRS to ignore static content -
<A HREF="http://mod-security.svn.sourceforge.net/viewvc/mod-security/crs/trunk/optio">http://mod-security.svn.sourceforge.net/viewvc/mod-security/crs/trunk/optio</A>
nal_rules/modsecurity_crs_10_ignore_static.conf
<A HREF="http://mod-security.svn.sourceforge.net/viewvc/mod-security/crs/trunk/optio">http://mod-security.svn.sourceforge.net/viewvc/mod-security/crs/trunk/optio</A>
nal_rules/modsecurity_crs_47_skip_outbound_checks.conf

&gt;<i>
</I>&gt;<i>best regards,
</I>&gt;<i>
</I>&gt;<i>Klaubert
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>On Mon, Apr 11, 2011 at 3:48 AM,  &lt;<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-modsecurity-core-rule-set">christian.folini at post.ch</A>&gt; wrote:
</I>&gt;&gt;<i> Hi Ryan,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> You are right that SecResponseBodyAccess invites for a debate.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> In the discussion about the SecRuleEngine setting you took the hat of
</I>&gt;&gt;<i>the business people who do not want the WAF to interfere with the legit
</I>&gt;&gt;<i>traffic.
</I>&gt;&gt;<i> However, this can happen here when you have large downloads on the
</I>&gt;&gt;<i>website. A lot of corporate websites have a few presentations, pdf
</I>&gt;&gt;<i>reports,
</I>&gt;&gt;<i> way too large images or even a video or two. This is all slowed down
</I>&gt;&gt;<i>very much and if you have a lot of these, then the whole
</I>&gt;&gt;<i> webserver / reverse proxy can be affected. It gets a lot worse when you
</I>&gt;&gt;<i>have a B2B application with legitimate queries, that return
</I>&gt;&gt;<i> 80MB responses... I have seen a surprisingly big number of these
</I>&gt;&gt;<i>applications.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> If you have some experience, then you know how to deal with this. But
</I>&gt;&gt;<i>as this is the default setting, you need to think hard.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I guess one can come to a reasonable compromise with
</I>&gt;&gt;<i>SecResponseBodyLimit and SecResponseBodyLimitAction, but I worry
</I>&gt;&gt;<i> if users will understand the level of protection they get: You would
</I>&gt;&gt;<i>set the BodyAccess to on but then limit the effect afterwards.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Best,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Christian
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> Owasp-modsecurity-core-rule-set mailing list
</I>&gt;&gt;<i> <A HREF="https://lists.owasp.org/mailman/listinfo/owasp-modsecurity-core-rule-set">Owasp-modsecurity-core-rule-set at lists.owasp.org</A>
</I>&gt;&gt;<i> <A HREF="https://lists.owasp.org/mailman/listinfo/owasp-modsecurity-core-rule-set">https://lists.owasp.org/mailman/listinfo/owasp-modsecurity-core-rule-set</A>
</I>&gt;&gt;<i>
</I>&gt;<i>_______________________________________________
</I>&gt;<i>Owasp-modsecurity-core-rule-set mailing list
</I>&gt;<i><A HREF="https://lists.owasp.org/mailman/listinfo/owasp-modsecurity-core-rule-set">Owasp-modsecurity-core-rule-set at lists.owasp.org</A>
</I>&gt;<i><A HREF="https://lists.owasp.org/mailman/listinfo/owasp-modsecurity-core-rule-set">https://lists.owasp.org/mailman/listinfo/owasp-modsecurity-core-rule-set</A>
</I>&gt;<i>
</I>

This transmission may contain information that is privileged, confidential, and/or exempt from disclosure under applicable law. If you are not the intended recipient, you are hereby notified that any disclosure, copying, distribution, or use of the information contained herein (including any reliance thereon) is STRICTLY PROHIBITED. If you received this transmission in error, please immediately contact the sender and destroy the material in its entirety, whether in electronic or hard copy format.

</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000700.html">[Owasp-modsecurity-core-rule-set] A Recommended Base Configuration - SecResponseBodyAccess
</A></li>
	<LI>Next message: <A HREF="000701.html">[Owasp-modsecurity-core-rule-set] A Recommended Base Configuration - SecResponseBodyAccess
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#704">[ date ]</a>
              <a href="thread.html#704">[ thread ]</a>
              <a href="subject.html#704">[ subject ]</a>
              <a href="author.html#704">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.owasp.org/mailman/listinfo/owasp-modsecurity-core-rule-set">More information about the Owasp-modsecurity-core-rule-set
mailing list</a><br>
</body></html>
