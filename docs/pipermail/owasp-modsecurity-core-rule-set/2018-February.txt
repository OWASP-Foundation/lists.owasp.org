From christian.folini at netnea.com  Thu Feb  1 15:54:56 2018
From: christian.folini at netnea.com (Christian Folini)
Date: Thu, 1 Feb 2018 16:54:56 +0100
Subject: [Owasp-modsecurity-core-rule-set] Open Position: Webserver Engineer
	in Switzerland
Message-ID: <20180201155456.6fpmxad65vwtlcem@leander>

Hi there,

My company, netnea.com, is a small consulting / contracting company based in
Berne, the capital of Switzerland. We specialize in network monitoring and
Apache / ModSecurity.

We have an open position for a webserver engineer with a strong interest in
security.

I am the author of the 2nd Edition of the ModSecurity Handbook, I maintain
a popular set of Apache / ModSecurity tutorials on the netnea.com website
and I am one of the co-leads of the OWASP ModSecurity Core Rule Set project.

Obviously, the new netnea employee would work with me and with our
customers on these topics. We have Swiss banks, Swiss government and
two state owned companies among our clients. Go figure. Most of the
work I do is in very interesting high-security settings.

Good experience with Apache and or NGINX is a must, prior work with 
ModSecurity is welcome. Given this ML, this is not really a question I guess.

We do not pay a lot of attention to certificates, but a proven record of
successful projects is needed. A "let's get things done" attitude and an
interest in self-learning is very important to us. But this does not mean you
need to have 15 years of experience. A dedicated student is equally
interesting to us. It's more about the personality than the certs.

Also, decent German active and passive is a must (alternatively, native 
French speaker with very good passive German skills).

If you are interested in this position, then please get in touch via mail to
christian.folini at netnea.com.

Best,

Christian

-- 
What one man can do himself directly is but little. If however he can
stir up ten others to take up the task he has accomplished much.
-- Wilbur Wright

From mark at exonetric.com  Thu Feb  1 21:27:13 2018
From: mark at exonetric.com (Mark Blackman)
Date: Thu, 1 Feb 2018 21:27:13 +0000
Subject: [Owasp-modsecurity-core-rule-set] Substantial and unacceptable
 latency impact using mod_security and core rule set
In-Reply-To: <20171218134104.siqufo5zsccoba7r@leander>
References: <2D313B50-87F3-43A1-97B8-2952B4C859BB@exonetric.com>
	<20171218134104.siqufo5zsccoba7r@leander>
Message-ID: <E2D98F49-EEF0-441E-953E-A416B696E881@exonetric.com>



> On 18 Dec 2017, at 13:41, Christian Folini <christian.folini at netnea.com> wrote:
> 
> Mark,
> 
> Latency is an issue and the amount depends on the server. Factor 5 is a bit
> steep, but still possible.
> 
> My mileage is usually a 5-10% hit on the throughput of a reverse proxy. If
> your server serves only static files and no backend connection, then your
> numbers could be real.
> 
> I would want to look at the individual requests, though.
> Is 40 ms the mean? Is it some requests or all of them? If some, which ones?
> 
> The tutorials at https://www.netnea.com come with an extended Apache Access
> Log format that lets you gauge the performance impact a bit better. Once you
> have the data, you can dig down and identify the individual requests / rules
> that cause the delay. Raising the debug-log-level on individual requests let
> you identify the individual rule of an individual request with a high
> performance impact quite easily. And then tune them away.
> 
> Also, CRS3 comes with a feature called Sampling Mode that allows you to run
> the rules only on a percentage of the requests. This allows you to test / tune
> with real world data without bringing the whole service down. This is
> specifically aimed at services where the performance impact is unclear
> and a potential risk.
> 
> Performance issues are generally solvable with a compromise between
> performance and security. And ModSec gives you a ton of performance
> information so it is generally possible to nail down the problem.
> 
> Hope this helps for a start. If you need more infos, then just ask.

Thanks, as an update, a second round of testing where logging was reduced and where we used a more proven httpd configuration resulted in more sensible results, typically 2 ms for a request without scanning and 4 ms for a request with scanning.

We?re using version 2.9, but I wonder how much improvement you might expect for version 3.0 and is version 3.0 considered production ready yet?

Finally, does mod_security use any kind of hashing to cache results? On the assumption that computing a digest of request is faster than running a large series of regexes over it. In other words, there?s no point repeatedly running the same rules over the same request line when it comes in each time. Alternately, can mod_security exploit Apache server-side caching to cache results?

Regards,
Mark



From christian.folini at netnea.com  Thu Feb  1 21:41:45 2018
From: christian.folini at netnea.com (Christian Folini)
Date: Thu, 1 Feb 2018 22:41:45 +0100
Subject: [Owasp-modsecurity-core-rule-set] Substantial and unacceptable
 latency impact using mod_security and core rule set
In-Reply-To: <E2D98F49-EEF0-441E-953E-A416B696E881@exonetric.com>
References: <2D313B50-87F3-43A1-97B8-2952B4C859BB@exonetric.com>
	<20171218134104.siqufo5zsccoba7r@leander>
	<E2D98F49-EEF0-441E-953E-A416B696E881@exonetric.com>
Message-ID: <20180201214145.7qbghxk575scuvwi@leander>

Hello Mark,

On Thu, Feb 01, 2018 at 09:27:13PM +0000, Mark Blackman wrote:
> Thanks, as an update, a second round of testing where logging was reduced
> and where we used a more proven httpd configuration resulted in more
> sensible results, typically 2 ms for a request without scanning and 4 ms for
> a request with scanning.

That is good news and I think also realistic. You can bring it further down
with tuning. But it takes some effort.

> We?re using version 2.9, but I wonder how much improvement you might expect
> for version 3.0 and is version 3.0 considered production ready yet?

ModSec 3.0 has been released as production ready. CRS3 works and namely
the NGINX Plus offering has been using it for quite some time.

The developers claim a seed gain over ModSec 2.9.x yet there are also people
talking of performance issues. Personally, I do not have trustworthy data,
so I do not want to add to any rumours one way or the other. I think it is
best to test for yourself for the time being. Also I expect further
optimizations with the 3.0.1 release.

> Finally, does mod_security use any kind of hashing to cache results?

No, it does not. At least 2.9 does not and I do not think I have read of
3.0 bringing this. It's an interesting feature, but also one that is very
hard to get right, namely as this is a security product and hashing/caching
often get into a conflict with one another.

> On the
> assumption that computing a digest of request is faster than running a large
> series of regexes over it. In other words, there?s no point repeatedly
> running the same rules over the same request line when it comes in each
> time. Alternately, can mod_security exploit Apache server-side caching to
> cache results?

Again, no.

However, if you really want to speed things up and you have a good
understanding of your application, authentication is in place and you really
know whom you are talking to, then you could think of bypassing certain
rules under certain conditions. That is a trade-off between security and
speed, but given the complete rule language is at your disposal interesting
constructs can be created.

Cheers,

Christian


-- 
Human beings, who are almost unique in having the ability to learn
from the experience of others, are also remarkable for their apparent
disinclination to do so.
--- Douglas Adams

From chaim at chaimsanders.com  Mon Feb  5 18:05:39 2018
From: chaim at chaimsanders.com (Chaim Sanders)
Date: Mon, 5 Feb 2018 13:05:39 -0500
Subject: [Owasp-modsecurity-core-rule-set] Reminder: Monthly Meeting Today
Message-ID: <CAE8hE=qhiFtWg0_iYeWwJeEu=Xnzb=7MkJvkHHyOnNWJb1o92Q@mail.gmail.com>

Good afternoon everyone,
I'd like to remind you of our monthly meeting starting today (2/5/18) at
2:30pm (GMT-5) or ~an hour and a half from now. Everyone is welcome to
join. It will take place on the #modsecurity channel on Freenode (IRC).
Hope to see you there!

-- 
-- 
Chaim Sanders
http://www.ChaimSanders.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.owasp.org/pipermail/owasp-modsecurity-core-rule-set/attachments/20180205/dcff4181/attachment.html>

From js.wisse at zeeland.nl  Wed Feb  7 13:51:17 2018
From: js.wisse at zeeland.nl (Wisse J.S. (Jeroen))
Date: Wed, 7 Feb 2018 13:51:17 +0000
Subject: [Owasp-modsecurity-core-rule-set] Error creating rule: Unknown
	variable: pk_ref)/
Message-ID: <0883dc38e7a24f229735139255565eca@zeeland.nl>

Hello all,

I get the following error message in Windows event viewer when i try to launch apache with the core ruleset enabled:
Error creating rule: Unknown variable: pk_ref)/

I am using the following tutorial to setup apache and mod_security:
https://www.netnea.com/cms/apache-tutorial-7_including-modsecurity-core-rules/

HTTPD -V:

Server version: Apache/2.4.23 (Win64)
Apache Lounge VC11 Server built:   Jul  8 2016 11:33:36
Server's Module Magic Number: 20120211:61
Server loaded:  APR 1.5.2, APR-UTIL 1.5.4
Compiled using: APR 1.5.2, APR-UTIL 1.5.4
Architecture:   64-bit
Server MPM:     WinNT
  threaded:     yes (fixed thread count)
    forked:     no
Server compiled with....
-D APR_HAS_SENDFILE
-D APR_HAS_MMAP
-D APR_HAVE_IPV6 (IPv4-mapped addresses disabled)
-D APR_HAS_OTHER_CHILD
-D AP_HAVE_RELIABLE_PIPED_LOGS
-D DYNAMIC_MODULE_LIMIT=256
-D HTTPD_ROOT="/apache"
-D SUEXEC_BIN="/apache/bin/suexec"
-D DEFAULT_PIDLOG="logs/httpd.pid"
-D DEFAULT_SCOREBOARD="logs/apache_runtime_status"
-D DEFAULT_ERRORLOG="logs/error.log"
-D AP_TYPES_CONFIG_FILE="conf/mime.types"
-D SERVER_CONFIG_FILE="conf/httpd.conf"

HTTPD -M:

Loaded Modules:
core_module (static)
win32_module (static)
mpm_winnt_module (static)
http_module (static)
so_module (static)
access_compat_module (shared)
actions_module (shared)
alias_module (shared)
allowmethods_module (shared)
asis_module (shared)
auth_basic_module (shared)
authn_core_module (shared)
authn_file_module (shared)
authz_core_module (shared)
authz_groupfile_module (shared)
authz_host_module (shared)
authz_user_module (shared)
autoindex_module (shared)
env_module (shared)
headers_module (shared)
include_module (shared)
isapi_module (shared)
log_config_module (shared)
mime_module (shared)
negotiation_module (shared)
setenvif_module (shared)
socache_shmcb_module (shared)
proxy_module (shared)
proxy_http_module (shared)
logio_module (shared)
unique_id_module (shared)
ssl_module (shared)
security2_module (shared)

Does anyone have any idea how I can fix this issue? I tried searching google but could not find a solution.

Met vriendelijke groet,

Jeroen Wisse | GIS infrastructuur ontwikkeling en beheer
T. +31 118 631725 | E. js.wisse at zeeland.nl<mailto:>

[cid:image001.png at 01D1E102.89F8E770]
Provinciehuis | Abdij 6, 4331 BK Middelburg | +31 118 631011
Postbus 6001, 4330 LA Middelburg | www.zeeland.nl<http://www.zeeland.nl> | @provzeeland<https://twitter.com/provzeeland> | facebook.com/provinciezeeland<https://www.facebook.com/provinciezeeland> | instagram.com/provinciezeeland<https://www.instagram.com/provinciezeeland/> | dataportaal.zeeland.nl<https://dataportaal.zeeland.nl>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.owasp.org/pipermail/owasp-modsecurity-core-rule-set/attachments/20180207/a09932e3/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.png
Type: image/png
Size: 16223 bytes
Desc: image001.png
URL: <http://lists.owasp.org/pipermail/owasp-modsecurity-core-rule-set/attachments/20180207/a09932e3/attachment-0001.png>

From christian.folini at netnea.com  Thu Feb  8 05:04:02 2018
From: christian.folini at netnea.com (Christian Folini)
Date: Thu, 8 Feb 2018 06:04:02 +0100
Subject: [Owasp-modsecurity-core-rule-set] Error creating rule: Unknown
 variable: pk_ref)/
In-Reply-To: <0883dc38e7a24f229735139255565eca@zeeland.nl>
References: <0883dc38e7a24f229735139255565eca@zeeland.nl>
Message-ID: <20180208050402.b6rmfctvvrc2b4cx@leander>

Hey Jeroen,

This is an ancient bug actually:

https://github.com/SpiderLabs/owasp-modsecurity-crs/issues/181

It is fixed since the release of CRS 3.

Given you base on my tutorial which follows that version, I do not know
how you could encounter it.

Regs,

Christian

On Wed, Feb 07, 2018 at 01:51:17PM +0000, Wisse J.S. (Jeroen) wrote:
>    Hello all,
> 
> 
>    I get the following error message in Windows event viewer when i try to
>    launch apache with the core ruleset enabled:
> 
>    Error creating rule: Unknown variable: pk_ref)/
> 
> 
>    I am using the following tutorial to setup apache and mod_security:
> 
>    [1]https://www.netnea.com/cms/apache-tutorial-7_including-modsecurity-c
>    ore-rules/
> 
> 
>    HTTPD ?V:
> 
> 
>    Server version: Apache/2.4.23 (Win64)
> 
>    Apache Lounge VC11 Server built:   Jul  8 2016 11:33:36
> 
>    Server's Module Magic Number: 20120211:61
> 
>    Server loaded:  APR 1.5.2, APR-UTIL 1.5.4
> 
>    Compiled using: APR 1.5.2, APR-UTIL 1.5.4
> 
>    Architecture:   64-bit
> 
>    Server MPM:     WinNT
> 
>      threaded:     yes (fixed thread count)
> 
>        forked:     no
> 
>    Server compiled with....
> 
>    -D APR_HAS_SENDFILE
> 
>    -D APR_HAS_MMAP
> 
>    -D APR_HAVE_IPV6 (IPv4-mapped addresses disabled)
> 
>    -D APR_HAS_OTHER_CHILD
> 
>    -D AP_HAVE_RELIABLE_PIPED_LOGS
> 
>    -D DYNAMIC_MODULE_LIMIT=256
> 
>    -D HTTPD_ROOT="/apache"
> 
>    -D SUEXEC_BIN="/apache/bin/suexec"
> 
>    -D DEFAULT_PIDLOG="logs/httpd.pid"
> 
>    -D DEFAULT_SCOREBOARD="logs/apache_runtime_status"
> 
>    -D DEFAULT_ERRORLOG="logs/error.log"
> 
>    -D AP_TYPES_CONFIG_FILE="conf/mime.types"
> 
>    -D SERVER_CONFIG_FILE="conf/httpd.conf"
> 
> 
>    HTTPD ?M:
> 
> 
>    Loaded Modules:
> 
>    core_module (static)
> 
>    win32_module (static)
> 
>    mpm_winnt_module (static)
> 
>    http_module (static)
> 
>    so_module (static)
> 
>    access_compat_module (shared)
> 
>    actions_module (shared)
> 
>    alias_module (shared)
> 
>    allowmethods_module (shared)
> 
>    asis_module (shared)
> 
>    auth_basic_module (shared)
> 
>    authn_core_module (shared)
> 
>    authn_file_module (shared)
> 
>    authz_core_module (shared)
> 
>    authz_groupfile_module (shared)
> 
>    authz_host_module (shared)
> 
>    authz_user_module (shared)
> 
>    autoindex_module (shared)
> 
>    env_module (shared)
> 
>    headers_module (shared)
> 
>    include_module (shared)
> 
>    isapi_module (shared)
> 
>    log_config_module (shared)
> 
>    mime_module (shared)
> 
>    negotiation_module (shared)
> 
>    setenvif_module (shared)
> 
>    socache_shmcb_module (shared)
> 
>    proxy_module (shared)
> 
>    proxy_http_module (shared)
> 
>    logio_module (shared)
> 
>    unique_id_module (shared)
> 
>    ssl_module (shared)
> 
>    security2_module (shared)
> 
> 
>    Does anyone have any idea how I can fix this issue? I tried searching
>    google but could not find a solution.
> 
> 
>    Met vriendelijke groet,
> 
> 
>    Jeroen Wisse | GIS infrastructuur ontwikkeling en beheer
> 
>    T. +31 118 631725 | E. [2]js.wisse at zeeland.nl
> 
> 
>    cid:image001.png at 01D1E102.89F8E770
> 
>    Provinciehuis | Abdij 6, 4331 BK Middelburg | +31 118 631011
>    Postbus 6001, 4330 LA Middelburg | [3]www.zeeland.nl | [4]@provzeeland
>    | [5]facebook.com/provinciezeeland | [6]instagram.com/provinciezeeland
>    | [7]dataportaal.zeeland.nl
> 
> References
> 
>    1. https://www.netnea.com/cms/apache-tutorial-7_including-modsecurity-core-rules/
>    2. mailto:/
>    3. http://www.zeeland.nl/
>    4. https://twitter.com/provzeeland
>    5. https://www.facebook.com/provinciezeeland
>    6. https://www.instagram.com/provinciezeeland/
>    7. https://dataportaal.zeeland.nl/



> _______________________________________________
> Owasp-modsecurity-core-rule-set mailing list
> Owasp-modsecurity-core-rule-set at lists.owasp.org
> https://lists.owasp.org/mailman/listinfo/owasp-modsecurity-core-rule-set


-- 
https://www.feistyduck.com/training/modsecurity-training-course
https://www.feistyduck.com/books/modsecurity-handbook/
mailto:christian.folini at netnea.com
twitter: @ChrFolini

From js.wisse at zeeland.nl  Thu Feb  8 09:21:58 2018
From: js.wisse at zeeland.nl (Wisse J.S. (Jeroen))
Date: Thu, 8 Feb 2018 09:21:58 +0000
Subject: [Owasp-modsecurity-core-rule-set] Error creating rule: Unknown
 variable: pk_ref)/
In-Reply-To: <20180208050402.b6rmfctvvrc2b4cx@leander>
References: <0883dc38e7a24f229735139255565eca@zeeland.nl>
	<20180208050402.b6rmfctvvrc2b4cx@leander>
Message-ID: <b3817c8a132548f08a9e190d846d89ad@zeeland.nl>

Hey Christian,

Although you could not figure out what went wrong, I did!
Somehow I downloaded an old version of the CRS, after downloading the one via the link in your tutorial everything works like it should.

Thanks for the help and sorry for making such a simple mistake :)

Jeroen

-----Oorspronkelijk bericht-----
Van: Christian Folini [mailto:christian.folini at netnea.com] 
Verzonden: donderdag 8 februari 2018 6:04
Aan: Wisse J.S. (Jeroen) <js.wisse at zeeland.nl>
CC: 'owasp-modsecurity-core-rule-set at lists.owasp.org' <owasp-modsecurity-core-rule-set at lists.owasp.org>
Onderwerp: Re: [Owasp-modsecurity-core-rule-set] Error creating rule: Unknown variable: pk_ref)/

Hey Jeroen,

This is an ancient bug actually:

https://scanmail.trustwave.com/?c=8790&d=xdr72mAWs0HXAlwBnphS_9XonIB-Ft9nJEyjaeoR0g&u=https%3a%2f%2fgithub%2ecom%2fSpiderLabs%2fowasp-modsecurity-crs%2fissues%2f181

It is fixed since the release of CRS 3.

Given you base on my tutorial which follows that version, I do not know how you could encounter it.

Regs,

Christian

On Wed, Feb 07, 2018 at 01:51:17PM +0000, Wisse J.S. (Jeroen) wrote:
>    Hello all,
> 
> 
>    I get the following error message in Windows event viewer when i try to
>    launch apache with the core ruleset enabled:
> 
>    Error creating rule: Unknown variable: pk_ref)/
> 
> 
>    I am using the following tutorial to setup apache and mod_security:
> 
>    [1]https://www.netnea.com/cms/apache-tutorial-7_including-modsecurity-c
>    ore-rules/
> 
> 
>    HTTPD ?V:
> 
> 
>    Server version: Apache/2.4.23 (Win64)
> 
>    Apache Lounge VC11 Server built:   Jul  8 2016 11:33:36
> 
>    Server's Module Magic Number: 20120211:61
> 
>    Server loaded:  APR 1.5.2, APR-UTIL 1.5.4
> 
>    Compiled using: APR 1.5.2, APR-UTIL 1.5.4
> 
>    Architecture:   64-bit
> 
>    Server MPM:     WinNT
> 
>      threaded:     yes (fixed thread count)
> 
>        forked:     no
> 
>    Server compiled with....
> 
>    -D APR_HAS_SENDFILE
> 
>    -D APR_HAS_MMAP
> 
>    -D APR_HAVE_IPV6 (IPv4-mapped addresses disabled)
> 
>    -D APR_HAS_OTHER_CHILD
> 
>    -D AP_HAVE_RELIABLE_PIPED_LOGS
> 
>    -D DYNAMIC_MODULE_LIMIT=256
> 
>    -D HTTPD_ROOT="/apache"
> 
>    -D SUEXEC_BIN="/apache/bin/suexec"
> 
>    -D DEFAULT_PIDLOG="logs/httpd.pid"
> 
>    -D DEFAULT_SCOREBOARD="logs/apache_runtime_status"
> 
>    -D DEFAULT_ERRORLOG="logs/error.log"
> 
>    -D AP_TYPES_CONFIG_FILE="conf/mime.types"
> 
>    -D SERVER_CONFIG_FILE="conf/httpd.conf"
> 
> 
>    HTTPD ?M:
> 
> 
>    Loaded Modules:
> 
>    core_module (static)
> 
>    win32_module (static)
> 
>    mpm_winnt_module (static)
> 
>    http_module (static)
> 
>    so_module (static)
> 
>    access_compat_module (shared)
> 
>    actions_module (shared)
> 
>    alias_module (shared)
> 
>    allowmethods_module (shared)
> 
>    asis_module (shared)
> 
>    auth_basic_module (shared)
> 
>    authn_core_module (shared)
> 
>    authn_file_module (shared)
> 
>    authz_core_module (shared)
> 
>    authz_groupfile_module (shared)
> 
>    authz_host_module (shared)
> 
>    authz_user_module (shared)
> 
>    autoindex_module (shared)
> 
>    env_module (shared)
> 
>    headers_module (shared)
> 
>    include_module (shared)
> 
>    isapi_module (shared)
> 
>    log_config_module (shared)
> 
>    mime_module (shared)
> 
>    negotiation_module (shared)
> 
>    setenvif_module (shared)
> 
>    socache_shmcb_module (shared)
> 
>    proxy_module (shared)
> 
>    proxy_http_module (shared)
> 
>    logio_module (shared)
> 
>    unique_id_module (shared)
> 
>    ssl_module (shared)
> 
>    security2_module (shared)
> 
> 
>    Does anyone have any idea how I can fix this issue? I tried searching
>    google but could not find a solution.
> 
> 
>    Met vriendelijke groet,
> 
> 
>    Jeroen Wisse | GIS infrastructuur ontwikkeling en beheer
> 
>    T. +31 118 631725 | E. [2]js.wisse at zeeland.nl
> 
> 
>    cid:image001.png at 01D1E102.89F8E770
> 
>    Provinciehuis | Abdij 6, 4331 BK Middelburg | +31 118 631011
>    Postbus 6001, 4330 LA Middelburg | [http://scanmail.trustwave.com/?c=8790&d=xdr72mAWs0HXAlwBnphS_9XonIB-Ft9nJEj1Y-Mf0A&u=http%3a%2f%2f3%5dwww%2ezeeland%2enl | [4]@provzeeland
>    | [http://scanmail.trustwave.com/?c=8790&d=xdr72mAWs0HXAlwBnphS_9XonIB-Ft9nJE3_Y7EdiA&u=http%3a%2f%2f5%5dfacebook%2ecom%2fprovinciezeeland | [http://scanmail.trustwave.com/?c=8790&d=xdr72mAWs0HXAlwBnphS_9XonIB-Ft9nJBv-NLYQ0w&u=http%3a%2f%2f6%5dinstagram%2ecom%2fprovinciezeeland
>    | 
> [http://scanmail.trustwave.com/?c=8790&d=xdr72mAWs0HXAlwBnphS_9XonIB-F
> t9nJErwNOIehQ&u=http%3a%2f%2f7%5ddataportaal%2ezeeland%2enl
> 
> References
> 
>    1. https://scanmail.trustwave.com/?c=8790&d=xdr72mAWs0HXAlwBnphS_9XonIB-Ft9nJEv1NLNIgw&u=https%3a%2f%2fwww%2enetnea%2ecom%2fcms%2fapache-tutorial-7%5fincluding-modsecurity-core-rules%2f
>    2. mailto:/
>    3. http://scanmail.trustwave.com/?c=8790&d=xdr72mAWs0HXAlwBnphS_9XonIB-Ft9nJEv-ZeMehQ&u=http%3a%2f%2fwww%2ezeeland%2enl%2f
>    4. https://scanmail.trustwave.com/?c=8790&d=xdr72mAWs0HXAlwBnphS_9XonIB-Ft9nJBz0ZOIZiA&u=https%3a%2f%2ftwitter%2ecom%2fprovzeeland
>    5. https://scanmail.trustwave.com/?c=8790&d=xdr72mAWs0HXAlwBnphS_9XonIB-Ft9nJESkaONI1Q&u=https%3a%2f%2fwww%2efacebook%2ecom%2fprovinciezeeland
>    6. https://scanmail.trustwave.com/?c=8790&d=xdr72mAWs0HXAlwBnphS_9XonIB-Ft9nJE__ZOMchA&u=https%3a%2f%2fwww%2einstagram%2ecom%2fprovinciezeeland%2f
>    7. 
> https://scanmail.trustwave.com/?c=8790&d=xdr72mAWs0HXAlwBnphS_9XonIB-F
> t9nJE73aeAchg&u=https%3a%2f%2fdataportaal%2ezeeland%2enl%2f



> _______________________________________________
> Owasp-modsecurity-core-rule-set mailing list 
> Owasp-modsecurity-core-rule-set at lists.owasp.org
> https://scanmail.trustwave.com/?c=8790&d=xdr72mAWs0HXAlwBnphS_9XonIB-F
> t9nJEj3aeNLiA&u=https%3a%2f%2flists%2eowasp%2eorg%2fmailman%2flistinfo
> %2fowasp-modsecurity-core-rule-set


--
https://scanmail.trustwave.com/?c=8790&d=xdr72mAWs0HXAlwBnphS_9XonIB-Ft9nJEjwZ-BKhQ&u=https%3a%2f%2fwww%2efeistyduck%2ecom%2ftraining%2fmodsecurity-training-course
https://scanmail.trustwave.com/?c=8790&d=xdr72mAWs0HXAlwBnphS_9XonIB-Ft9nJE_zYOpMiQ&u=https%3a%2f%2fwww%2efeistyduck%2ecom%2fbooks%2fmodsecurity-handbook%2f
mailto:christian.folini at netnea.com
twitter: @ChrFolini

From christian.folini at netnea.com  Thu Feb  8 09:46:06 2018
From: christian.folini at netnea.com (Christian Folini)
Date: Thu, 8 Feb 2018 10:46:06 +0100
Subject: [Owasp-modsecurity-core-rule-set] Error creating rule: Unknown
 variable: pk_ref)/
In-Reply-To: <b3817c8a132548f08a9e190d846d89ad@zeeland.nl>
References: <0883dc38e7a24f229735139255565eca@zeeland.nl>
	<20180208050402.b6rmfctvvrc2b4cx@leander>
	<b3817c8a132548f08a9e190d846d89ad@zeeland.nl>
Message-ID: <20180208094606.a6tpweew2up3pulz@leander>

No worries. And glad it worked out in the end.

Christian

On Thu, Feb 08, 2018 at 09:21:58AM +0000, Wisse J.S. (Jeroen) wrote:
> Hey Christian,
> 
> Although you could not figure out what went wrong, I did!
> Somehow I downloaded an old version of the CRS, after downloading the one via the link in your tutorial everything works like it should.
> 
> Thanks for the help and sorry for making such a simple mistake :)
> 
> Jeroen
> 
> -----Oorspronkelijk bericht-----
> Van: Christian Folini [mailto:christian.folini at netnea.com] 
> Verzonden: donderdag 8 februari 2018 6:04
> Aan: Wisse J.S. (Jeroen) <js.wisse at zeeland.nl>
> CC: 'owasp-modsecurity-core-rule-set at lists.owasp.org' <owasp-modsecurity-core-rule-set at lists.owasp.org>
> Onderwerp: Re: [Owasp-modsecurity-core-rule-set] Error creating rule: Unknown variable: pk_ref)/
> 
> Hey Jeroen,
> 
> This is an ancient bug actually:
> 
> https://scanmail.trustwave.com/?c=8790&d=xdr72mAWs0HXAlwBnphS_9XonIB-Ft9nJEyjaeoR0g&u=https%3a%2f%2fgithub%2ecom%2fSpiderLabs%2fowasp-modsecurity-crs%2fissues%2f181
> 
> It is fixed since the release of CRS 3.
> 
> Given you base on my tutorial which follows that version, I do not know how you could encounter it.
> 
> Regs,
> 
> Christian
> 
> On Wed, Feb 07, 2018 at 01:51:17PM +0000, Wisse J.S. (Jeroen) wrote:
> >    Hello all,
> > 
> > 
> >    I get the following error message in Windows event viewer when i try to
> >    launch apache with the core ruleset enabled:
> > 
> >    Error creating rule: Unknown variable: pk_ref)/
> > 
> > 
> >    I am using the following tutorial to setup apache and mod_security:
> > 
> >    [1]https://www.netnea.com/cms/apache-tutorial-7_including-modsecurity-c
> >    ore-rules/
> > 
> > 
> >    HTTPD ?V:
> > 
> > 
> >    Server version: Apache/2.4.23 (Win64)
> > 
> >    Apache Lounge VC11 Server built:   Jul  8 2016 11:33:36
> > 
> >    Server's Module Magic Number: 20120211:61
> > 
> >    Server loaded:  APR 1.5.2, APR-UTIL 1.5.4
> > 
> >    Compiled using: APR 1.5.2, APR-UTIL 1.5.4
> > 
> >    Architecture:   64-bit
> > 
> >    Server MPM:     WinNT
> > 
> >      threaded:     yes (fixed thread count)
> > 
> >        forked:     no
> > 
> >    Server compiled with....
> > 
> >    -D APR_HAS_SENDFILE
> > 
> >    -D APR_HAS_MMAP
> > 
> >    -D APR_HAVE_IPV6 (IPv4-mapped addresses disabled)
> > 
> >    -D APR_HAS_OTHER_CHILD
> > 
> >    -D AP_HAVE_RELIABLE_PIPED_LOGS
> > 
> >    -D DYNAMIC_MODULE_LIMIT=256
> > 
> >    -D HTTPD_ROOT="/apache"
> > 
> >    -D SUEXEC_BIN="/apache/bin/suexec"
> > 
> >    -D DEFAULT_PIDLOG="logs/httpd.pid"
> > 
> >    -D DEFAULT_SCOREBOARD="logs/apache_runtime_status"
> > 
> >    -D DEFAULT_ERRORLOG="logs/error.log"
> > 
> >    -D AP_TYPES_CONFIG_FILE="conf/mime.types"
> > 
> >    -D SERVER_CONFIG_FILE="conf/httpd.conf"
> > 
> > 
> >    HTTPD ?M:
> > 
> > 
> >    Loaded Modules:
> > 
> >    core_module (static)
> > 
> >    win32_module (static)
> > 
> >    mpm_winnt_module (static)
> > 
> >    http_module (static)
> > 
> >    so_module (static)
> > 
> >    access_compat_module (shared)
> > 
> >    actions_module (shared)
> > 
> >    alias_module (shared)
> > 
> >    allowmethods_module (shared)
> > 
> >    asis_module (shared)
> > 
> >    auth_basic_module (shared)
> > 
> >    authn_core_module (shared)
> > 
> >    authn_file_module (shared)
> > 
> >    authz_core_module (shared)
> > 
> >    authz_groupfile_module (shared)
> > 
> >    authz_host_module (shared)
> > 
> >    authz_user_module (shared)
> > 
> >    autoindex_module (shared)
> > 
> >    env_module (shared)
> > 
> >    headers_module (shared)
> > 
> >    include_module (shared)
> > 
> >    isapi_module (shared)
> > 
> >    log_config_module (shared)
> > 
> >    mime_module (shared)
> > 
> >    negotiation_module (shared)
> > 
> >    setenvif_module (shared)
> > 
> >    socache_shmcb_module (shared)
> > 
> >    proxy_module (shared)
> > 
> >    proxy_http_module (shared)
> > 
> >    logio_module (shared)
> > 
> >    unique_id_module (shared)
> > 
> >    ssl_module (shared)
> > 
> >    security2_module (shared)
> > 
> > 
> >    Does anyone have any idea how I can fix this issue? I tried searching
> >    google but could not find a solution.
> > 
> > 
> >    Met vriendelijke groet,
> > 
> > 
> >    Jeroen Wisse | GIS infrastructuur ontwikkeling en beheer
> > 
> >    T. +31 118 631725 | E. [2]js.wisse at zeeland.nl
> > 
> > 
> >    cid:image001.png at 01D1E102.89F8E770
> > 
> >    Provinciehuis | Abdij 6, 4331 BK Middelburg | +31 118 631011
> >    Postbus 6001, 4330 LA Middelburg | [http://scanmail.trustwave.com/?c=8790&d=xdr72mAWs0HXAlwBnphS_9XonIB-Ft9nJEj1Y-Mf0A&u=http%3a%2f%2f3%5dwww%2ezeeland%2enl | [4]@provzeeland
> >    | [http://scanmail.trustwave.com/?c=8790&d=xdr72mAWs0HXAlwBnphS_9XonIB-Ft9nJE3_Y7EdiA&u=http%3a%2f%2f5%5dfacebook%2ecom%2fprovinciezeeland | [http://scanmail.trustwave.com/?c=8790&d=xdr72mAWs0HXAlwBnphS_9XonIB-Ft9nJBv-NLYQ0w&u=http%3a%2f%2f6%5dinstagram%2ecom%2fprovinciezeeland
> >    | 
> > [http://scanmail.trustwave.com/?c=8790&d=xdr72mAWs0HXAlwBnphS_9XonIB-F
> > t9nJErwNOIehQ&u=http%3a%2f%2f7%5ddataportaal%2ezeeland%2enl
> > 
> > References
> > 
> >    1. https://scanmail.trustwave.com/?c=8790&d=xdr72mAWs0HXAlwBnphS_9XonIB-Ft9nJEv1NLNIgw&u=https%3a%2f%2fwww%2enetnea%2ecom%2fcms%2fapache-tutorial-7%5fincluding-modsecurity-core-rules%2f
> >    2. mailto:/
> >    3. http://scanmail.trustwave.com/?c=8790&d=xdr72mAWs0HXAlwBnphS_9XonIB-Ft9nJEv-ZeMehQ&u=http%3a%2f%2fwww%2ezeeland%2enl%2f
> >    4. https://scanmail.trustwave.com/?c=8790&d=xdr72mAWs0HXAlwBnphS_9XonIB-Ft9nJBz0ZOIZiA&u=https%3a%2f%2ftwitter%2ecom%2fprovzeeland
> >    5. https://scanmail.trustwave.com/?c=8790&d=xdr72mAWs0HXAlwBnphS_9XonIB-Ft9nJESkaONI1Q&u=https%3a%2f%2fwww%2efacebook%2ecom%2fprovinciezeeland
> >    6. https://scanmail.trustwave.com/?c=8790&d=xdr72mAWs0HXAlwBnphS_9XonIB-Ft9nJE__ZOMchA&u=https%3a%2f%2fwww%2einstagram%2ecom%2fprovinciezeeland%2f
> >    7. 
> > https://scanmail.trustwave.com/?c=8790&d=xdr72mAWs0HXAlwBnphS_9XonIB-F
> > t9nJE73aeAchg&u=https%3a%2f%2fdataportaal%2ezeeland%2enl%2f
> 
> 
> 
> > _______________________________________________
> > Owasp-modsecurity-core-rule-set mailing list 
> > Owasp-modsecurity-core-rule-set at lists.owasp.org
> > https://scanmail.trustwave.com/?c=8790&d=xdr72mAWs0HXAlwBnphS_9XonIB-F
> > t9nJEj3aeNLiA&u=https%3a%2f%2flists%2eowasp%2eorg%2fmailman%2flistinfo
> > %2fowasp-modsecurity-core-rule-set
> 
> 
> --
> https://scanmail.trustwave.com/?c=8790&d=xdr72mAWs0HXAlwBnphS_9XonIB-Ft9nJEjwZ-BKhQ&u=https%3a%2f%2fwww%2efeistyduck%2ecom%2ftraining%2fmodsecurity-training-course
> https://scanmail.trustwave.com/?c=8790&d=xdr72mAWs0HXAlwBnphS_9XonIB-Ft9nJE_zYOpMiQ&u=https%3a%2f%2fwww%2efeistyduck%2ecom%2fbooks%2fmodsecurity-handbook%2f
> mailto:christian.folini at netnea.com
> twitter: @ChrFolini

-- 
https://www.feistyduck.com/training/modsecurity-training-course
https://www.feistyduck.com/books/modsecurity-handbook/
mailto:christian.folini at netnea.com
twitter: @ChrFolini

From chaim at chaimsanders.com  Sun Feb 11 04:20:05 2018
From: chaim at chaimsanders.com (Chaim Sanders)
Date: Sat, 10 Feb 2018 23:20:05 -0500
Subject: [Owasp-modsecurity-core-rule-set] Core Rule Set Project January 2018
Message-ID: <CAE8hE=qFzpcSRv39hwc6r8HeywBEmtPaZw9gMdMy71zwL6pEWA@mail.gmail.com>

This is the CRS newsletter covering the period from Early January until
today.

We held our monthly community chat. We had quite a few people stop by.

   - csanders
   - airween
   - franbuehler
   - lifeforms
   - spartantri
   - dune73
   - allanbo

Our agenda from before the chat is available here
<https://github.com/SpiderLabs/owasp-modsecurity-crs/issues/1003>. During
the chat we discussed the following:



Issue #989 <https://github.com/SpiderLabs/owasp-modsecurity-crs/issues/989>
status:  Currently waiting on canders to fix Dockerfile before it can
merged. The Dockerfile?s point to csanders-git?s personal repository
instead of CRS repo. This is done in error. csanders will change config
default for docker to build on ubuntu and not fedora.

Issue #990 <https://github.com/SpiderLabs/owasp-modsecurity-crs/issues/990>
status : This ticket is a requisite for OWASP CRS 3.1 release. This is
currently under review by Lifeforms and Dune73 after changes made during
the week before the meeting.

Issue #994 <https://github.com/SpiderLabs/owasp-modsecurity-crs/issues/994>
status: This pull requests detects certain file types by looking into the
request body no matter the content-type or extension. The discussion
centered around potential performance issues that would be incurred by
requiring body access. The decision was that body access should left to the
WAF (such as ModSecurity) to control. The rule be will be in PL2. The
current decision is to enable it via CRS seutp.conf. This will also need
tests before merged.

Issue #1004
<https://github.com/SpiderLabs/owasp-modsecurity-crs/issues/1004> replaces
the #1000 <https://github.com/SpiderLabs/owasp-modsecurity-crs/issues/1000>,
merging to the correct branch. Contains a fix for performance issues.
Looking for more detail on the use of xml:* which was added by Dune. He was
working in conjunction with Achim Hoffmann back in 2015. He?ll message
Achim and get an answer.

Issue #1008
<https://github.com/SpiderLabs/owasp-modsecurity-crs/issues/1008> status:
csanders has been working on fixing many of the FP tests in FTW that azhao155
noticed. These have all been merged into one PR.

Issue #1009
<https://github.com/SpiderLabs/owasp-modsecurity-crs/issues/1009>
status: Franbueler
was volunteered to review this.

Issue #1011
<https://github.com/SpiderLabs/owasp-modsecurity-crs/issues/1011> status: Is
a rather striaght forward PR that can simply be merged when reviewed.

Issue #731 <https://github.com/SpiderLabs/owasp-modsecurity-crs/issues/731>
status: emphazer was unable to finish last month but is looking to finish
this month.

There is an acceptable task that's been opened for a new volunteer dealing
with rule cleanup. This was opened as #1015
<https://github.com/SpiderLabs/owasp-modsecurity-crs/issues/1015>.

Dune73 and csanders will work offline to determine the best way to minimize
the amount of issues. This may include combining labels and adding won't
fix tags in KNOWN_BUGS or TODO files.



*Announcements:*

   - New draft of the poster https://www.christian-folini.ch/poster1.jpg.
   It?ll be sold through a poster store.
   - Dune has a ModSec talk in Geneva in February 22
   https://swiss-cybersecurity.ch/upcoming-events
   - Netnea has an open position as posted on the ML, contact Dune73 for
   more information.



*The next community chats will be held on the following dates:*

March 5, 2018 20:30 CET

April 2, 2018 20:30 CET

May 7, 2018 20:30 CET


-- 
-- 
Chaim Sanders
http://www.ChaimSanders.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.owasp.org/pipermail/owasp-modsecurity-core-rule-set/attachments/20180210/2363c20d/attachment.html>

