<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Owasp-modsecurity-core-rule-set] Substantial and unacceptable latency impact using mod_security and core rule set
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:owasp-modsecurity-core-rule-set%40lists.owasp.org?Subject=Re%3A%20%5BOwasp-modsecurity-core-rule-set%5D%20Substantial%20and%20unacceptable%0A%20latency%20impact%20using%20mod_security%20and%20core%20rule%20set&In-Reply-To=%3C20180201214145.7qbghxk575scuvwi%40leander%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002528.html">
   <LINK REL="Next"  HREF="002530.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Owasp-modsecurity-core-rule-set] Substantial and unacceptable latency impact using mod_security and core rule set</H1>
    <B>Christian Folini</B> 
    <A HREF="mailto:owasp-modsecurity-core-rule-set%40lists.owasp.org?Subject=Re%3A%20%5BOwasp-modsecurity-core-rule-set%5D%20Substantial%20and%20unacceptable%0A%20latency%20impact%20using%20mod_security%20and%20core%20rule%20set&In-Reply-To=%3C20180201214145.7qbghxk575scuvwi%40leander%3E"
       TITLE="[Owasp-modsecurity-core-rule-set] Substantial and unacceptable latency impact using mod_security and core rule set">christian.folini at netnea.com
       </A><BR>
    <I>Thu Feb  1 21:41:45 UTC 2018</I>
    <P><UL>
        <LI>Previous message: <A HREF="002528.html">[Owasp-modsecurity-core-rule-set] Substantial and unacceptable latency impact using mod_security and core rule set
</A></li>
        <LI>Next message: <A HREF="002530.html">[Owasp-modsecurity-core-rule-set] Reminder: Monthly Meeting Today
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2529">[ date ]</a>
              <a href="thread.html#2529">[ thread ]</a>
              <a href="subject.html#2529">[ subject ]</a>
              <a href="author.html#2529">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello Mark,

On Thu, Feb 01, 2018 at 09:27:13PM +0000, Mark Blackman wrote:
&gt;<i> Thanks, as an update, a second round of testing where logging was reduced
</I>&gt;<i> and where we used a more proven httpd configuration resulted in more
</I>&gt;<i> sensible results, typically 2 ms for a request without scanning and 4 ms for
</I>&gt;<i> a request with scanning.
</I>
That is good news and I think also realistic. You can bring it further down
with tuning. But it takes some effort.

&gt;<i> We&#8217;re using version 2.9, but I wonder how much improvement you might expect
</I>&gt;<i> for version 3.0 and is version 3.0 considered production ready yet?
</I>
ModSec 3.0 has been released as production ready. CRS3 works and namely
the NGINX Plus offering has been using it for quite some time.

The developers claim a seed gain over ModSec 2.9.x yet there are also people
talking of performance issues. Personally, I do not have trustworthy data,
so I do not want to add to any rumours one way or the other. I think it is
best to test for yourself for the time being. Also I expect further
optimizations with the 3.0.1 release.

&gt;<i> Finally, does mod_security use any kind of hashing to cache results?
</I>
No, it does not. At least 2.9 does not and I do not think I have read of
3.0 bringing this. It's an interesting feature, but also one that is very
hard to get right, namely as this is a security product and hashing/caching
often get into a conflict with one another.

&gt;<i> On the
</I>&gt;<i> assumption that computing a digest of request is faster than running a large
</I>&gt;<i> series of regexes over it. In other words, there&#8217;s no point repeatedly
</I>&gt;<i> running the same rules over the same request line when it comes in each
</I>&gt;<i> time. Alternately, can mod_security exploit Apache server-side caching to
</I>&gt;<i> cache results?
</I>
Again, no.

However, if you really want to speed things up and you have a good
understanding of your application, authentication is in place and you really
know whom you are talking to, then you could think of bypassing certain
rules under certain conditions. That is a trade-off between security and
speed, but given the complete rule language is at your disposal interesting
constructs can be created.

Cheers,

Christian


-- 
Human beings, who are almost unique in having the ability to learn
from the experience of others, are also remarkable for their apparent
disinclination to do so.
--- Douglas Adams
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002528.html">[Owasp-modsecurity-core-rule-set] Substantial and unacceptable latency impact using mod_security and core rule set
</A></li>
	<LI>Next message: <A HREF="002530.html">[Owasp-modsecurity-core-rule-set] Reminder: Monthly Meeting Today
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2529">[ date ]</a>
              <a href="thread.html#2529">[ thread ]</a>
              <a href="subject.html#2529">[ subject ]</a>
              <a href="author.html#2529">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.owasp.org/mailman/listinfo/owasp-modsecurity-core-rule-set">More information about the Owasp-modsecurity-core-rule-set
mailing list</a><br>
</body></html>
