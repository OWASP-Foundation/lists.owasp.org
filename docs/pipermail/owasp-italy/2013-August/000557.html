<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Owasp-italy] Come proteggere le password e le chiavi nei file	di configurazione
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:owasp-italy%40lists.owasp.org?Subject=Re%3A%20%5BOwasp-italy%5D%20Come%20proteggere%20le%20password%20e%20le%20chiavi%20nei%20file%0A%09di%20configurazione&In-Reply-To=%3CCAD65%3DnuJHbiyOgMjdYSpDgs%3D6eVUEfypMXf0_EryuQV%3DEZ2DhQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000556.html">
   <LINK REL="Next"  HREF="000559.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Owasp-italy] Come proteggere le password e le chiavi nei file	di configurazione</H1>
    <B>Claudio Signorini</B> 
    <A HREF="mailto:owasp-italy%40lists.owasp.org?Subject=Re%3A%20%5BOwasp-italy%5D%20Come%20proteggere%20le%20password%20e%20le%20chiavi%20nei%20file%0A%09di%20configurazione&In-Reply-To=%3CCAD65%3DnuJHbiyOgMjdYSpDgs%3D6eVUEfypMXf0_EryuQV%3DEZ2DhQ%40mail.gmail.com%3E"
       TITLE="[Owasp-italy] Come proteggere le password e le chiavi nei file	di configurazione">othellico at gmail.com
       </A><BR>
    <I>Fri Aug 16 08:03:50 UTC 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="000556.html">[Owasp-italy] Come proteggere le password e le chiavi nei file di configurazione
</A></li>
        <LI>Next message: <A HREF="000559.html">[Owasp-italy] Come proteggere le password e le chiavi nei file	di configurazione
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#557">[ date ]</a>
              <a href="thread.html#557">[ thread ]</a>
              <a href="subject.html#557">[ subject ]</a>
              <a href="author.html#557">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Buongiorno a tutti,
innanzitutto vi ringrazio per le molte risposte, anche in questo caldo
agosto.
Cerco di riassumere in una sola mail una risposta ai diversi suggerimenti e
anche un quadro di come stanno evolvendo i nostri ragionamenti in azienda.
Magari pu&#242; emergere qualcosa di utile per tutti.

Prima di tutto una nota per Lorenzo e Paolo. Le password che dobbiamo
proteggere non sono quelle degli utenti, ma quelle &quot;applicative&quot;, usate
dalle applicazioni per autenticarsi su altre applicazioni. Per esempio se
ho un gestore documentale che deve usare un servizio di marcatura
temporale, il gestore deve utilizzare una user-id e una password per farsi
riconoscere dal servizio di marcatura.

Per Giorgio e Nicola: abbiamo pensato anche noi ad una soluzione basata su
HSM, anche perch&#233; usiamo gi&#224; dispositivi simili in azienda e anche
pesantemente. Ma per interfacciarsi ad un HSM c'&#232; bisogno di un PIN, quindi
il problema &#232; solo spostato: proteggo una chiave con un'altra chiave che
non so come proteggere.

Per Luca: fornire la password al boot dell'applicazione? Purtroppo per noi
non &#232; applicabile. Abbiamo esigenze molto alte di disponibilit&#224; dei servizi
che ha portato al proliferare di istanze (anche 30 per una singola
applicazione) che si riavviano al primo cenno di problema (a qualunque ora
del giorno e della notte). Non possiamo dedicare una persona
all'inserimento delle password ad ogni riavvio.

Per Canaro: anche noi abbiamo scelto di cifrare i file di configurazione: &#232;
la soluzione attualmente in essere. E anche noi abbiamo scelto di annegare
la chiave di (de)cifratura nel codice. Peccato che il codice vada sul
repository dei sorgenti, in cui &#232; leggibile da tutto il gruppo di
sviluppatori e amministratori. E' troppo esposta e dobbiamo trovare
un'altra soluzione.

Per Antonio: interessante JDPAPI. Ma noi abbiamo solo sistemi Linux. Ma una
cosa che ho chiesto ai nostri sistemisti &#232; vedere se esiste qualcosa di
simile anche in Linux. O pi&#249; generalmente: quali sono i servizi di
sicurezza che un Linux pu&#242; mettere a disposizione delle nostre applicazioni?

Per Luca: anche JSVC &#232; interessante. Ne terremo sicuramente conto anche se,
come leggerai sotto, stiamo puntando ad un'altra strada.

Per Giorgio: anche il sandboxing dell'application server &#232; un tema
interessante, su cui per&#242; siamo completamente a digiuno. Sai darmi qualche
dritta per gli application server Java ed in particolare JBoss? Grazie!!!

Ora. Una veloce presentazione di cosa stiamo pensando adesso. Ogni vostra
opinione &#232; gradita.

1) Abbandonare la configurazione su file e portarla, per esempio, su un
Directory Server (la struttura ad albero si sposa bene con le
configurazioni e avendo un server centrale possiamo pensare ad un
configurazione servizio-centrica e non applicazione-centrica).
2) Configurare il Directory Server in modo che sia possibile entrarci solo
tramite LDAP/S con mutua autenticazione di certificato.
3) Fare in modo che non sia l'applicazione ad autenticarsi al Directory
Server, bens&#236; il sistema operativo. In questo modo la chiave privata
sarebbe protetta dall'OS e non si necessitano altri archivi o file di
configurazione in cui metterla. Sempre che l'OS abbia simili strumenti...
4) Per modificare le configurazioni predisponiamo un'applicazione che
richiede un'autenticazione (forse forte... stiamo valutando). Quando poi si
inserisce la password per un servizio, questa non viene memorizzata cos&#236;
com'&#232;. L'applicazione fa un cambio password impostando una password molto
robusta (lunga e con un'ampia gamma di caratteri) che verr&#224; salvata sul
Directory Server e non mostrata all'operatore. In questo modo la password
sarebbe conosciuta solo dal servizio, dal Directory Server e
dall'applicazione e, a meno di vulnerabilit&#224; di quest'ultima, non dovrebbe
mai uscire da questa triade. E la password iniziale che l'operatore aveva
non &#232; pi&#249; valida.

Che ne dite? Pu&#242; funzionare? Ci sono tutti i pezzi per fare qualcosa del
genere?
GRAZIE!!!

Claudio


Il giorno 16 agosto 2013 09:16, R.Canaro &lt;<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-italy">security at canaro.net</A>&gt; ha scritto:

&gt;<i>
</I>&gt;<i> Ciao, Claudio.
</I>&gt;<i> Avevamo un problema simile per gestire le password di accesso al DB
</I>&gt;<i> utilizzate da un'applicazione Web scritta in PHP.
</I>&gt;<i> Lo abbiamo risolto scrivendo un piccolo programma in C che cifra le
</I>&gt;<i> password su un file e le restituisce, in chiaro, su richiesta.
</I>&gt;<i> La password di cifratura e' annegata nel codice C del programma.
</I>&gt;<i> Il programma C risponde solo a richieste che arrivino da un determinato
</I>&gt;<i> utente.
</I>&gt;<i> Non e' una soluzione perfetta, ma funziona.
</I>&gt;<i> Se vuoi, posso mandarti il codice sorgente C.
</I>&gt;<i> Ciao,
</I>&gt;<i>
</I>&gt;<i>    C:
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On 01/08/13 16:32, Claudio Signorini wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> Ciao a tutti,
</I>&gt;&gt;<i> cercando in giro ho capito che il tema &#232; sentito, ma sinceramente non ho
</I>&gt;&gt;<i> trovato una risposta valida che sia una.
</I>&gt;&gt;<i>
</I>&gt;<i> ...
</I>&gt;<i>
</I>&gt;&gt;<i> Alcune risposte sono state:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> - in un file di configurazione, ovvero in chiaro sulle macchine su cui
</I>&gt;&gt;<i> gira l'applicazione -&gt; non &#232; accettabile, perch&#233; se un attaccante prende
</I>&gt;&gt;<i> il controllo della macchina o riesce ad accedere al file pu&#242; leggere il
</I>&gt;&gt;<i> file di configurazione e leggere pertanto la password;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> - annegate nel codice dell'applicazione -&gt; non &#232; accettabile
</I>&gt;&gt;<i> perch&#233; verrebbero scritte nei repository dei sorgenti e quindi tutti gli
</I>&gt;&gt;<i> sviluppatori potrebbero leggere tali password; inoltre essendo le nostre
</I>&gt;&gt;<i> applicazioni scritte in Java (e non potendo offuscare tutti i binari) &#232;
</I>&gt;&gt;<i> come scrivere le stesse password in chiaro su un file di configurazione;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> - in un file di configurazione ma cifrate -&gt; non &#232; accettabile: per
</I>&gt;&gt;<i> cifrare serve una chiave e dove scrivo la chiave? il problema &#232; solo
</I>&gt;&gt;<i> stato spostato;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> - in un archivio (database relazionale, directory service, ...)
</I>&gt;&gt;<i> accessibile solo da pochi: ma per accedere all'archivio avrei bisogno di
</I>&gt;&gt;<i> una password, e siamo di nuovo al punto di prima.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Immagino che questo problema non sia solo della nostra azienda. E, come
</I>&gt;&gt;<i> dicevo, ho trovato altri che hanno posto domande simili. Ma non ho
</I>&gt;&gt;<i> trovato risposte valide.
</I>&gt;&gt;<i> Voi cosa ne dite? Come avete risolto voi questo problema?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> GRAZIE!
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Claudio Signorini
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> ______________________________**_________________
</I>&gt;&gt;<i> Owasp-italy mailing list
</I>&gt;&gt;<i> <A HREF="https://lists.owasp.org/mailman/listinfo/owasp-italy">Owasp-italy at lists.owasp.org</A>
</I>&gt;&gt;<i> <A HREF="https://lists.owasp.org/**mailman/listinfo/owasp-italy&lt;https://lists.owasp.org/mailman/listinfo/owasp-italy">https://lists.owasp.org/**mailman/listinfo/owasp-italy&lt;https://lists.owasp.org/mailman/listinfo/owasp-italy</A>&gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.owasp.org/pipermail/owasp-italy/attachments/20130816/731f2965/attachment-0001.html">http://lists.owasp.org/pipermail/owasp-italy/attachments/20130816/731f2965/attachment-0001.html</A>&gt;
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000556.html">[Owasp-italy] Come proteggere le password e le chiavi nei file di configurazione
</A></li>
	<LI>Next message: <A HREF="000559.html">[Owasp-italy] Come proteggere le password e le chiavi nei file	di configurazione
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#557">[ date ]</a>
              <a href="thread.html#557">[ thread ]</a>
              <a href="subject.html#557">[ subject ]</a>
              <a href="author.html#557">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.owasp.org/mailman/listinfo/owasp-italy">More information about the Owasp-italy
mailing list</a><br>
</body></html>
