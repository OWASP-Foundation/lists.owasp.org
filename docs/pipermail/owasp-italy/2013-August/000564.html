<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Owasp-italy] Come proteggere le password e le chiavi nei file	di configurazione
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:owasp-italy%40lists.owasp.org?Subject=Re%3A%20%5BOwasp-italy%5D%20Come%20proteggere%20le%20password%20e%20le%20chiavi%20nei%20file%0A%09di%20configurazione&In-Reply-To=%3CCAJmcn2yiRBfkqjHxUwY45qKQe0Jmnp7gwmNSaqWZ_no9zKWv4g%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000563.html">
   <LINK REL="Next"  HREF="000554.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Owasp-italy] Come proteggere le password e le chiavi nei file	di configurazione</H1>
    <B>Paolo Ottolino</B> 
    <A HREF="mailto:owasp-italy%40lists.owasp.org?Subject=Re%3A%20%5BOwasp-italy%5D%20Come%20proteggere%20le%20password%20e%20le%20chiavi%20nei%20file%0A%09di%20configurazione&In-Reply-To=%3CCAJmcn2yiRBfkqjHxUwY45qKQe0Jmnp7gwmNSaqWZ_no9zKWv4g%40mail.gmail.com%3E"
       TITLE="[Owasp-italy] Come proteggere le password e le chiavi nei file	di configurazione">paolo.ottolino at gmail.com
       </A><BR>
    <I>Mon Aug 19 10:28:00 UTC 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="000563.html">[Owasp-italy] Come proteggere le password e le chiavi nei file	di configurazione
</A></li>
        <LI>Next message: <A HREF="000554.html">[Owasp-italy] Classifica delle cause delle vulnerabilit&#224; informatiche
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#564">[ date ]</a>
              <a href="thread.html#564">[ thread ]</a>
              <a href="subject.html#564">[ subject ]</a>
              <a href="author.html#564">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Ciao Claudio,

il meccanismo login/password (&quot;qualcosa che sai&quot;) e' stato inventato per le
situazioni di interazione uomo-macchina, nelle quali e' (era) sempre
prevista la presenza di una tastiera (stdin), il cui utilizzo a questi
scopi, oltre che naturale, e' economico. Per tal motivo pensavo ti
riferissi ad utenti.

Laddove la interazione e' macchina-macchina, non vi e' uno stdin (almeno
non nella forma di tastiera); quindi, il &quot;login/pwd&quot;, ancorche' conservato
come retaggio del passato per motivi &quot;di business&quot;, e' deprecabile. A rigor
di logica, e' ideale utilizzare approcci altri dal login/pwd, ovvero:

- &quot;qualcosa che sei&quot; (qualcosa che il server e'): un codice legato a
qualche firmware in giro per il server (es. CPU Serial Number, Mother-Board
Serial Number, HDD Serial Number, SID, hostid, etc). Generalmente, gli ID
di questo tipo sono dell'ordine di grandezza dei 128 bit. Difficile da
gestire in ambito business, infatti la bozza di soluzione che proponi non
se ne avvale, anche se potrebbe essere usato come secondo livello di
autenticazione (es. password per leggere chiave) per renderla &quot;forte&quot;

- &quot;qualcosa che hai&quot; (qualcosa che il server ha): una chiave, magari
crittografica pubblico/privato, meglio se nella forma di certificato,
utilizzando TLS/SSL (es HTTPS, LDAPS cui fa i riferimento anche tu). Se
vuoi fare lo &quot;sborone&quot; usi l'HSM, altrimenti scendi a piu' miti consigli.
Facile per gestire i login &quot;unattended&quot; (se la chiave non e' protetta da
password). La tua bozza di soluzione infatti ne fa menzione

Osserazioni:

1. Directory Server: perfetto, vai in ottica IAM
2. LDAPS: come darti torto?
3. PAM LDAP? Pluggable Authentication Module modulo LDAP (cfr.
<A HREF="http://www.padl.com/OSS/pam_ldap.html">http://www.padl.com/OSS/pam_ldap.html</A>)
4. valutare anche l'utilizzo di sistemi PUM (Privileged User Management) e
dei meccanismi che offrono. Costituiscono quella (piccola ma importante)
sezione dello IAM relativa alla gestione degli utenti amministratori
(ovvero le utenze con autorizzazioni altre dalla normale operativita'
dell'utente) e ti aiuta ad indirizzare anche la direttiva SysAdmin del
Garante Privacy (nov 2008):
- <A HREF="http://www.centrify.com/solutions/superuser-privilege-management.asp">http://www.centrify.com/solutions/superuser-privilege-management.asp</A>
-
<A HREF="http://www.forrester.com/Privileged+User+Management+Market+Overview/fulltext/-/E-RES43822?objectid=RES43822">http://www.forrester.com/Privileged+User+Management+Market+Overview/fulltext/-/E-RES43822?objectid=RES43822</A>
- <A HREF="http://www.passwordbank.com/passwordbank-pim/">http://www.passwordbank.com/passwordbank-pim/</A>
-
<A HREF="http://www.xceedium.com/blog/gartner-iam-a-perfect-storm-for-privileged-user-management">http://www.xceedium.com/blog/gartner-iam-a-perfect-storm-for-privileged-user-management</A>

Trovi anche come PIM (Privilege Identity Management):
- <A HREF="http://en.wikipedia.org/wiki/Privileged_Identity_Management,">http://en.wikipedia.org/wiki/Privileged_Identity_Management,</A>
- <A HREF="http://www.ca.com/us/privileged-identity-management.aspx">http://www.ca.com/us/privileged-identity-management.aspx</A>
- <A HREF="http://www-03.ibm.com/software/products/us/en/pim/">http://www-03.ibm.com/software/products/us/en/pim/</A>
- <A HREF="http://www.cyber-ark.com/digital-vault-products/pim-suite/index.asp">http://www.cyber-ark.com/digital-vault-products/pim-suite/index.asp</A>

o PAM (Privilege Account Management):
- <A HREF="http://www.netwrix.com/privileged_account_manager.html">http://www.netwrix.com/privileged_account_manager.html</A>

Ciao

Paolo



2013/8/16 Claudio Signorini &lt;<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-italy">othellico at gmail.com</A>&gt;

&gt;<i> Buongiorno a tutti,
</I>&gt;<i> innanzitutto vi ringrazio per le molte risposte, anche in questo caldo
</I>&gt;<i> agosto.
</I>&gt;<i> Cerco di riassumere in una sola mail una risposta ai diversi suggerimenti
</I>&gt;<i> e anche un quadro di come stanno evolvendo i nostri ragionamenti in
</I>&gt;<i> azienda. Magari pu&#242; emergere qualcosa di utile per tutti.
</I>&gt;<i>
</I>&gt;<i> Prima di tutto una nota per Lorenzo e Paolo. Le password che dobbiamo
</I>&gt;<i> proteggere non sono quelle degli utenti, ma quelle &quot;applicative&quot;, usate
</I>&gt;<i> dalle applicazioni per autenticarsi su altre applicazioni. Per esempio se
</I>&gt;<i> ho un gestore documentale che deve usare un servizio di marcatura
</I>&gt;<i> temporale, il gestore deve utilizzare una user-id e una password per farsi
</I>&gt;<i> riconoscere dal servizio di marcatura.
</I>&gt;<i>
</I>&gt;<i> Per Giorgio e Nicola: abbiamo pensato anche noi ad una soluzione basata su
</I>&gt;<i> HSM, anche perch&#233; usiamo gi&#224; dispositivi simili in azienda e anche
</I>&gt;<i> pesantemente. Ma per interfacciarsi ad un HSM c'&#232; bisogno di un PIN, quindi
</I>&gt;<i> il problema &#232; solo spostato: proteggo una chiave con un'altra chiave che
</I>&gt;<i> non so come proteggere.
</I>&gt;<i>
</I>&gt;<i> Per Luca: fornire la password al boot dell'applicazione? Purtroppo per noi
</I>&gt;<i> non &#232; applicabile. Abbiamo esigenze molto alte di disponibilit&#224; dei servizi
</I>&gt;<i> che ha portato al proliferare di istanze (anche 30 per una singola
</I>&gt;<i> applicazione) che si riavviano al primo cenno di problema (a qualunque ora
</I>&gt;<i> del giorno e della notte). Non possiamo dedicare una persona
</I>&gt;<i> all'inserimento delle password ad ogni riavvio.
</I>&gt;<i>
</I>&gt;<i> Per Canaro: anche noi abbiamo scelto di cifrare i file di configurazione:
</I>&gt;<i> &#232; la soluzione attualmente in essere. E anche noi abbiamo scelto di
</I>&gt;<i> annegare la chiave di (de)cifratura nel codice. Peccato che il codice vada
</I>&gt;<i> sul repository dei sorgenti, in cui &#232; leggibile da tutto il gruppo di
</I>&gt;<i> sviluppatori e amministratori. E' troppo esposta e dobbiamo trovare
</I>&gt;<i> un'altra soluzione.
</I>&gt;<i>
</I>&gt;<i> Per Antonio: interessante JDPAPI. Ma noi abbiamo solo sistemi Linux. Ma
</I>&gt;<i> una cosa che ho chiesto ai nostri sistemisti &#232; vedere se esiste qualcosa di
</I>&gt;<i> simile anche in Linux. O pi&#249; generalmente: quali sono i servizi di
</I>&gt;<i> sicurezza che un Linux pu&#242; mettere a disposizione delle nostre applicazioni?
</I>&gt;<i>
</I>&gt;<i> Per Luca: anche JSVC &#232; interessante. Ne terremo sicuramente conto anche
</I>&gt;<i> se, come leggerai sotto, stiamo puntando ad un'altra strada.
</I>&gt;<i>
</I>&gt;<i> Per Giorgio: anche il sandboxing dell'application server &#232; un tema
</I>&gt;<i> interessante, su cui per&#242; siamo completamente a digiuno. Sai darmi qualche
</I>&gt;<i> dritta per gli application server Java ed in particolare JBoss? Grazie!!!
</I>&gt;<i>
</I>&gt;<i> Ora. Una veloce presentazione di cosa stiamo pensando adesso. Ogni vostra
</I>&gt;<i> opinione &#232; gradita.
</I>&gt;<i>
</I>&gt;<i> 1) Abbandonare la configurazione su file e portarla, per esempio, su un
</I>&gt;<i> Directory Server (la struttura ad albero si sposa bene con le
</I>&gt;<i> configurazioni e avendo un server centrale possiamo pensare ad un
</I>&gt;<i> configurazione servizio-centrica e non applicazione-centrica).
</I>&gt;<i> 2) Configurare il Directory Server in modo che sia possibile entrarci solo
</I>&gt;<i> tramite LDAP/S con mutua autenticazione di certificato.
</I>&gt;<i> 3) Fare in modo che non sia l'applicazione ad autenticarsi al Directory
</I>&gt;<i> Server, bens&#236; il sistema operativo. In questo modo la chiave privata
</I>&gt;<i> sarebbe protetta dall'OS e non si necessitano altri archivi o file di
</I>&gt;<i> configurazione in cui metterla. Sempre che l'OS abbia simili strumenti...
</I>&gt;<i> 4) Per modificare le configurazioni predisponiamo un'applicazione che
</I>&gt;<i> richiede un'autenticazione (forse forte... stiamo valutando). Quando poi si
</I>&gt;<i> inserisce la password per un servizio, questa non viene memorizzata cos&#236;
</I>&gt;<i> com'&#232;. L'applicazione fa un cambio password impostando una password molto
</I>&gt;<i> robusta (lunga e con un'ampia gamma di caratteri) che verr&#224; salvata sul
</I>&gt;<i> Directory Server e non mostrata all'operatore. In questo modo la password
</I>&gt;<i> sarebbe conosciuta solo dal servizio, dal Directory Server e
</I>&gt;<i> dall'applicazione e, a meno di vulnerabilit&#224; di quest'ultima, non dovrebbe
</I>&gt;<i> mai uscire da questa triade. E la password iniziale che l'operatore aveva
</I>&gt;<i> non &#232; pi&#249; valida.
</I>&gt;<i>
</I>&gt;<i> Che ne dite? Pu&#242; funzionare? Ci sono tutti i pezzi per fare qualcosa del
</I>&gt;<i> genere?
</I>&gt;<i> GRAZIE!!!
</I>&gt;<i>
</I>&gt;<i> Claudio
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Il giorno 16 agosto 2013 09:16, R.Canaro &lt;<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-italy">security at canaro.net</A>&gt; ha scritto:
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;&gt;<i> Ciao, Claudio.
</I>&gt;&gt;<i> Avevamo un problema simile per gestire le password di accesso al DB
</I>&gt;&gt;<i> utilizzate da un'applicazione Web scritta in PHP.
</I>&gt;&gt;<i> Lo abbiamo risolto scrivendo un piccolo programma in C che cifra le
</I>&gt;&gt;<i> password su un file e le restituisce, in chiaro, su richiesta.
</I>&gt;&gt;<i> La password di cifratura e' annegata nel codice C del programma.
</I>&gt;&gt;<i> Il programma C risponde solo a richieste che arrivino da un determinato
</I>&gt;&gt;<i> utente.
</I>&gt;&gt;<i> Non e' una soluzione perfetta, ma funziona.
</I>&gt;&gt;<i> Se vuoi, posso mandarti il codice sorgente C.
</I>&gt;&gt;<i> Ciao,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>    C:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> On 01/08/13 16:32, Claudio Signorini wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Ciao a tutti,
</I>&gt;&gt;&gt;<i> cercando in giro ho capito che il tema &#232; sentito, ma sinceramente non ho
</I>&gt;&gt;&gt;<i> trovato una risposta valida che sia una.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i> ...
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Alcune risposte sono state:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> - in un file di configurazione, ovvero in chiaro sulle macchine su cui
</I>&gt;&gt;&gt;<i> gira l'applicazione -&gt; non &#232; accettabile, perch&#233; se un attaccante prende
</I>&gt;&gt;&gt;<i> il controllo della macchina o riesce ad accedere al file pu&#242; leggere il
</I>&gt;&gt;&gt;<i> file di configurazione e leggere pertanto la password;
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> - annegate nel codice dell'applicazione -&gt; non &#232; accettabile
</I>&gt;&gt;&gt;<i> perch&#233; verrebbero scritte nei repository dei sorgenti e quindi tutti gli
</I>&gt;&gt;&gt;<i> sviluppatori potrebbero leggere tali password; inoltre essendo le nostre
</I>&gt;&gt;&gt;<i> applicazioni scritte in Java (e non potendo offuscare tutti i binari) &#232;
</I>&gt;&gt;&gt;<i> come scrivere le stesse password in chiaro su un file di configurazione;
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> - in un file di configurazione ma cifrate -&gt; non &#232; accettabile: per
</I>&gt;&gt;&gt;<i> cifrare serve una chiave e dove scrivo la chiave? il problema &#232; solo
</I>&gt;&gt;&gt;<i> stato spostato;
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> - in un archivio (database relazionale, directory service, ...)
</I>&gt;&gt;&gt;<i> accessibile solo da pochi: ma per accedere all'archivio avrei bisogno di
</I>&gt;&gt;&gt;<i> una password, e siamo di nuovo al punto di prima.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Immagino che questo problema non sia solo della nostra azienda. E, come
</I>&gt;&gt;&gt;<i> dicevo, ho trovato altri che hanno posto domande simili. Ma non ho
</I>&gt;&gt;&gt;<i> trovato risposte valide.
</I>&gt;&gt;&gt;<i> Voi cosa ne dite? Come avete risolto voi questo problema?
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> GRAZIE!
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Claudio Signorini
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> ______________________________**_________________
</I>&gt;&gt;&gt;<i> Owasp-italy mailing list
</I>&gt;&gt;&gt;<i> <A HREF="https://lists.owasp.org/mailman/listinfo/owasp-italy">Owasp-italy at lists.owasp.org</A>
</I>&gt;&gt;&gt;<i> <A HREF="https://lists.owasp.org/**mailman/listinfo/owasp-italy&lt;https://lists.owasp.org/mailman/listinfo/owasp-italy">https://lists.owasp.org/**mailman/listinfo/owasp-italy&lt;https://lists.owasp.org/mailman/listinfo/owasp-italy</A>&gt;
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Owasp-italy mailing list
</I>&gt;<i> <A HREF="https://lists.owasp.org/mailman/listinfo/owasp-italy">Owasp-italy at lists.owasp.org</A>
</I>&gt;<i> <A HREF="https://lists.owasp.org/mailman/listinfo/owasp-italy">https://lists.owasp.org/mailman/listinfo/owasp-italy</A>
</I>&gt;<i>
</I>&gt;<i>
</I>

-- 
Paolo Ottolino
PMP CISSP-ISSAP CISA CISM OPST ITIL
--------------------------------------------------------------
PM, IT Auditor &amp; Security Professional
+39 335 7942 593
<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-italy">paolo.ottolino at gmail.com</A>
<A HREF="http://www.8linux.org">http://www.8linux.org</A>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.owasp.org/pipermail/owasp-italy/attachments/20130819/78fab7e0/attachment.html">http://lists.owasp.org/pipermail/owasp-italy/attachments/20130819/78fab7e0/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000563.html">[Owasp-italy] Come proteggere le password e le chiavi nei file	di configurazione
</A></li>
	<LI>Next message: <A HREF="000554.html">[Owasp-italy] Classifica delle cause delle vulnerabilit&#224; informatiche
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#564">[ date ]</a>
              <a href="thread.html#564">[ thread ]</a>
              <a href="subject.html#564">[ subject ]</a>
              <a href="author.html#564">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.owasp.org/mailman/listinfo/owasp-italy">More information about the Owasp-italy
mailing list</a><br>
</body></html>
