<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [OWASP-cheat-sheets] Add Log Injection Prevention to: Injection_Prevention_Cheat_Sheet_in_Java
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:owasp-cheat-sheets%40lists.owasp.org?Subject=Re%3A%20%5BOWASP-cheat-sheets%5D%20Add%20Log%20Injection%20Prevention%20to%3A%0A%20Injection_Prevention_Cheat_Sheet_in_Java&In-Reply-To=%3Cd3dfca39-aa06-0bef-390d-9c605cb01a91%40owasp.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000192.html">
   <LINK REL="Next"  HREF="000194.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[OWASP-cheat-sheets] Add Log Injection Prevention to: Injection_Prevention_Cheat_Sheet_in_Java</H1>
    <B>Jim Manico</B> 
    <A HREF="mailto:owasp-cheat-sheets%40lists.owasp.org?Subject=Re%3A%20%5BOWASP-cheat-sheets%5D%20Add%20Log%20Injection%20Prevention%20to%3A%0A%20Injection_Prevention_Cheat_Sheet_in_Java&In-Reply-To=%3Cd3dfca39-aa06-0bef-390d-9c605cb01a91%40owasp.org%3E"
       TITLE="[OWASP-cheat-sheets] Add Log Injection Prevention to: Injection_Prevention_Cheat_Sheet_in_Java">jim.manico at owasp.org
       </A><BR>
    <I>Tue Nov 27 12:56:20 UTC 2018</I>
    <P><UL>
        <LI>Previous message: <A HREF="000192.html">[OWASP-cheat-sheets] Add Log Injection Prevention to:	Injection_Prevention_Cheat_Sheet_in_Java
</A></li>
        <LI>Next message: <A HREF="000194.html">[OWASP-cheat-sheets] Add Log Injection Prevention to:	Injection_Prevention_Cheat_Sheet_in_Java
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#193">[ date ]</a>
              <a href="thread.html#193">[ thread ]</a>
              <a href="subject.html#193">[ subject ]</a>
              <a href="author.html#193">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I think we're good to go live. Nice work folks.

&#160;- Jim

On 11/27/18 12:14 AM, Dominique Righetto wrote:
&gt;<i> Jim, can we consider it ok for a go live?
</I>&gt;<i>
</I>&gt;<i> Le lun. 26 nov. 2018 &#224; 18:46, Dominique Righetto
</I>&gt;<i> &lt;<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-cheat-sheets">dominique.righetto at owasp.org</A> &lt;mailto:<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-cheat-sheets">dominique.righetto at owasp.org</A>&gt;&gt; a
</I>&gt;<i> &#233;crit&#160;:
</I>&gt;<i>
</I>&gt;<i>     OK thanks you.
</I>&gt;<i>
</I>&gt;<i>     --
</I>&gt;<i>     Cordialement, Best regards,
</I>&gt;<i>     Dominique Righetto
</I>&gt;<i>     <A HREF="https://lists.owasp.org/mailman/listinfo/owasp-cheat-sheets">dominique.righetto at gmail.com</A> &lt;mailto:<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-cheat-sheets">dominique.righetto at gmail.com</A>&gt;
</I>&gt;<i>     &lt;mailto:<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-cheat-sheets">dominique.righetto at gmail.com</A>&gt;<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-cheat-sheets">dominique.righetto at owasp.org</A>
</I>&gt;<i>     &lt;mailto:<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-cheat-sheets">dominique.righetto at gmail.com</A>&gt;
</I>&gt;<i>     <A HREF="https://righettod.eu">https://righettod.eu</A>
</I>&gt;<i>     GPG: 323D19BA
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>     On Mon, Nov 26, 2018 at 6:42 PM Dave Wichers &lt;<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-cheat-sheets">dwichers at gmail.com</A>
</I>&gt;<i>     &lt;mailto:<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-cheat-sheets">dwichers at gmail.com</A>&gt;&gt; wrote:
</I>&gt;<i>
</I>&gt;<i>         OK. I tweaked this new content a bit, and removed the under
</I>&gt;<i>         construction label as I don't think its necessary now.
</I>&gt;<i>
</I>&gt;<i>         On Mon, Nov 26, 2018 at 12:11 PM Dominique Righetto
</I>&gt;<i>         &lt;<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-cheat-sheets">dominique.righetto at owasp.org</A>
</I>&gt;<i>         &lt;mailto:<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-cheat-sheets">dominique.righetto at owasp.org</A>&gt;&gt; wrote:
</I>&gt;<i>
</I>&gt;<i>             i have added the config for logback in a way allowing a
</I>&gt;<i>             &quot;direct&quot; usage by a dev team and in the same approach than
</I>&gt;<i>             for LOG4JV2.
</I>&gt;<i>             --
</I>&gt;<i>             Cordialement, Best regards,
</I>&gt;<i>             Dominique Righetto
</I>&gt;<i>             <A HREF="https://lists.owasp.org/mailman/listinfo/owasp-cheat-sheets">dominique.righetto at gmail.com</A>
</I>&gt;<i>             &lt;mailto:<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-cheat-sheets">dominique.righetto at gmail.com</A>&gt;
</I>&gt;<i>             &lt;mailto:<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-cheat-sheets">dominique.righetto at gmail.com</A>&gt;<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-cheat-sheets">dominique.righetto at owasp.org</A>
</I>&gt;<i>             &lt;mailto:<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-cheat-sheets">dominique.righetto at gmail.com</A>&gt;
</I>&gt;<i>             <A HREF="https://righettod.eu">https://righettod.eu</A>
</I>&gt;<i>             GPG: 323D19BA
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>             On Mon, Nov 26, 2018 at 5:38 PM Dave Wichers
</I>&gt;<i>             &lt;<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-cheat-sheets">dwichers at gmail.com</A> &lt;mailto:<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-cheat-sheets">dwichers at gmail.com</A>&gt;&gt; wrote:
</I>&gt;<i>
</I>&gt;<i>                 'We' are OWASP :-)&#160; &#160;So 'We' can say whatever we want.
</I>&gt;<i>                 So yes, it is now official, unless Jim, August,
</I>&gt;<i>                 whomever talks us out of it :-)
</I>&gt;<i>
</I>&gt;<i>                 Re; Logback, yes, I think repeating their
</I>&gt;<i>                 recommendation, and referencing their log injection
</I>&gt;<i>                 defense page would be a good enhancement to this page.
</I>&gt;<i>
</I>&gt;<i>                 -Dave
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>                 On Mon, Nov 26, 2018 at 11:24 AM Dominique Righetto
</I>&gt;<i>                 &lt;<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-cheat-sheets">dominique.righetto at owasp.org</A>
</I>&gt;<i>                 &lt;mailto:<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-cheat-sheets">dominique.righetto at owasp.org</A>&gt;&gt; wrote:
</I>&gt;<i>
</I>&gt;<i>                     I have updated the section in the CS to reflect
</I>&gt;<i>                     the discussion.
</I>&gt;<i>
</I>&gt;<i>                     About:
</I>&gt;<i>                     &quot;OWASP recommends defending against XSS attacks in
</I>&gt;<i>                     such situations in the log viewer application
</I>&gt;<i>                     itself, not by preencoding all the log messages
</I>&gt;<i>                     with HTML encoding as such log entries may be
</I>&gt;<i>                     used/viewed in many other log viewing/analysis
</I>&gt;<i>                     tools that don't expect the log data to be
</I>&gt;<i>                     pre-HTML encoded.&quot;
</I>&gt;<i>
</I>&gt;<i>                     There is a official statment about that point?
</I>&gt;<i>
</I>&gt;<i>                     For logack API, I think that for the moment, we
</I>&gt;<i>                     can propose the usage of the project
</I>&gt;<i>                     &quot;owasp-security-logging&quot; because there not
</I>&gt;<i>                     currently a solution on logback side and, as
</I>&gt;<i>                     logback is a very used (at least in the project i
</I>&gt;<i>                     see), we must propose a solution even if is
</I>&gt;<i>                     temporal and more heavy than a upgrade to LOG4J v2.
</I>&gt;<i>
</I>&gt;<i>                     Moreover it help to promote this OWASP project too
</I>&gt;<i>                     and help dev team to use a centralized/maintained
</I>&gt;<i>                     API...
</I>&gt;<i>
</I>&gt;<i>                     OK on that ?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>                     --
</I>&gt;<i>                     Cordialement, Best regards,
</I>&gt;<i>                     Dominique Righetto
</I>&gt;<i>                     <A HREF="https://lists.owasp.org/mailman/listinfo/owasp-cheat-sheets">dominique.righetto at gmail.com</A>
</I>&gt;<i>                     &lt;mailto:<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-cheat-sheets">dominique.righetto at gmail.com</A>&gt;
</I>&gt;<i>                     &lt;mailto:<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-cheat-sheets">dominique.righetto at gmail.com</A>&gt;<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-cheat-sheets">dominique.righetto at owasp.org</A>
</I>&gt;<i>                     &lt;mailto:<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-cheat-sheets">dominique.righetto at gmail.com</A>&gt;
</I>&gt;<i>                     <A HREF="https://righettod.eu">https://righettod.eu</A>
</I>&gt;<i>                     GPG: 323D19BA
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>                     On Mon, Nov 26, 2018 at 4:56 PM Dominique Righetto
</I>&gt;<i>                     &lt;<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-cheat-sheets">dominique.righetto at owasp.org</A>
</I>&gt;<i>                     &lt;mailto:<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-cheat-sheets">dominique.righetto at owasp.org</A>&gt;&gt; wrote:
</I>&gt;<i>
</I>&gt;<i>                         As discussion are prending, i have added a
</I>&gt;<i>                         warning in the section to indicate the &quot;WORK
</I>&gt;<i>                         IN PROGRESS&quot; state.
</I>&gt;<i>                         --
</I>&gt;<i>                         Cordialement, Best regards,
</I>&gt;<i>                         Dominique Righetto
</I>&gt;<i>                         <A HREF="https://lists.owasp.org/mailman/listinfo/owasp-cheat-sheets">dominique.righetto at gmail.com</A>
</I>&gt;<i>                         &lt;mailto:<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-cheat-sheets">dominique.righetto at gmail.com</A>&gt;
</I>&gt;<i>                         &lt;mailto:<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-cheat-sheets">dominique.righetto at gmail.com</A>&gt;<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-cheat-sheets">dominique.righetto at owasp.org</A>
</I>&gt;<i>                         &lt;mailto:<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-cheat-sheets">dominique.righetto at gmail.com</A>&gt;
</I>&gt;<i>                         <A HREF="https://righettod.eu">https://righettod.eu</A>
</I>&gt;<i>                         GPG: 323D19BA
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>                         On Mon, Nov 26, 2018 at 4:40 PM Dave Wichers
</I>&gt;<i>                         &lt;<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-cheat-sheets">dwichers at gmail.com</A>
</I>&gt;<i>                         &lt;mailto:<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-cheat-sheets">dwichers at gmail.com</A>&gt;&gt; wrote:
</I>&gt;<i>
</I>&gt;<i>                             I just ran across this:
</I>&gt;<i>
</I>&gt;<i>                             <A HREF="https://github.com/javabeanz/owasp-security-logging/wiki/Log-Forging">https://github.com/javabeanz/owasp-security-logging/wiki/Log-Forging</A>
</I>&gt;<i>
</I>&gt;<i>                             I think their recommendation to use the
</I>&gt;<i>                             default enc{} function in log4j2 is
</I>&gt;<i>                             incorrect, but I'll talk to them about
</I>&gt;<i>                             that. Their recommendation for Logback is
</I>&gt;<i>                             great! (Didn't know that), and I think we
</I>&gt;<i>                             should repeat it here, and also reference
</I>&gt;<i>                             this specific page of the project, rather
</I>&gt;<i>                             than the overall project itself.
</I>&gt;<i>
</I>&gt;<i>                             -Dave
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>                             On Mon, Nov 26, 2018 at 10:19 AM Dave
</I>&gt;<i>                             Wichers &lt;<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-cheat-sheets">dwichers at gmail.com</A>
</I>&gt;<i>                             &lt;mailto:<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-cheat-sheets">dwichers at gmail.com</A>&gt;&gt; wrote:
</I>&gt;<i>
</I>&gt;<i>                                 Thanks Dominique!!
</I>&gt;<i>
</I>&gt;<i>                                 I made some tweaks and have a
</I>&gt;<i>                                 question. The major point of my
</I>&gt;<i>                                 changes is that the {CRLF} encoding
</I>&gt;<i>                                 scheme MUST be used to prevent log
</I>&gt;<i>                                 injection as that is the scheme that
</I>&gt;<i>                                 encoded CRLF chars. The default
</I>&gt;<i>                                 encoding scheme for the {encode}
</I>&gt;<i>                                 function is HTML, which is dumb in my
</I>&gt;<i>                                 opinion. That prevents XSS, but does
</I>&gt;<i>                                 it by forcing encoding before the data
</I>&gt;<i>                                 is even sent to a browser, which I
</I>&gt;<i>                                 think is wrong.
</I>&gt;<i>
</I>&gt;<i>                                 I'd also prefer to give people the
</I>&gt;<i>                                 option to make a simple change, and
</I>&gt;<i>                                 asking them to pull in the OWASP
</I>&gt;<i>                                 Secure Logging Project isn't
</I>&gt;<i>                                 necessarily simple. In fact, I'm not
</I>&gt;<i>                                 use exactly what the project does to
</I>&gt;<i>                                 help prevent log injection. I'm not
</I>&gt;<i>                                 sure the comment: &quot;The&#160;OWASP Security
</I>&gt;<i>                                 Logging Project
</I>&gt;<i>                                 &lt;<A HREF="https://www.owasp.org/index.php/OWASP_Security_Logging_Project">https://www.owasp.org/index.php/OWASP_Security_Logging_Project</A>&gt;&#160;can
</I>&gt;<i>                                 be used to protect the application log
</I>&gt;<i>                                 against&#160;/Log Injection/&#160;attacks.&quot; is
</I>&gt;<i>                                 actually true.&#160; Can you get Jim to
</I>&gt;<i>                                 introduce you to August (one of the
</I>&gt;<i>                                 project leads), to answer that
</I>&gt;<i>                                 question?&#160; If that project doesn't
</I>&gt;<i>                                 prevent log injection by default maybe
</I>&gt;<i>                                 it can be enhanced to do so by using
</I>&gt;<i>                                 the enc{}{CRLF} function in Log4j2.
</I>&gt;<i>                                 However, if that project also supports
</I>&gt;<i>                                 Logback or other loggers, then it
</I>&gt;<i>                                 might have to use (or provide)
</I>&gt;<i>                                 different mechanisms to prevent Log
</I>&gt;<i>                                 injection using those frameworks.
</I>&gt;<i>
</I>&gt;<i>                                 If anyone is aware of any Log
</I>&gt;<i>                                 Injection defense mechanisms built
</I>&gt;<i>                                 into Logback that we can leverage, and
</I>&gt;<i>                                 describe on this page, please let me
</I>&gt;<i>                                 know, or simply update the article!
</I>&gt;<i>
</I>&gt;<i>                                 I pulled out any references to
</I>&gt;<i>                                 the&#160;OWASP Secure Logging Project from
</I>&gt;<i>                                 the example, as I don't think it is
</I>&gt;<i>                                 required to implement what is shown
</I>&gt;<i>                                 there now.
</I>&gt;<i>
</I>&gt;<i>                                 Thanks, Dave
</I>&gt;<i>
</I>&gt;<i>                                 On Mon, Nov 26, 2018 at 8:03 AM
</I>&gt;<i>                                 Dominique Righetto
</I>&gt;<i>                                 &lt;<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-cheat-sheets">dominique.righetto at owasp.org</A>
</I>&gt;<i>                                 &lt;mailto:<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-cheat-sheets">dominique.righetto at owasp.org</A>&gt;&gt;
</I>&gt;<i>                                 wrote:
</I>&gt;<i>
</I>&gt;<i>                                     Hi,
</I>&gt;<i>
</I>&gt;<i>                                     Info has been added:
</I>&gt;<i>
</I>&gt;<i>                                     <A HREF="https://www.owasp.org/index.php/Injection_Prevention_Cheat_Sheet_in_Java#Log_Injection">https://www.owasp.org/index.php/Injection_Prevention_Cheat_Sheet_in_Java#Log_Injection</A>
</I>&gt;<i>
</I>&gt;<i>                                     --
</I>&gt;<i>                                     Cordialement, Best regards,
</I>&gt;<i>                                     Dominique Righetto
</I>&gt;<i>                                     <A HREF="https://lists.owasp.org/mailman/listinfo/owasp-cheat-sheets">dominique.righetto at gmail.com</A>
</I>&gt;<i>                                     &lt;mailto:<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-cheat-sheets">dominique.righetto at gmail.com</A>&gt;
</I>&gt;<i>                                     &lt;mailto:<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-cheat-sheets">dominique.righetto at gmail.com</A>&gt;<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-cheat-sheets">dominique.righetto at owasp.org</A>
</I>&gt;<i>                                     &lt;mailto:<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-cheat-sheets">dominique.righetto at gmail.com</A>&gt;
</I>&gt;<i>                                     <A HREF="https://righettod.eu">https://righettod.eu</A>
</I>&gt;<i>                                     GPG: 323D19BA
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>                                     On Wed, Oct 31, 2018 at 6:01 PM
</I>&gt;<i>                                     Dave Wichers &lt;<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-cheat-sheets">dwichers at gmail.com</A>
</I>&gt;<i>                                     &lt;mailto:<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-cheat-sheets">dwichers at gmail.com</A>&gt;&gt; wrote:
</I>&gt;<i>
</I>&gt;<i>                                         Hey, I was looking at:
</I>&gt;<i>
</I>&gt;<i>                                         <A HREF="https://www.owasp.org/index.php/Injection_Prevention_Cheat_Sheet_in_Java">https://www.owasp.org/index.php/Injection_Prevention_Cheat_Sheet_in_Java</A>
</I>&gt;<i>
</I>&gt;<i>                                         And noticed it does not cover
</I>&gt;<i>                                         Java log injection. There
</I>&gt;<i>                                         aren't any good articles on
</I>&gt;<i>                                         this subject really, but I did
</I>&gt;<i>                                         find this blog post:
</I>&gt;<i>
</I>&gt;<i>                                         <A HREF="https://github.com/javabeanz/owasp-security-logging/wiki/Log-Forging">https://github.com/javabeanz/owasp-security-logging/wiki/Log-Forging</A>
</I>&gt;<i>
</I>&gt;<i>                                         Could you take the time to add
</I>&gt;<i>                                         a section on Log Injection
</I>&gt;<i>                                         prevent and reference/include
</I>&gt;<i>                                         this recommendation, and
</I>&gt;<i>                                         anything else good you can
</I>&gt;<i>                                         find for the Java world??
</I>&gt;<i>
</I>&gt;<i>                                         Thanks, Dave
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.owasp.org/pipermail/owasp-cheat-sheets/attachments/20181127/b410ccd3/attachment-0001.html">http://lists.owasp.org/pipermail/owasp-cheat-sheets/attachments/20181127/b410ccd3/attachment-0001.html</A>&gt;
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000192.html">[OWASP-cheat-sheets] Add Log Injection Prevention to:	Injection_Prevention_Cheat_Sheet_in_Java
</A></li>
	<LI>Next message: <A HREF="000194.html">[OWASP-cheat-sheets] Add Log Injection Prevention to:	Injection_Prevention_Cheat_Sheet_in_Java
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#193">[ date ]</a>
              <a href="thread.html#193">[ thread ]</a>
              <a href="subject.html#193">[ subject ]</a>
              <a href="author.html#193">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.owasp.org/mailman/listinfo/owasp-cheat-sheets">More information about the OWASP-cheat-sheets
mailing list</a><br>
</body></html>
