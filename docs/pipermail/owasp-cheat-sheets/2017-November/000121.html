<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [OWASP-cheat-sheets] REST and STS
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:owasp-cheat-sheets%40lists.owasp.org?Subject=Re%3A%20%5BOWASP-cheat-sheets%5D%20REST%20and%20STS&In-Reply-To=%3CCADFnxGf3EbZ8xhrzO-61QZswiXeyDO9GCP-QcNmkaEa%3DDysauw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000120.html">
   <LINK REL="Next"  HREF="000122.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[OWASP-cheat-sheets] REST and STS</H1>
    <B>Johan Peeters</B> 
    <A HREF="mailto:owasp-cheat-sheets%40lists.owasp.org?Subject=Re%3A%20%5BOWASP-cheat-sheets%5D%20REST%20and%20STS&In-Reply-To=%3CCADFnxGf3EbZ8xhrzO-61QZswiXeyDO9GCP-QcNmkaEa%3DDysauw%40mail.gmail.com%3E"
       TITLE="[OWASP-cheat-sheets] REST and STS">yo at johanpeeters.com
       </A><BR>
    <I>Mon Nov 20 07:17:48 UTC 2017</I>
    <P><UL>
        <LI>Previous message: <A HREF="000120.html">[OWASP-cheat-sheets] REST and STS
</A></li>
        <LI>Next message: <A HREF="000122.html">[OWASP-cheat-sheets] REST and STS
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#121">[ date ]</a>
              <a href="thread.html#121">[ thread ]</a>
              <a href="subject.html#121">[ subject ]</a>
              <a href="author.html#121">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I do not see the use of an IdP/STS as a necessary condition to qualify as a
REST service. I would argue for a separate IdP/STS since otherwise users
need to entrust their credentials to the clients and all the back-end
services called. Not good from a security perspective.
If the service authenticates the user and then sets a session cookie, that
is not REST. If the cheat sheet suggests otherwise, I want my name off.

On 19 November 2017 at 10:30, Erlend Oftedal &lt;<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-cheat-sheets">erlend.oftedal at owasp.org</A>&gt;
wrote:

&gt;<i> Good diagrams, but I would say there is a version missing, and it&#8217;s the
</I>&gt;<i> one I commonly see. It&#8217;s close to 1, but the front end is static and there
</I>&gt;<i> is a session with the REST services only. Yeah sessions, I know. But I
</I>&gt;<i> wouldnt put it under 1 because there is no old school ajax page loads and
</I>&gt;<i> no JSONP. The services are proper HATEOAS and the sessions is only used for
</I>&gt;<i> authentication.
</I>&gt;<i> I&#8217;m ok with writing this up in the cheat sheet as not optimal from a
</I>&gt;<i> design perspective, but  dont want to rule out a design I see a lot of
</I>&gt;<i> people using. This is still a pretty common design for Single page web
</I>&gt;<i> apps, where you dont have a separate IdpP/STS.
</I>&gt;<i>
</I>&gt;<i> And about JSONP. &#8220;STOP IT&#8221; is the best advice.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Best regards
</I>&gt;<i> Erlend
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On Fri, 17 Nov 2017 at 02:56, Jim Manico &lt;<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-cheat-sheets">jim.manico at owasp.org</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> Diagrams are totally possible in the CS. I can help with that! Are the
</I>&gt;&gt;<i> diagrams below open source?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> So Yo and Jan - really fantastic conversations. I appreciate everyone
</I>&gt;&gt;<i> digging deeply into this. I'm definitely learning from it.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> - Jim
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> On 11/15/17 10:00 PM, Johan Peeters wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Great diagrams! I think they would clarify, although it would be a break
</I>&gt;&gt;<i> with tradition - as far as I'm aware, no diagrams have been used in cheat
</I>&gt;&gt;<i> sheets thus far. Are there any practical constraints adding them to the
</I>&gt;&gt;<i> cheat sheet?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Category 3 is not only more scaleable in the sense that it allows for
</I>&gt;&gt;<i> horizontal scaling of resource servers, AKA web services, but also that it
</I>&gt;&gt;<i> becomes easy to add more, distinct, services.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> An access token should identify which resource it is giving access to and
</I>&gt;&gt;<i> the scope of this access. Whether, and how, an access token can give access
</I>&gt;&gt;<i> to *several* resources, e.g. in the event of call chaining, is an
</I>&gt;&gt;<i> interesting debate that I do not expect to be settled any time soon.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> On 16 November 2017 at 00:58, Jan Wolff &lt;<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-cheat-sheets">jan.wolff at owasp.org</A>&gt; wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> It appears to me that question how access control can be done securely
</I>&gt;&gt;&gt;<i> for REST Web services depends more on the fashion how those services are
</I>&gt;&gt;&gt;<i> used than whether they are truly REST-ful. In my opinion, we should not
</I>&gt;&gt;&gt;<i> assume that our audience shares our understanding of what REST implies.
</I>&gt;&gt;&gt;<i> Instead, we should point our readers to good advice depending on their use
</I>&gt;&gt;&gt;<i> of services.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Let us differentiate between architectures that need different handling
</I>&gt;&gt;&gt;<i> of access control. If you want to edit/fix/propose, the following figures
</I>&gt;&gt;&gt;<i> can be accessed here:
</I>&gt;&gt;&gt;<i> <A HREF="https://docs.google.com/presentation/d/1snVoMadFdbTiyiRypV8tX29zYrIpP">https://docs.google.com/presentation/d/1snVoMadFdbTiyiRypV8tX29zYrIpP</A>
</I>&gt;&gt;&gt;<i> alDfMgljACaPgM/edit?usp=sharing
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> I mostly observed category 1 or category 2 in the wild. Category 3 seems
</I>&gt;&gt;&gt;<i> to be an emerging design for better horizontal scaling without shared
</I>&gt;&gt;&gt;<i> session state. Please correct me or add alternatives if you see it
</I>&gt;&gt;&gt;<i> differently.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> For category 1, secure session management applies as for web
</I>&gt;&gt;&gt;<i> applications and we should point there.
</I>&gt;&gt;&gt;<i> For category 2, there might be a session based on user authentication
</I>&gt;&gt;&gt;<i> (passwords or even client-certificates). This could be a service backend
</I>&gt;&gt;&gt;<i> for an app. Scaling brings the danger of replicated data stores with
</I>&gt;&gt;&gt;<i> credentials. I would discourage users to scale this above one credential
</I>&gt;&gt;&gt;<i> database.
</I>&gt;&gt;&gt;<i> Category 3: I am not the expert for this, but I would expect scalability
</I>&gt;&gt;&gt;<i> to be superior because services are truly independent from each other.
</I>&gt;&gt;&gt;<i> Tokens must not be used as proof of identity. Tokens might be abused/leaked
</I>&gt;&gt;&gt;<i> by service 1 and used on service 2.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> What do you think, would sketches like that help users of the cheat
</I>&gt;&gt;&gt;<i> sheet understand which parts are relevant to them?
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Jan
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Am 14.11.2017 um 10:56 schrieb Johan Peeters:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> No sooner did Jim move the REST cheat sheet from draft to approved
</I>&gt;&gt;&gt;<i> mode than old controversies reared up again. The principal one was
</I>&gt;&gt;&gt;<i> whether we should cover session management, but I won't go into that
</I>&gt;&gt;&gt;<i> in this post.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Here I want to discuss what the deal is with Security Token Services (STS).
</I>&gt;&gt;&gt;<i> Erlend asked me: can't you have a REST service without an STS? Sure,
</I>&gt;&gt;&gt;<i> if no authN/Z is needed, obviously. If the REST API is sensitive,
</I>&gt;&gt;&gt;<i> serves multiple clients and there are several resource servers, on the
</I>&gt;&gt;&gt;<i> other hand, then I would strongly recommend using an STS. This
</I>&gt;&gt;&gt;<i> centralises authentication logic in a dedicated component and avoids
</I>&gt;&gt;&gt;<i> passing credentials around.
</I>&gt;&gt;&gt;<i> If you do not have and do not anticipate having multiple clients or
</I>&gt;&gt;&gt;<i> resource servers, maybe REST APIs are not the right choice - probably
</I>&gt;&gt;&gt;<i> there are simpler designs that serve your purpose.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Yo
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;&gt;<i> OWASP-cheat-sheets mailing list
</I>&gt;&gt;&gt;<i> <A HREF="https://lists.owasp.org/mailman/listinfo/owasp-cheat-sheets">OWASP-cheat-sheets at lists.owasp.org</A>
</I>&gt;&gt;&gt;<i> <A HREF="https://lists.owasp.org/mailman/listinfo/owasp-cheat-sheets">https://lists.owasp.org/mailman/listinfo/owasp-cheat-sheets</A>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> --
</I>&gt;&gt;<i> Johan Peeters
</I>&gt;&gt;<i> <A HREF="https://www.johanpeeters.com">https://www.johanpeeters.com</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> OWASP-cheat-sheets mailing <A HREF="https://lists.owasp.org/mailman/listinfo/owasp-cheat-sheets">listOWASP-cheat-sheets at lists.owasp.orghttps</A>://lists.owasp.org/mailman/listinfo/owasp-cheat-sheets
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> OWASP-cheat-sheets mailing list
</I>&gt;&gt;<i> <A HREF="https://lists.owasp.org/mailman/listinfo/owasp-cheat-sheets">OWASP-cheat-sheets at lists.owasp.org</A>
</I>&gt;&gt;<i> <A HREF="https://lists.owasp.org/mailman/listinfo/owasp-cheat-sheets">https://lists.owasp.org/mailman/listinfo/owasp-cheat-sheets</A>
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>

-- 
Johan Peeters
<A HREF="https://www.johanpeeters.com">https://www.johanpeeters.com</A>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.owasp.org/pipermail/owasp-cheat-sheets/attachments/20171120/a6e4b1bc/attachment.html">http://lists.owasp.org/pipermail/owasp-cheat-sheets/attachments/20171120/a6e4b1bc/attachment.html</A>&gt;
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000120.html">[OWASP-cheat-sheets] REST and STS
</A></li>
	<LI>Next message: <A HREF="000122.html">[OWASP-cheat-sheets] REST and STS
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#121">[ date ]</a>
              <a href="thread.html#121">[ thread ]</a>
              <a href="subject.html#121">[ subject ]</a>
              <a href="author.html#121">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.owasp.org/mailman/listinfo/owasp-cheat-sheets">More information about the OWASP-cheat-sheets
mailing list</a><br>
</body></html>
