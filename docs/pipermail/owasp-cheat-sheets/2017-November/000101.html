<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [OWASP-cheat-sheets] REST and STS
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:owasp-cheat-sheets%40lists.owasp.org?Subject=Re%3A%20%5BOWASP-cheat-sheets%5D%20REST%20and%20STS&In-Reply-To=%3CCADFnxGeZt6jGH_S3yFv6McZFfqg8-VvWOteA%2BCe69%2BEbFZXLZQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000100.html">
   <LINK REL="Next"  HREF="000102.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[OWASP-cheat-sheets] REST and STS</H1>
    <B>Johan Peeters</B> 
    <A HREF="mailto:owasp-cheat-sheets%40lists.owasp.org?Subject=Re%3A%20%5BOWASP-cheat-sheets%5D%20REST%20and%20STS&In-Reply-To=%3CCADFnxGeZt6jGH_S3yFv6McZFfqg8-VvWOteA%2BCe69%2BEbFZXLZQ%40mail.gmail.com%3E"
       TITLE="[OWASP-cheat-sheets] REST and STS">yo at johanpeeters.com
       </A><BR>
    <I>Tue Nov 14 14:40:48 UTC 2017</I>
    <P><UL>
        <LI>Previous message: <A HREF="000100.html">[OWASP-cheat-sheets] REST and STS
</A></li>
        <LI>Next message: <A HREF="000102.html">[OWASP-cheat-sheets] REST and STS
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#101">[ date ]</a>
              <a href="thread.html#101">[ thread ]</a>
              <a href="subject.html#101">[ subject ]</a>
              <a href="author.html#101">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>An SPA with REST API back-ends seems to me to be the obvious
architecture for today's web apps. No argument there.
Having made that choice and assuming you need access control in your
REST APIs you could try to let the REST API handle authN. But here are
the problems that you hit upon or, arguably, create:
+ if you have several resource servers, your authN/Z code is
duplicated in all of them
+ users must pass their credentials to the clients, which in turn pass
them to the resource servers. Contrast this with an architecture in
which only a central IdP receives credentials..
+ authN mechanisms are evolving. You want to decouple this from your
resource servers.
+ IdP and STS are part of your TCB, so you want this to be as small as
possible and coded by experts - most shops would do well to use a 3rd
party component.
+ ...
Sessions are always a problem in the sense that they are part of the
attack surface, and rather vulnerable/attractive targets, so you don't
want sessions unless they are absolutely indispensable.

The OAuth authorization servers (IdP/STS) I have worked with so far
have indeed offered a REST API, but only for
+ management APIs
+ the /token endpoint
The /authorize endpoint is invoked with a redirect URI and returns a
web form for the user. In other words, the only OAuth grants that are
completely handled via APIs are Client Credentials and Resource Owner.
Authorization Code and variants only use an API for trading the code
in for a token.
Does that answer your question?

Yo


On 14 November 2017 at 12:24, Erlend Oftedal &lt;<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-cheat-sheets">erlend.oftedal at owasp.org</A>&gt; wrote:
&gt;<i> Even if you have a single client and a single resource server, you can still
</I>&gt;<i> benefit from REST APIs. My example would be building a single page web app.
</I>&gt;<i> By using a REST API you can separate frontend from backend properly and
</I>&gt;<i> deploy them independently. You can completely rewrite the frontend with no
</I>&gt;<i> changes to the backend. But why does that imply the need for an STS/IdP? Why
</I>&gt;<i> is sessions a problem here?
</I>&gt;<i> Resources can still work as they are supposed to, without depending on
</I>&gt;<i> session state. The session is for authentication information only. It
</I>&gt;<i> carries authentication information, but that information doesn't affect the
</I>&gt;<i> way resources are processed (except for the auth, but that holds for basic
</I>&gt;<i> auth, tokens, and all other types of authentication as well).
</I>&gt;<i>
</I>&gt;<i> Is it possible to design an STS/IdP with a REST API?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On 14 November 2017 at 10:56, Johan Peeters &lt;<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-cheat-sheets">yo at johanpeeters.com</A>&gt; wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> No sooner did Jim move the REST cheat sheet from draft to approved
</I>&gt;&gt;<i> mode than old controversies reared up again. The principal one was
</I>&gt;&gt;<i> whether we should cover session management, but I won't go into that
</I>&gt;&gt;<i> in this post.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Here I want to discuss what the deal is with Security Token Services
</I>&gt;&gt;<i> (STS).
</I>&gt;&gt;<i> Erlend asked me: can't you have a REST service without an STS? Sure,
</I>&gt;&gt;<i> if no authN/Z is needed, obviously. If the REST API is sensitive,
</I>&gt;&gt;<i> serves multiple clients and there are several resource servers, on the
</I>&gt;&gt;<i> other hand, then I would strongly recommend using an STS. This
</I>&gt;&gt;<i> centralises authentication logic in a dedicated component and avoids
</I>&gt;&gt;<i> passing credentials around.
</I>&gt;&gt;<i> If you do not have and do not anticipate having multiple clients or
</I>&gt;&gt;<i> resource servers, maybe REST APIs are not the right choice - probably
</I>&gt;&gt;<i> there are simpler designs that serve your purpose.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Yo
</I>&gt;&gt;<i> --
</I>&gt;&gt;<i> Johan Peeters
</I>&gt;&gt;<i> <A HREF="https://www.johanpeeters.com">https://www.johanpeeters.com</A>
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> OWASP-cheat-sheets mailing list
</I>&gt;&gt;<i> <A HREF="https://lists.owasp.org/mailman/listinfo/owasp-cheat-sheets">OWASP-cheat-sheets at lists.owasp.org</A>
</I>&gt;&gt;<i> <A HREF="https://lists.owasp.org/mailman/listinfo/owasp-cheat-sheets">https://lists.owasp.org/mailman/listinfo/owasp-cheat-sheets</A>
</I>&gt;<i>
</I>&gt;<i>
</I>


-- 
Johan Peeters
<A HREF="https://www.johanpeeters.com">https://www.johanpeeters.com</A>
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000100.html">[OWASP-cheat-sheets] REST and STS
</A></li>
	<LI>Next message: <A HREF="000102.html">[OWASP-cheat-sheets] REST and STS
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#101">[ date ]</a>
              <a href="thread.html#101">[ thread ]</a>
              <a href="subject.html#101">[ subject ]</a>
              <a href="author.html#101">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.owasp.org/mailman/listinfo/owasp-cheat-sheets">More information about the OWASP-cheat-sheets
mailing list</a><br>
</body></html>
