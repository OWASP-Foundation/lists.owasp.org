<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [OWASP-cheat-sheets] Ruby on Rails Token Auth
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:owasp-cheat-sheets%40lists.owasp.org?Subject=Re%3A%20%5BOWASP-cheat-sheets%5D%20Ruby%20on%20Rails%20Token%20Auth&In-Reply-To=%3Cc8bdcda4-35b2-1a75-7a2f-11d5cb428503%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000140.html">
   <LINK REL="Next"  HREF="000142.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[OWASP-cheat-sheets] Ruby on Rails Token Auth</H1>
    <B>Dominique RIGHETTO</B> 
    <A HREF="mailto:owasp-cheat-sheets%40lists.owasp.org?Subject=Re%3A%20%5BOWASP-cheat-sheets%5D%20Ruby%20on%20Rails%20Token%20Auth&In-Reply-To=%3Cc8bdcda4-35b2-1a75-7a2f-11d5cb428503%40gmail.com%3E"
       TITLE="[OWASP-cheat-sheets] Ruby on Rails Token Auth">dominique.righetto at gmail.com
       </A><BR>
    <I>Sun Dec 10 10:04:47 UTC 2017</I>
    <P><UL>
        <LI>Previous message: <A HREF="000140.html">[OWASP-cheat-sheets] Ruby on Rails Token Auth
</A></li>
        <LI>Next message: <A HREF="000142.html">[OWASP-cheat-sheets] Ruby on Rails Token Auth
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#141">[ date ]</a>
              <a href="thread.html#141">[ thread ]</a>
              <a href="subject.html#141">[ subject ]</a>
              <a href="author.html#141">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Zaur,

Thanks you for your feedback and your contribution.

About Token vs Cookie:

It can be interesting the add you remark in the CS about which attack
surface imply cookie and token, just to let dev team know these
information in the choice phase.

Thanks for the update on Authentication and TLS, it is important.
Refering to your intro proposal about TLS, we can add in section 2 a sub
section 2.x named &quot;Secure channel&quot; and we can add TLS config info here
(and others specificities about TLS with RoR), what do you think about
this ?

About SameSite flag:

It's true that the support level (only FF and Chrome) is limited so we
can propose to use it but mention that there currently no support on
IE/Edge/Safari so it's to consider as extra and focused hardening.

I have never seen use this flag in site seen in my work...Perhaps due to
the limited supported.

During my POC when IE receive cookie with SameSite flag it ignore the flag.



On 07/12/2017 13:48, Zaur Molotnikov wrote:
&gt;<i> Hi Dominique,
</I>&gt;<i>
</I>&gt;<i> to continue our discussion on rails/devise authentication:
</I>&gt;<i>
</I>&gt;&gt;<i> I think we must indicate to developer to prefer token or cookie
</I>&gt;<i> To be honest, there is no strict preference on my side as both
</I>&gt;<i> approaches have up- and downsides. Cookies are auto-magical
</I>&gt;<i> but allow for CSRF, tokens prevent CSRF but make you need to
</I>&gt;<i> have a smart JS front-end managing token authentication.
</I>&gt;<i> Usual rails front-end is rather static, it enjoys cookie authentication
</I>&gt;<i> mostly.
</I>&gt;<i>
</I>&gt;&gt;<i> and for
</I>&gt;&gt;<i> cookie we need to indicate/remind the importance of the flag:
</I>&gt;&gt;<i> secure,httponly,samesite and cookie prefixes...
</I>&gt;<i> Devise/rails set proper flags on the session cookie themselves.
</I>&gt;<i> httponly and path=/ are there by default. Secure is added automatically
</I>&gt;<i> once https is used.
</I>&gt;<i>
</I>&gt;<i> I have added a note to start with force_ssl option for environment.
</I>&gt;<i> <A HREF="https://www.owasp.org/index.php/Ruby_on_Rails_Cheatsheet#Authentication">https://www.owasp.org/index.php/Ruby_on_Rails_Cheatsheet#Authentication</A>
</I>&gt;<i>
</I>&gt;<i> Maybe we shall start the cheat sheet with this reminder: &quot;use TLS, this
</I>&gt;<i> is how&quot; ?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Now samesite option is an interesting one, but
</I>&gt;<i> it has not yet been widely supported:
</I>&gt;<i>
</I>&gt;<i> <A HREF="https://caniuse.com/#search=samesite">https://caniuse.com/#search=samesite</A>
</I>&gt;<i>
</I>&gt;<i> Maybe that is why it is not set by default?
</I>&gt;<i> I do not think devise supports it even.
</I>&gt;<i> Is it something to have a look at next and upgrade devise/rails?
</I>&gt;<i>
</I>&gt;<i> @community: which experience do you have with setting samesite now?
</I>&gt;<i> Are there browsers which would react abnormally? (not just ignoring?)
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;&gt;<i> --
</I>&gt;&gt;<i> Cordialement, Best regards,
</I>&gt;&gt;<i> Dominique Righetto
</I>&gt;&gt;<i> <A HREF="https://lists.owasp.org/mailman/listinfo/owasp-cheat-sheets">dominique.righetto at gmail.com</A>
</I>&gt;&gt;<i> &lt;<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-cheat-sheets">dominique.righetto at gmail.com</A>&gt;<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-cheat-sheets">dominique.righetto at owasp.org</A>
</I>&gt;&gt;<i> &lt;<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-cheat-sheets">dominique.righetto at gmail.com</A>&gt;
</I>&gt;&gt;<i> <A HREF="https://righettod.eu">https://righettod.eu</A>
</I>&gt;&gt;<i> GPG: 323D19BA
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> On Wed, Dec 6, 2017 at 5:44 PM, Zaur Molotnikov &lt;<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-cheat-sheets">qutorial at gmail.com</A>&gt; wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Hello all,
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> I have added some information about Token Authentication in Ruby on
</I>&gt;&gt;&gt;<i> Rails using devise and devise_token_auth
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> <A HREF="https://www.owasp.org/index.php/Ruby_on_Rails_Cheatsheet#">https://www.owasp.org/index.php/Ruby_on_Rails_Cheatsheet#</A>
</I>&gt;&gt;&gt;<i> Token_Authentication
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> You are all welcome to provide feedback to me so that we make it
</I>&gt;&gt;&gt;<i> better eventually.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Kind regards,
</I>&gt;&gt;&gt;<i> Zaur.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;&gt;<i> OWASP-cheat-sheets mailing list
</I>&gt;&gt;&gt;<i> <A HREF="https://lists.owasp.org/mailman/listinfo/owasp-cheat-sheets">OWASP-cheat-sheets at lists.owasp.org</A>
</I>&gt;&gt;&gt;<i> <A HREF="https://lists.owasp.org/mailman/listinfo/owasp-cheat-sheets">https://lists.owasp.org/mailman/listinfo/owasp-cheat-sheets</A>
</I>&gt;&gt;&gt;<i>
</I>&gt;<i> Kind regards,
</I>&gt;<i> Zaur.
</I>&gt;<i>
</I>
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000140.html">[OWASP-cheat-sheets] Ruby on Rails Token Auth
</A></li>
	<LI>Next message: <A HREF="000142.html">[OWASP-cheat-sheets] Ruby on Rails Token Auth
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#141">[ date ]</a>
              <a href="thread.html#141">[ thread ]</a>
              <a href="subject.html#141">[ subject ]</a>
              <a href="author.html#141">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.owasp.org/mailman/listinfo/owasp-cheat-sheets">More information about the OWASP-cheat-sheets
mailing list</a><br>
</body></html>
