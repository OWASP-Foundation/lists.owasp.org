<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Owasp-boston] Extend html5 &#8220;Access-Control-Allow-Origin&#8221; ?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:owasp-boston%40lists.owasp.org?Subject=%5BOwasp-boston%5D%0A%09%3D%3Fwindows-1252%3Fq%3FExtend_html5_%3D93Access-Control-Al%3F%3D%0A%09%3D%3Fwindows-1252%3Fq%3Flow-Origin%3D94_%3D3F%3F%3D&In-Reply-To=AANLkTikfQ4tVKrNJ7FaeN0ba1w7gyyNMpuKnePY1NBmY%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000296.html">
   <LINK REL="Next"  HREF="000297.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Owasp-boston] Extend html5 &#8220;Access-Control-Allow-Origin&#8221; ?</H1>
    <B>Brad Edmondson</B> 
    <A HREF="mailto:owasp-boston%40lists.owasp.org?Subject=%5BOwasp-boston%5D%0A%09%3D%3Fwindows-1252%3Fq%3FExtend_html5_%3D93Access-Control-Al%3F%3D%0A%09%3D%3Fwindows-1252%3Fq%3Flow-Origin%3D94_%3D3F%3F%3D&In-Reply-To=AANLkTikfQ4tVKrNJ7FaeN0ba1w7gyyNMpuKnePY1NBmY%40mail.gmail.com"
       TITLE="[Owasp-boston] Extend html5 &#8220;Access-Control-Allow-Origin&#8221; ?">brad.edmondson at gmail.com
       </A><BR>
    <I>Sun Feb 27 16:24:27 EST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="000296.html">[Owasp-boston] Extend html5 &#8220;Access-Control-Allow-Origin&#8221; ?
</A></li>
        <LI>Next message: <A HREF="000297.html">[Owasp-boston] eCommerce Conference Speaker on eCommerce Security	wanted
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#298">[ date ]</a>
              <a href="thread.html#298">[ thread ]</a>
              <a href="subject.html#298">[ subject ]</a>
              <a href="author.html#298">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>For those inclined to keep score, I was pretty late to the game with
this idea. Mozilla has already proposed Content Security Policy (CSP),
which addresses everything I mentioned and more. It includes more than
ten policy directives allowing whitelisting for all kinds of resource
URIs. It even has a JSON-based XSS reporting capability like that
which I mentioned in my point 3. I'm a little embarrassed I didn't
find these resources before coming to the list:

<A HREF="http://people.mozilla.com/~bsterne/content-security-policy/index.html">http://people.mozilla.com/~bsterne/content-security-policy/index.html</A>
<A HREF="https://wiki.mozilla.org/Security/CSP">https://wiki.mozilla.org/Security/CSP</A>
<A HREF="https://developer.mozilla.org/en/Security/CSP/CSP_policy_directives">https://developer.mozilla.org/en/Security/CSP/CSP_policy_directives</A>
<A HREF="https://developer.mozilla.org/en/Introducing_Content_Security_Policy">https://developer.mozilla.org/en/Introducing_Content_Security_Policy</A>
<A HREF="http://www.w3.org/2010/07/appsecwg-charter#deliverables">http://www.w3.org/2010/07/appsecwg-charter#deliverables</A>

Per link 4, Firefox 4 (and gecko 2.0) supports/will support CSP. Per
link 5, W3 is developing a working group to consider formalizing this
and other appsec issues.


Best,
Brad

On Tue, Feb 22, 2011 at 15:29, Brad Edmondson &lt;<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-boston">brad.edmondson at gmail.com</A>&gt; wrote:
&gt;<i> Hi all-
</I>&gt;<i> Since attending OWASP Boston in November, I have been wondering if we
</I>&gt;<i> are missing an opportunity to try and define an access-control header
</I>&gt;<i> that can do more to combat xss.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Specifically, access-control-allow-origin seems limited in scope
</I>&gt;<i> primarily to xmlhttprequest, or at most to a DOM object (though if I
</I>&gt;<i> am reading this spec incorrectly, call me out &#160;:-). It also seems to
</I>&gt;<i> be focused on incoming xsrf, and to leave outgoing xss alone. Perhaps
</I>&gt;<i> another header, with two modifications, might make it much easier to
</I>&gt;<i> contain outbound xss. It could:
</I>&gt;<i>
</I>&gt;<i> 1) allow a page to provide a whitelist of authorized URIs which the
</I>&gt;<i> page's DOM may request (the whole DOM, not just a particular object).
</I>&gt;<i>
</I>&gt;<i> For example, &quot;access-control-authorized-request-uri&quot; could define an
</I>&gt;<i> 'origin list' of URIs that the page might possibly request. Any
</I>&gt;<i> request the DOM makes outside this origin list would be considered
</I>&gt;<i> malicious and would be dropped by the browser. This would allow
</I>&gt;<i> secure.banksite.com to make a promise to the browser that its pages
</I>&gt;<i> will never, ever request anything from anywhere other than
</I>&gt;<i> secure.banksite.com, www.banksite.com, and banksite.affiliate.cdn.com
</I>&gt;<i>
</I>&gt;<i> 2) extend the origin controls granted to xmlhttprequest via
</I>&gt;<i> &quot;access-control-allow-origin&quot;, and to flash via &quot;allow-access-from,&quot;
</I>&gt;<i> and to other individual object types, UP one level to the entire page
</I>&gt;<i>
</I>&gt;<i> 3) allow browsers to report requests outside of this whitelist back to
</I>&gt;<i> the originating server
</I>&gt;<i>
</I>&gt;<i> This is half in jest, but half serious: a browser could automatically
</I>&gt;<i> issue another http request indicating the problem URIs whenever a page
</I>&gt;<i> tells it to make a request outside its whitelist. This would allow
</I>&gt;<i> site administrators to detect xss, or (more often?) misconfigured URI
</I>&gt;<i> whitelists.
</I>&gt;<i>
</I>&gt;<i> 4) be optional; like Access-Control-Allow-Origin, would be optional
</I>&gt;<i> and would default to allow-all
</I>&gt;<i>
</I>&gt;<i> 5) not apply to traditional hyperlinks, unless the DOM contrives to
</I>&gt;<i> execute them - HTTP referer links would be left alone
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> What does everyone think? I am relatively new to OWASP and to web app
</I>&gt;<i> sec, but I haven't been able to think myself out of the belief that we
</I>&gt;<i> need something like this. It seems somewhat analogous to memory
</I>&gt;<i> randomization for compiled code, in that it doesn't combat the root
</I>&gt;<i> cause of insecure code, but it can offer a relatively low-cost control
</I>&gt;<i> to which applications could opt-in. And in that many applications seem
</I>&gt;<i> to be hurting without it.
</I>&gt;<i>
</I>&gt;<i> All comment and thoughts are welcome.
</I>&gt;<i>
</I>&gt;<i> Best,
</I>&gt;<i> Brad
</I>&gt;<i>
</I></PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000296.html">[Owasp-boston] Extend html5 &#8220;Access-Control-Allow-Origin&#8221; ?
</A></li>
	<LI>Next message: <A HREF="000297.html">[Owasp-boston] eCommerce Conference Speaker on eCommerce Security	wanted
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#298">[ date ]</a>
              <a href="thread.html#298">[ thread ]</a>
              <a href="subject.html#298">[ subject ]</a>
              <a href="author.html#298">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.owasp.org/mailman/listinfo/owasp-boston">More information about the Owasp-boston
mailing list</a><br>
</body></html>
