<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Owasp-ireland] Use of Basic Authentication
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:owasp-ireland%40lists.owasp.org?Subject=Re%3A%20%5BOwasp-ireland%5D%20Use%20of%20Basic%20Authentication&In-Reply-To=%3CCACLZaY6v5E%2BjcqdO%3D9bz0EMtgpXo8Zs_ji_p0RAKh4E2%3Dtpp7g%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001153.html">
   <LINK REL="Next"  HREF="001155.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Owasp-ireland] Use of Basic Authentication</H1>
    <B>Paul McCann</B> 
    <A HREF="mailto:owasp-ireland%40lists.owasp.org?Subject=Re%3A%20%5BOwasp-ireland%5D%20Use%20of%20Basic%20Authentication&In-Reply-To=%3CCACLZaY6v5E%2BjcqdO%3D9bz0EMtgpXo8Zs_ji_p0RAKh4E2%3Dtpp7g%40mail.gmail.com%3E"
       TITLE="[Owasp-ireland] Use of Basic Authentication">ismisepaul at gmail.com
       </A><BR>
    <I>Mon Jul 14 21:24:51 UTC 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="001153.html">[Owasp-ireland] Use of Basic Authentication
</A></li>
        <LI>Next message: <A HREF="001155.html">[Owasp-ireland] Instagram iOS session hijack
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1154">[ date ]</a>
              <a href="thread.html#1154">[ thread ]</a>
              <a href="subject.html#1154">[ subject ]</a>
              <a href="author.html#1154">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Cheers guys,

Just to clarify the problems I've seen with using basic auth, if an
application utilises two methods to set up a session with the server to
deal with two use cases;

   1. When using a browser a form based login was utilised
   2. When using the REST services directly basic auth was utilised.

Take for instance a user logs into the application through a browser using
the form based login. Once logged in the application makes asynchronous
calls through the API to update the UI every couple of seconds in the
background. This works fine until the session times out. Once the session
times out the application presents the user with a login popup. This login
popup is actually a basic auth login presented to the user because the
asynchronous API calls running in the background don't have a session. The
desired functionality is the user is not presented with this login but
redirected back to the form based login page but it seems like a race
condition is started and the basic auth wins every time. If the user logs
in using this login popup a new session is created with the server. In the
background what's actually happened is a &quot;Authentication Basic:
&lt;b64-string&gt;&quot; has been added to the requests. The problem occurs when that
user logs out. The cookie is destroyed but the browser caches the basic
auth credentials. If a different user logs into the application through the
form based login a session is set up but with every request the basic auth
header is sent containing the previous users credentials. The second user
can now use those credentials to impersonate the first user leading to
horizontal or vertical privilege escalation.

Thanks for the info guys I'll have a good read through it, I thought I'd
raise this with you guys to see if anybody has seen this before. Personally
I'd no idea there was no way to clear the basic auth header from browsers
without hacking something together. In the future I'll be avoiding basic
auth.


On 14 July 2014 18:53, Fabio Cerullo &lt;<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-ireland">fcerullo at owasp.org</A>&gt; wrote:

&gt;<i> Paul,
</I>&gt;<i>
</I>&gt;<i> Thanks for your mail... great to see the mailing list with technical
</I>&gt;<i> discussions!
</I>&gt;<i>
</I>&gt;<i> To my view, the only reasonable answer for new systems is not to use HTTP
</I>&gt;<i> Basic Authentication.
</I>&gt;<i>
</I>&gt;<i> In cases where HTTP Basic Auth is already in place, here goes an article
</I>&gt;<i> with code included which works with the majority of browsers. It basically
</I>&gt;<i> relies on the user clicking a logout button and some javascript is executed
</I>&gt;<i> that will clear out the existing set of credentials.
</I>&gt;<i>
</I>&gt;<i> *HTTPAuth Logout in Chrome, Firefox and IE with jQuery
</I>&gt;<i> &lt;<A HREF="http://patabugen.co.uk/2013/12/09/httpauth-logout-in-chrome-firefox-and-ie-with-jquery/">http://patabugen.co.uk/2013/12/09/httpauth-logout-in-chrome-firefox-and-ie-with-jquery/</A>&gt;*
</I>&gt;<i>
</I>&gt;<i> Hope this helps.
</I>&gt;<i>
</I>&gt;<i> Regards,
</I>&gt;<i> Fabio
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On Mon, Jul 14, 2014 at 6:14 PM, Eoin Keary &lt;<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-ireland">eoin.keary at owasp.org</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> Paul,
</I>&gt;&gt;<i> This is from 2002 :)
</I>&gt;&gt;<i> It is a hack which overwrites the basic auth header:
</I>&gt;&gt;<i> <A HREF="https://www.mavensecurity.com/documents/BasicAuthLogOut.pdf">https://www.mavensecurity.com/documents/BasicAuthLogOut.pdf</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Best to avoid the many pitfalls of Basic Auth id suggest but we don't
</I>&gt;&gt;<i> always have such luxury :)
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Eoin Keary
</I>&gt;&gt;<i> Owasp Global Board
</I>&gt;&gt;<i> +353 87 977 2988
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> On 14 Jul 2014, at 17:40, Paul McCann &lt;<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-ireland">ismisepaul at gmail.com</A>&gt; wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Hey everyone,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I've seen basic auth being used with various web application APIs e.g.
</I>&gt;&gt;<i> REST calls as a quick and well supported way of creating a session with a
</I>&gt;&gt;<i> server. OWASP takes the stance that its a weak method but is acceptable to
</I>&gt;&gt;<i> use as long as every request containing the &quot;Authentication: Basic
</I>&gt;&gt;<i> &lt;base64-string&gt;&quot; header is never sent over HTTP. However, there is another
</I>&gt;&gt;<i> fundamental problem with basic auth in which OWASP doesn't address (a least
</I>&gt;&gt;<i> I can't find it) and that is you cannot logout if you're using basic auth
</I>&gt;&gt;<i> as it wasn't designed to manage logging out.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The basic auth credentials are cached by the browser and cannot be
</I>&gt;&gt;<i> cleared by an application's logout function. At least not consistently
</I>&gt;&gt;<i> across browsers;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>    - IE - there's a javascript function
</I>&gt;&gt;<i>    document.execCommand('ClearAuthenticationCache', 'false') (I haven't tested
</I>&gt;&gt;<i>    this)
</I>&gt;&gt;<i>    - Firefox - Manually clear your recent history, clear the active
</I>&gt;&gt;<i>    logins
</I>&gt;&gt;<i>    - Chrome - no way to clear
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> After reading into this I think under no circumstances should anyone make
</I>&gt;&gt;<i> use of basic auth because its broken by design. The root of the problem
</I>&gt;&gt;<i> coming from the HTTP specification:
</I>&gt;&gt;<i> &quot;Existing HTTP clients and user agents typically retain authentication
</I>&gt;&gt;<i> information indefinitely. HTTP/1.1. does not provide a method for a server
</I>&gt;&gt;<i> to direct clients to discard these cached credentials. This is a
</I>&gt;&gt;<i> significant defect that requires further extensions to HTTP.&quot;
</I>&gt;&gt;<i> <A HREF="http://www.w3.org/Protocols/rfc2616/rfc2616-sec15.html">http://www.w3.org/Protocols/rfc2616/rfc2616-sec15.html</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Has anyone come across this problem? Is there an OWASP guide/best
</I>&gt;&gt;<i> practice around logging out when using basic auth or some piece that states
</I>&gt;&gt;<i> basic auth is broken and should never be used?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> Owasp-ireland mailing list
</I>&gt;&gt;<i> <A HREF="https://lists.owasp.org/mailman/listinfo/owasp-ireland">Owasp-ireland at lists.owasp.org</A>
</I>&gt;&gt;<i> <A HREF="https://lists.owasp.org/mailman/listinfo/owasp-ireland">https://lists.owasp.org/mailman/listinfo/owasp-ireland</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> Owasp-ireland mailing list
</I>&gt;&gt;<i> <A HREF="https://lists.owasp.org/mailman/listinfo/owasp-ireland">Owasp-ireland at lists.owasp.org</A>
</I>&gt;&gt;<i> <A HREF="https://lists.owasp.org/mailman/listinfo/owasp-ireland">https://lists.owasp.org/mailman/listinfo/owasp-ireland</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.owasp.org/pipermail/owasp-ireland/attachments/20140714/4422c49f/attachment.html">http://lists.owasp.org/pipermail/owasp-ireland/attachments/20140714/4422c49f/attachment.html</A>&gt;
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001153.html">[Owasp-ireland] Use of Basic Authentication
</A></li>
	<LI>Next message: <A HREF="001155.html">[Owasp-ireland] Instagram iOS session hijack
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1154">[ date ]</a>
              <a href="thread.html#1154">[ thread ]</a>
              <a href="subject.html#1154">[ subject ]</a>
              <a href="author.html#1154">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.owasp.org/mailman/listinfo/owasp-ireland">More information about the Owasp-ireland
mailing list</a><br>
</body></html>
