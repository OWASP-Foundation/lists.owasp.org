<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Owasp-ireland] Question about identity over two systems
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:owasp-ireland%40lists.owasp.org?Subject=%5BOwasp-ireland%5D%20Question%20about%20identity%20over%20two%20systems&In-Reply-To=006d01c9d3b3%249bd67660%24d3836320%24%25curran%40ucd.ie">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000587.html">
   <LINK REL="Next"  HREF="000590.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Owasp-ireland] Question about identity over two systems</H1>
    <B>Peter McEvoy</B> 
    <A HREF="mailto:owasp-ireland%40lists.owasp.org?Subject=%5BOwasp-ireland%5D%20Question%20about%20identity%20over%20two%20systems&In-Reply-To=006d01c9d3b3%249bd67660%24d3836320%24%25curran%40ucd.ie"
       TITLE="[Owasp-ireland] Question about identity over two systems">peter.m.mcevoy at gmail.com
       </A><BR>
    <I>Thu May 14 08:05:01 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="000587.html">[Owasp-ireland] Question about identity over two systems
</A></li>
        <LI>Next message: <A HREF="000590.html">[Owasp-ireland] New member: Romans Malinovskis / Agile Technologies.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#588">[ date ]</a>
              <a href="thread.html#588">[ thread ]</a>
              <a href="subject.html#588">[ subject ]</a>
              <a href="author.html#588">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thanks all,
I've had a few out-of-band replies and pretty much everyone is suggesting
identity federation schemes.

We want to provide added value to the customers of another company, and
their management/marketing team think we have a great idea.  But the problem
for us is that we wanted to provide the entire solution with minimum
disruption to the tech team/data centre of the other company.

We wanted to be masters of our own destiny and deliver the solution at our
pace without depending on the other team to deliver infrastructure.

It's very early days on this deal, and it could be that they already have
federation integration points in place for partners, but we have not had the
luxury of being able to actually speak to their tech team yet... We'll just
have to wait.

In retrospect, the hashing scheme I proposed in my inital mail is too weak:
it takes 3 mins to generate 10^8 hashes and we would need incredibly large
PINs to make it even remotely difficult to crack them.

Thanks for all your replies

Pete

PS Always add salt to your hashes!

2009/5/13 John Curran &lt;<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-ireland">john.curran at ucd.ie</A>&gt;

&gt;<i>  Hi,
</I>&gt;<i>
</I>&gt;<i> This is a problem we face in Higher ed for individualised anonymity in
</I>&gt;<i> access to online resources, e.g. users looking for access to journal
</I>&gt;<i> articles hosted externally- the user would like to have some form of local
</I>&gt;<i> identity on the remote service, but we cannot provide any individual data to
</I>&gt;<i> the remote system. In addition an (unstated below) requirement would
</I>&gt;<i> appear to be that system A1 must be an authorised source of transactions for
</I>&gt;<i> system A2. IT&#8217;s also a typical issue in Single sign-on and federated
</I>&gt;<i> identity schemes.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> This requirement can be summarised as for a &#8220;sponsored identifier&#8221;, and
</I>&gt;<i> this can be accomplished in very many ways.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Proposed method. Compute and retain a random identifier i1 for all users
</I>&gt;<i> i1, random salt concatenated with a hash of the userid for a given system
</I>&gt;<i> will generate a unique ID.  For a given transaction this is encrypted by a1
</I>&gt;<i> and passed to a2 with a nonce in the transaction (usually a timestamp)
</I>&gt;<i>
</I>&gt;<i> A2 decrypts the transaction (hey it&#8217;s the right key for a1, it must have
</I>&gt;<i> come from there!, and the timestamp is within an acceptable window for it
</I>&gt;<i> not to have been a replay attack) ( This could be a mutually authenticated
</I>&gt;<i> SSL session) . i1 is stored locally and is unique for the user and the data
</I>&gt;<i> held. It may be retrieved from a2 by whatever means by an authorised user of
</I>&gt;<i> that application. Users access application a2 by handover from a1, and are
</I>&gt;<i> verifiably the same individual at the same level as for a1, but now on a2
</I>&gt;<i> they are anonymous- &#8220;welcome, a1 person&#8221;.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Users shouldn&#8217;t need to know an&#8221; i1&#8221; value for the convenience of support
</I>&gt;<i> operators. Such data should be retrieved and presented by reference to the
</I>&gt;<i> a1 application keyed to a2 sourced data based on the authorised retriever
</I>&gt;<i> having access to both. Otherwise, the user must provide personal details to
</I>&gt;<i> associate with i1, defeating the purpose in the first place..
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Anyway, for more on this, google for details of the Shibboleth protocol, or
</I>&gt;<i> look at the granddaddy of all token exchange protocols, Kerberos, or Yale
</I>&gt;<i> CAS (Yale CAS is an open source SSO for higher ed, that uses SSL based
</I>&gt;<i> protocols for Kerberos-like functionality) for a quick and pretty good open
</I>&gt;<i> source toolkit.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Regards,
</I>&gt;<i>
</I>&gt;<i> John
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> *From:* <A HREF="https://lists.owasp.org/mailman/listinfo/owasp-ireland">owasp-ireland-bounces at lists.owasp.org</A> [mailto:
</I>&gt;<i> <A HREF="https://lists.owasp.org/mailman/listinfo/owasp-ireland">owasp-ireland-bounces at lists.owasp.org</A>] *On Behalf Of *Peter McEvoy
</I>&gt;<i> *Sent:* 12 May 2009 17:31
</I>&gt;<i> *To:* <A HREF="https://lists.owasp.org/mailman/listinfo/owasp-ireland">owasp-ireland at lists.owasp.org</A>
</I>&gt;<i> *Subject:* [Owasp-ireland] Question about identity over two systems
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Hi guys,
</I>&gt;<i> I'm really not sure if this is an approriate list to ask implmentation
</I>&gt;<i> questions on, but trawling the archives the traffic has been varied, so I'll
</I>&gt;<i> chance my arm and if anyone can point me to a more appropriate list...
</I>&gt;<i>
</I>&gt;<i> I'm looking for a technique that will allow an application A1 to create
</I>&gt;<i> user transactions in another application A2, _without sharing any
</I>&gt;<i> identifying information_.
</I>&gt;<i>
</I>&gt;<i> Specifically:
</I>&gt;<i>
</I>&gt;<i> 1) Application A1 stores information for a set of user entities.  User u1
</I>&gt;<i> is identitifed by i1
</I>&gt;<i>
</I>&gt;<i> 2) A1 wants to create a transaction in application A2 for application user
</I>&gt;<i> u1, but MUST NOT share any identifying information with A2 (due to data
</I>&gt;<i> protection act).  A2 cannot store any identifying information, likewise due
</I>&gt;<i> to DPA.
</I>&gt;<i>
</I>&gt;<i> 3) Application User u1 needs to identify and authenticate herself to A2 so
</I>&gt;<i> that she can query transactions that are hers
</I>&gt;<i>
</I>&gt;<i> 4) Support user u2 wants to query A2 and list transactions of u1.  The
</I>&gt;<i> support user will know i1 (or be able to request it from the user - but not
</I>&gt;<i> any secret information).
</I>&gt;<i>
</I>&gt;<i> I have identified one solution using hashes:
</I>&gt;<i> - Calculate hash i1, and use that as an identifier in all transactions.
</I>&gt;<i> Call this H(i1).
</I>&gt;<i> - u1 can submit (i1, password) to the application A2. A2 calculates H(i1)
</I>&gt;<i> (but does not store i1) and that is used to query transactions. Password is
</I>&gt;<i> used to authenticate
</I>&gt;<i> - After having authenticated to A2 using (i2, supportPassword), u2 can
</I>&gt;<i> submit i1 to A2, H(i1) is calculated and used in query.
</I>&gt;<i>
</I>&gt;<i> I _think_ this approach is sound, but would like confirmation from you
</I>&gt;<i> guys!
</I>&gt;<i>
</I>&gt;<i> One identified issue, is that the space of identifiers i1 is well known and
</I>&gt;<i> finite (10^7 combinations).  It could be possible to generate a lookup table
</I>&gt;<i> of all identifiers, and their corresponding hashes.  The only way I can see
</I>&gt;<i> a way around this, is by salting the hash with a PIN that is stored in A1,
</I>&gt;<i> communicated to the user via A1 and is part of the identifying information
</I>&gt;<i> used to calculate the hash.  But then, how do I provide support user access
</I>&gt;<i> to the records in A2  (as the support user cannot know the PIN)?
</I>&gt;<i>
</I>&gt;<i> Here's hoping someone can point me in the right direction!
</I>&gt;<i>
</I>&gt;<i> Pete
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="https://lists.owasp.org/pipermail/owasp-ireland/attachments/20090514/6c51bbb0/attachment.html">https://lists.owasp.org/pipermail/owasp-ireland/attachments/20090514/6c51bbb0/attachment.html</A> 
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000587.html">[Owasp-ireland] Question about identity over two systems
</A></li>
	<LI>Next message: <A HREF="000590.html">[Owasp-ireland] New member: Romans Malinovskis / Agile Technologies.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#588">[ date ]</a>
              <a href="thread.html#588">[ thread ]</a>
              <a href="subject.html#588">[ subject ]</a>
              <a href="author.html#588">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.owasp.org/mailman/listinfo/owasp-ireland">More information about the Owasp-ireland
mailing list</a><br>
</body></html>
