<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Owasp-ireland] OWASP Ireland 2010 Countdown: Second	Challenge	Winner
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:owasp-ireland%40lists.owasp.org?Subject=%5BOwasp-ireland%5D%20OWASP%20Ireland%202010%20Countdown%3A%20Second%0A%09Challenge%09Winner&In-Reply-To=AANLkTik2V5DXJ5tQQwanwPG%2BqbJq45oWVXXp3RPvvAd%2B%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000850.html">
   <LINK REL="Next"  HREF="000853.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Owasp-ireland] OWASP Ireland 2010 Countdown: Second	Challenge	Winner</H1>
    <B>Chris Madden</B> 
    <A HREF="mailto:owasp-ireland%40lists.owasp.org?Subject=%5BOwasp-ireland%5D%20OWASP%20Ireland%202010%20Countdown%3A%20Second%0A%09Challenge%09Winner&In-Reply-To=AANLkTik2V5DXJ5tQQwanwPG%2BqbJq45oWVXXp3RPvvAd%2B%40mail.gmail.com"
       TITLE="[Owasp-ireland] OWASP Ireland 2010 Countdown: Second	Challenge	Winner">Chris_M11 at VERIFONE.com
       </A><BR>
    <I>Fri Aug 20 16:47:02 EDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="000850.html">[Owasp-ireland] OWASP Ireland 2010 Countdown: Second Challenge	Winner
</A></li>
        <LI>Next message: <A HREF="000853.html">[Owasp-ireland] OWASP Ireland 2010 Countdown: Second Challenge	Winner
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#851">[ date ]</a>
              <a href="thread.html#851">[ thread ]</a>
              <a href="subject.html#851">[ subject ]</a>
              <a href="author.html#851">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Just wanted to pick up on the topic of arrays and pointers ala &quot;char *buf[MAXLEN];&quot; as this is one area that is commonly misunderstood.

Assuming this is C code...it is worth pointing out that due to C's operator precedence &quot;char *buf[MAXLEN];&quot; defines an array of pointers to type char - not a pointer to an array of chars as one may expect.
&quot;char buf[MAXLEN];&quot; defines an array of chars as expected.


The obvious difference is that sizeof(buf) will be 4096 i.e. 4 times MAXLEN, not 1024 as expected (assuming pointers are 4 bytes as determined by build environment)
There are other subtle differences that can catch the unwary related to this point e.g. how buf is interpreted if passed to a C function.
This subtlety can and does lead to nasty bugs.

This topic is covered extensively in Peter Van Der Linden's excellent book &quot;Expert C Programming - Deep C Secrets&quot;  The chapter is entitled &quot;The Shocking Truth: C Arrays and Pointers Are NOT the Same!&quot;

Chris

From: <A HREF="https://lists.owasp.org/mailman/listinfo/owasp-ireland">owasp-ireland-bounces at lists.owasp.org</A> [mailto:<A HREF="https://lists.owasp.org/mailman/listinfo/owasp-ireland">owasp-ireland-bounces at lists.owasp.org</A>] On Behalf Of Fabio Cerullo
Sent: 20 August 2010 17:33
To: owasp-ireland
Subject: [Owasp-ireland] OWASP Ireland 2010 Countdown: Second Challenge Winner

Congratulations to Kieran Tully on answering the challenge question correctly... you are coming to OWASP Ireland 2010 for FREE!!!
The main issue is that the code is vulnerable to buffer overflow.
#define MAXLEN 1024
 char *buf[MAXLEN];
..................

read(configFile,inputbuffer,MAXLEN);
.....................

strcpy(buf,inputbuf);
.......................

read() is not guaranteed to null-terminate the input buffer.
strncpy() could be used to prevent buffer overflow.

The above code will behave correctly if the data read from configFile is null terminated on disk as expected. (Null termination defines boundsof a string). If it is possible to modify this input so that it does not contain the expected null character, This shall result in the strcpy() to continue copying from memory until it encounters an arbitrary null character.

This may potentially cause an overflow the destination buffer which can result in malicious code execution if the attacker can control the contents of memory immediately following inputbuffer.
Thanks to all those who submitted an answer and until the next challenge on Friday 27th!

Fabio
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="https://lists.owasp.org/pipermail/owasp-ireland/attachments/20100820/3c14f485/attachment.html">https://lists.owasp.org/pipermail/owasp-ireland/attachments/20100820/3c14f485/attachment.html</A> 
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000850.html">[Owasp-ireland] OWASP Ireland 2010 Countdown: Second Challenge	Winner
</A></li>
	<LI>Next message: <A HREF="000853.html">[Owasp-ireland] OWASP Ireland 2010 Countdown: Second Challenge	Winner
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#851">[ date ]</a>
              <a href="thread.html#851">[ thread ]</a>
              <a href="subject.html#851">[ subject ]</a>
              <a href="author.html#851">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.owasp.org/mailman/listinfo/owasp-ireland">More information about the Owasp-ireland
mailing list</a><br>
</body></html>
