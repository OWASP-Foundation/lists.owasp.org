<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [OWASP-Ireland] Web services - DV Auth or Auth DV???
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:owasp-ireland%40lists.owasp.org?Subject=%5BOWASP-Ireland%5D%20Web%20services%20-%20DV%20Auth%20or%20Auth%20DV%3F%3F%3F&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000060.html">
   <LINK REL="Next"  HREF="000062.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[OWASP-Ireland] Web services - DV Auth or Auth DV???</H1>
    <B>John Marmelstein</B> 
    <A HREF="mailto:owasp-ireland%40lists.owasp.org?Subject=%5BOWASP-Ireland%5D%20Web%20services%20-%20DV%20Auth%20or%20Auth%20DV%3F%3F%3F&In-Reply-To="
       TITLE="[OWASP-Ireland] Web services - DV Auth or Auth DV???">marmelstein at eircom.net
       </A><BR>
    <I>Wed Jun  8 04:06:06 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="000060.html">[OWASP-Ireland] White collar crime via computer misuse in Ireland is double the US!!
</A></li>
        <LI>Next message: <A HREF="000062.html">[OWASP-Ireland] Web services - DV Auth or Auth DV???
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#61">[ date ]</a>
              <a href="thread.html#61">[ thread ]</a>
              <a href="subject.html#61">[ subject ]</a>
              <a href="author.html#61">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello All,
(first posting from a 'top ten' adopter)

I suggest that authentication is the one to do first. But, there are arguments on both sides. The advantage of authentication is that it can reduce the risk of malicious data attack. An attacker may send a payload aimed at doing damage during the xml parsing or data-validation utility (DV). I know that the DV is made with the intention of being resistant to this, but complex messages might be hard to validate safely. This is in contrast to messages received from html forms, which can be safely validated if they are all text strings.

Going further, there's a case for splitting the validation process. First, a 'sanity check' on the message. Then, authenticate. Finally, proper validation. For example; 
1- Check that is valid XML or SOAP. Maybe some broadly application-specific stuff, such as checking that the message only has text elements, no non-parse 'CDATA' bits. Or, that it is smaller than a certain size. 
2- Authenticate username/password
3- Application-specific data validation.
This may sound over-elaborate, but I don't think it's too bad. A typical environment might have a dedicated web-server (Apache, perhaps) in front of an Application Server (WebLogic, perhaps). The 'step 1' above could be efficiently done in the Apache, and a category of bad messages blocked within the DMZ. The same basic sanity check should work for many or all applications. Then again, this step can also be done by many firewall products, so may not be worth getting into.

bye,
John M
__________________
John Marmelstein
www.StrongPoint.ie


&gt;<i>&quot;Eoin Keary&quot; &lt;<A HREF="http://lists.owasp.org/mailman/listinfo/owasp-ireland">eoinkeary at hotmail.com</A>&gt; wrote:
</I>&gt;<i> Hi,
</I>&gt;<i> Just I'd throw this out so see opinion:
</I>&gt;<i> 
</I>&gt;<i> A webservice:
</I>&gt;<i> Uses HTTPS. The Payload (SOAP) is in the HTTP Header.
</I>&gt;<i> The password and UserId are also in the HTTP header as header parameters.
</I>&gt;<i> (We can see the obvious issues here already?!#!?)
</I>&gt;<i> 
</I>&gt;<i> So,
</I>&gt;<i> The service needs a requester to be authenticated.
</I>&gt;<i> So sneding SOAP request (Over HTTPS) to this service gives us &quot;Access 
</I>&gt;<i> Denied&quot; as I put in an incorrect password...ok so far
</I>&gt;<i> Sending a modified request which the XML schema does not like (malformed 
</I>&gt;<i> request for example) gives us a Data validation error....So DV is done 
</I>&gt;<i> before authentication.
</I>&gt;<i> 
</I>&gt;<i> Which should come first in the case of webservices...?
</I>&gt;<i> DV or Auth.
</I>&gt;<i> If DV is first we may be able to do a DoS by sending 1000's of requests, 
</I>&gt;<i> each one needing to be DV'ed. (Webservices are prone to DOS attacks).
</I>&gt;<i> By doing Auth first, we need to DV the userId and password, Authenticate and 
</I>&gt;<i> then continue with the DV, which is complex....
</I>&gt;<i> 
</I>&gt;<i> Anyone have any ideas which should be first, the &quot;chicken or the egg&quot;?
</I>&gt;<i> I have my own opinions but what do you good people think?
</I>



_________________________________________________________________
eircom broadband is now up to four times faster than before.
Phone 1850 73 00 73 or visit <A HREF="http://home.eircom.net/broadbandoffer">http://home.eircom.net/broadbandoffer</A>




</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000060.html">[OWASP-Ireland] White collar crime via computer misuse in Ireland is double the US!!
</A></li>
	<LI>Next message: <A HREF="000062.html">[OWASP-Ireland] Web services - DV Auth or Auth DV???
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#61">[ date ]</a>
              <a href="thread.html#61">[ thread ]</a>
              <a href="subject.html#61">[ subject ]</a>
              <a href="author.html#61">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.owasp.org/mailman/listinfo/owasp-ireland">More information about the Owasp-ireland
mailing list</a><br>
</body></html>
